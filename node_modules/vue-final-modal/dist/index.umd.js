(function(p,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue"),require("@vueuse/core"),require("@vueuse/integrations/useFocusTrap")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core","@vueuse/integrations/useFocusTrap"],o):(p=typeof globalThis<"u"?globalThis:p||self,o(p.index={},p.Vue,p.VueUse,p.VueUseFocusTrap))})(this,function(p,o,g,me){"use strict";const z={modalId:{type:[String,Number,Symbol],default:void 0},modelValue:{type:Boolean,default:void 0},displayDirective:{type:String,default:"if",validator:e=>["if","show"].includes(e)},hideOverlay:{type:Boolean,default:void 0},overlayTransition:{type:[String,Object],default:void 0},contentTransition:{type:[String,Object],default:void 0},overlayClass:{type:void 0,default:void 0},contentClass:{type:void 0,default:void 0},overlayStyle:{type:[String,Object,Array],default:void 0},contentStyle:{type:[String,Object,Array],default:void 0},clickToClose:{type:Boolean,default:!0},escToClose:{type:Boolean,default:!0},background:{type:String,default:"non-interactive",validator:e=>["interactive","non-interactive"].includes(e)},focusTrap:{type:[Boolean,Object],default:()=>({allowOutsideClick:!0})},lockScroll:{type:Boolean,default:!0},zIndexFn:{type:Function,default:({index:e})=>1e3+2*e},swipeToClose:{type:String,default:"none",validator:e=>["none","up","right","down","left"].includes(e)},threshold:{type:Number,default:0},showSwipeBanner:{type:Boolean,default:void 0},preventNavigationGestures:{type:Boolean,default:void 0}};function K(e=!1){const n=o.ref(e),l=o.ref(n.value?0:void 0);return[n,l,{beforeEnter(){l.value=1},afterEnter(){l.value=0},beforeLeave(){l.value=3},afterLeave(){l.value=2}}]}function pe(e,n){const{modelValueLocal:l,onEntering:a,onEnter:d,onLeaving:c,onLeave:s}=n,t=o.ref(l.value),[u,r,f]=K(t.value),[m,M,b]=K(t.value),S=o.computed(()=>typeof e.contentTransition=="string"?{name:e.contentTransition}:{...e.contentTransition}),B=o.computed(()=>typeof e.overlayTransition=="string"?{name:e.overlayTransition}:{...e.overlayTransition}),O=o.computed(()=>(e.hideOverlay||M.value===2)&&r.value===2);o.watch(O,L=>{L&&(t.value=!1)}),o.watch(r,L=>{switch(L){case 1:return a==null?void 0:a();case 0:return d==null?void 0:d();case 3:return c==null?void 0:c();case 2:return s==null?void 0:s()}});async function k(){t.value=!0,await o.nextTick(),u.value=!0,m.value=!0}function V(){u.value=!1,m.value=!1}return{visible:t,contentVisible:u,contentListeners:f,contentTransition:S,overlayVisible:m,overlayListeners:b,overlayTransition:B,enterTransition:k,leaveTransition:V}}function ve(e,n,l){const{vfmRootEl:a,vfmContentEl:d,visible:c,modelValueLocal:s}=l,t=o.ref();function u(){c.value&&e.escToClose&&(s.value=!1)}function r(m){t.value=m==null?void 0:m.target}function f(){var m;t.value===a.value&&(e.clickToClose?s.value=!1:((m=d.value)==null||m.focus(),n("clickOutside")))}return{onEsc:u,onMouseupRoot:f,onMousedown:r}}function ye(e,n){const l=o.ref(!!e.modelValue);return o.watch(()=>e.modelValue,a=>{l.value=!!a}),o.watch(l,a=>{a!==e.modelValue&&n("update:modelValue",a)}),{modelValueLocal:l}}function he(e,n){if(e.focusTrap===!1)return{focus(){},blur(){}};const{focusEl:l}=n,{hasFocus:a,activate:d,deactivate:c}=me.useFocusTrap(l,e.focusTrap);function s(){requestAnimationFrame(()=>{d()})}function t(){a.value&&c()}return{focus:s,blur:t}}let W=!1;if(typeof window<"u"){const e={get passive(){W=!0}};window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}const J=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);let A=[],x=!1,Y=0,Q=-1,N,R;const we=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return["auto","scroll"].includes(n.overflowY)&&e.scrollHeight>e.clientHeight},Te=(e,n)=>!(e.scrollTop===0&&n<0||e.scrollTop+e.clientHeight+n>=e.scrollHeight&&n>0),be=e=>{const n=[];for(;e;){if(n.push(e),e.classList.contains("vfm"))return n;e=e.parentElement}return n},Me=(e,n)=>{let l=!1;return be(e).forEach(d=>{we(d)&&Te(d,n)&&(l=!0)}),l},_=e=>A.some(()=>Me(e,-Y)),U=e=>{const n=e||window.event;return _(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},Se=e=>{if(R===void 0){const n=!!e&&e.reserveScrollBarGap===!0,l=window.innerWidth-document.documentElement.clientWidth;if(n&&l>0){const a=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);R=document.body.style.paddingRight,document.body.style.paddingRight=`${a+l}px`}}N===void 0&&(N=document.body.style.overflow,document.body.style.overflow="hidden")},ke=()=>{R!==void 0&&(document.body.style.paddingRight=R,R=void 0),N!==void 0&&(document.body.style.overflow=N,N=void 0)},Ve=e=>e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1,Ce=(e,n)=>(Y=e.targetTouches[0].clientY-Q,_(e.target)?!1:n&&n.scrollTop===0&&Y>0||Ve(n)&&Y<0?U(e):(e.stopPropagation(),!0)),Oe=(e,n)=>{if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(A.some(a=>a.targetElement===e))return;const l={targetElement:e,options:n||{}};A=[...A,l],J?(e.ontouchstart=a=>{a.targetTouches.length===1&&(Q=a.targetTouches[0].clientY)},e.ontouchmove=a=>{a.targetTouches.length===1&&Ce(a,e)},x||(document.addEventListener("touchmove",U,W?{passive:!1}:void 0),x=!0)):Se(n)},Ee=e=>{if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}A=A.filter(n=>n.targetElement!==e),J?(e.ontouchstart=null,e.ontouchmove=null,x&&A.length===0&&(document.removeEventListener("touchmove",U,W?{passive:!1}:void 0),x=!1)):A.length||ke()};function ge(e,n){const{lockScrollEl:l,modelValueLocal:a}=n;let d;o.watch(l,t=>{t&&(d=t)},{immediate:!0}),o.watch(()=>e.lockScroll,t=>{t?s():c()}),o.onBeforeUnmount(()=>{c()});function c(){d&&Ee(d)}function s(){a.value&&e.lockScroll&&d&&Oe(d,{reserveScrollBarGap:!0,allowTouchMove:t=>{for(;t&&t!==document.body;){if(t.getAttribute("vfm-scroll-lock-ignore")!==null)return!0;t=t.parentElement}return!1}})}return{enableBodyScroll:c,disableBodyScroll:s}}function Be(e){function n(l){switch(l){case"beforeOpen":e(l);break;case"beforeClose":e(l);break;case"opened":e(l);break;case"closed":e(l);break}}return{emitEvent:n}}function Le(e){const n=o.ref();function l(d){var c;n.value=(c=e.zIndexFn)==null?void 0:c.call(e,{index:d<=-1?0:d})}function a(){n.value=void 0}return{zIndex:n,refreshZIndex:l,resetZIndex:a}}const Pe=e=>(...n)=>{e&&(e==null||e(...n),e=null)},P=()=>{};function $(e,n,l){return e>l?l:e<n?n:e}const ee=e=>{if(e instanceof MouseEvent){const{clientX:n,clientY:l}=e;return{x:n,y:l}}else{const{clientX:n,clientY:l}=e.targetTouches[0];return{x:n,y:l}}};function Ie(e){if(!e)return!1;let n=!1;const l={get passive(){return n=!0,!1}};return e.addEventListener("x",P,l),e.removeEventListener("x",P),n}function Ae(e,{threshold:n=0,onSwipeStart:l,onSwipe:a,onSwipeEnd:d,passive:c=!0}){const s=o.reactive({x:0,y:0}),t=o.reactive({x:0,y:0}),u=o.computed(()=>s.x-t.x),r=o.computed(()=>s.y-t.y),{max:f,abs:m}=Math,M=o.computed(()=>f(m(u.value),m(r.value))>=n),b=o.ref(!1),S=o.computed(()=>M.value?m(u.value)>m(r.value)?u.value>0?"left":"right":r.value>0?"up":"down":"none"),B=(v,w)=>{s.x=v,s.y=w},O=(v,w)=>{t.x=v,t.y=w};let k,V;function L(v){k.capture&&!k.passive&&v.preventDefault();const{x:w,y:D}=ee(v);B(w,D),O(w,D),l==null||l(v),V=[g.useEventListener(e,"mousemove",F,k),g.useEventListener(e,"touchmove",F,k),g.useEventListener(e,"mouseup",i,k),g.useEventListener(e,"touchend",i,k),g.useEventListener(e,"touchcancel",i,k)]}function F(v){const{x:w,y:D}=ee(v);O(w,D),!b.value&&M.value&&(b.value=!0),b.value&&(a==null||a(v))}function i(v){b.value&&(d==null||d(v,S.value)),b.value=!1,V.forEach(w=>w())}let y=[];return o.onMounted(()=>{const v=Ie(window==null?void 0:window.document);c?k=v?{passive:!0}:{capture:!1}:k=v?{passive:!1,capture:!0}:{capture:!0},y=[g.useEventListener(e,"mousedown",L,k),g.useEventListener(e,"touchstart",L,k)]}),{isSwiping:b,direction:S,coordsStart:s,coordsEnd:t,lengthX:u,lengthY:r,stop:()=>{y.forEach(v=>v()),V.forEach(v=>v())}}}function De(e,n){const{vfmContentEl:l,modelValueLocal:a}=n,d=.1,c=300,s=o.ref(),t=o.computed(()=>{if(!(e.swipeToClose===void 0||e.swipeToClose==="none"))return e.showSwipeBanner?s.value:l.value}),u=o.ref(0),r=o.ref(!0);let f=P,m=!0,M,b=!1;const{lengthX:S,lengthY:B,direction:O,isSwiping:k}=Ae(t,{threshold:e.threshold,onSwipeStart(i){f=g.useEventListener(document,"selectionchange",()=>{var y;r.value=(y=window.getSelection())==null?void 0:y.isCollapsed}),M=new Date().getTime(),b=F(i==null?void 0:i.target)},onSwipe(){var i,y,E,v;if(b&&r.value&&O.value===e.swipeToClose){if(O.value==="up"){const w=$(Math.abs(B.value||0),0,((i=t.value)==null?void 0:i.offsetHeight)||0)-(e.threshold||0);u.value=w}else if(O.value==="down"){const w=$(Math.abs(B.value||0),0,((y=t.value)==null?void 0:y.offsetHeight)||0)-(e.threshold||0);u.value=-w}else if(O.value==="right"){const w=$(Math.abs(S.value||0),0,((E=t.value)==null?void 0:E.offsetWidth)||0)-(e.threshold||0);u.value=-w}else if(O.value==="left"){const w=$(Math.abs(S.value||0),0,((v=t.value)==null?void 0:v.offsetWidth)||0)-(e.threshold||0);u.value=w}}},onSwipeEnd(i,y){if(f(),!r.value){r.value=!0;return}const E=new Date().getTime(),v=y===e.swipeToClose,w=(()=>{var H,G;if(y==="up"||y==="down")return Math.abs((B==null?void 0:B.value)||0)>d*(((H=t.value)==null?void 0:H.offsetHeight)||0);if(y==="left"||y==="right")return Math.abs((S==null?void 0:S.value)||0)>d*(((G=t.value)==null?void 0:G.offsetWidth)||0)})(),D=E-M<=c;if(m&&b&&v&&(w||D)){a.value=!1;return}u.value=0}}),V=o.computed(()=>{if(e.swipeToClose==="none")return;const i=(()=>{switch(e.swipeToClose){case"up":case"down":return"translateY";case"left":case"right":return"translateX"}})();return{class:{"vfm-bounce-back":!k.value},style:{transform:`${i}(${-u.value}px)`}}});o.watch(()=>r.value,i=>{i||(u.value=0)}),o.watch(()=>a.value,i=>{i&&(u.value=0)}),o.watch(()=>u.value,(i,y)=>{switch(e.swipeToClose){case"down":case"right":m=i<y;break;case"up":case"left":m=i>y;break}});function L(i){e.preventNavigationGestures&&i.preventDefault()}function F(i){const y=i==null?void 0:i.tagName;if(!y||["INPUT","TEXTAREA"].includes(y))return!1;const E=(()=>{switch(e.swipeToClose){case"up":return(i==null?void 0:i.scrollTop)+(i==null?void 0:i.clientHeight)===(i==null?void 0:i.scrollHeight);case"left":return(i==null?void 0:i.scrollLeft)+(i==null?void 0:i.clientWidth)===(i==null?void 0:i.scrollWidth);case"down":return(i==null?void 0:i.scrollTop)===0;case"right":return(i==null?void 0:i.scrollLeft)===0;default:return!1}})();return i===t.value?E:E&&F(i==null?void 0:i.parentElement)}return{vfmContentEl:l,swipeBannerEl:s,bindSwipe:V,onTouchStartSwipeBanner:L}}const X=Symbol("vfm"),Z=Symbol("internalVfm"),oe=o.defineComponent({__name:"CoreModal",props:z,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(e,{emit:n}){const l=e,{modals:a,openedModals:d}=o.inject(X,{modals:[],openedModals:[]}),{openLastOverlay:c,moveToLastOpenedModals:s,deleteFromOpenedModals:t,moveToLastOpenedModalOverlays:u,deleteFromOpenedModalOverlays:r,deleteFromModals:f}=o.inject(Z,{openLastOverlay:P,moveToLastOpenedModals:P,deleteFromOpenedModals:P,moveToLastOpenedModalOverlays:P,deleteFromOpenedModalOverlays:P,deleteFromModals:P}),m=o.ref(),M=o.ref(),{focus:b,blur:S}=he(l,{focusEl:m}),{zIndex:B,refreshZIndex:O,resetZIndex:k}=Le(l),{modelValueLocal:V}=ye(l,n),{enableBodyScroll:L,disableBodyScroll:F}=ge(l,{lockScrollEl:m,modelValueLocal:V}),{emitEvent:i}=Be(n);let y=P;const{visible:E,contentVisible:v,contentListeners:w,contentTransition:D,overlayVisible:H,overlayListeners:G,overlayTransition:Ge,enterTransition:We,leaveTransition:Xe}=pe(l,{modelValueLocal:V,onEntering(){o.nextTick(()=>{F()})},onEnter(){b(),i("opened"),y("opened")},onLeave(){t(Qe()),k(),L(),i("closed"),y("closed")}}),{onEsc:Ze,onMouseupRoot:qe,onMousedown:ce}=ve(l,n,{vfmRootEl:m,vfmContentEl:M,visible:E,modelValueLocal:V}),{swipeBannerEl:Ke,bindSwipe:Je,onTouchStartSwipeBanner:de}=De(l,{vfmContentEl:M,modelValueLocal:V}),ue=o.toRef(l,"hideOverlay"),I=o.computed(()=>({modalId:l.modalId,hideOverlay:ue,overlayVisible:H,focus:b,toggle(h){return new Promise(T=>{y=Pe(eo=>T(eo));const C=typeof h=="boolean"?h:!V.value;V.value=C,n("update:modelValue",C)})}}));function Qe(){return I}const q=o.computed(()=>d.indexOf(I));o.watch(()=>[l.zIndexFn,q.value],()=>{E.value&&O(q.value)}),o.onMounted(()=>{a.push(I)}),V.value&&fe(),o.watch(V,h=>{h?fe():_e()});async function fe(){i("beforeOpen"),s(I),u(I),O(q.value),c(),We()}function _e(){i("beforeClose"),r(I),c(),S(),Xe()}return o.onBeforeUnmount(()=>{L(),f(I),t(I),r(I),S(),c()}),(h,T)=>h.displayDirective!=="if"||o.unref(E)?o.withDirectives((o.openBlock(),o.createElementBlock("div",{key:0,ref_key:"vfmRootEl",ref:m,class:o.normalizeClass(["vfm vfm--fixed vfm--inset",{"vfm--prevent-none":h.background==="interactive"}]),style:o.normalizeStyle({zIndex:o.unref(B)}),role:"dialog","aria-modal":"true",onKeydown:T[7]||(T[7]=o.withKeys(()=>o.unref(Ze)(),["esc"])),onMouseup:T[8]||(T[8]=o.withModifiers(()=>o.unref(qe)(),["self"])),onMousedown:T[9]||(T[9]=o.withModifiers(C=>o.unref(ce)(C),["self"]))},[o.unref(ue)?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(o.Transition,o.mergeProps({key:0},o.unref(Ge),{appear:h.displayDirective==="if"},o.toHandlers(o.unref(G))),{default:o.withCtx(()=>[o.unref(H)?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(["vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none",h.overlayClass]),style:o.normalizeStyle(h.overlayStyle),"aria-hidden":"true"},null,6)):o.createCommentVNode("",!0)]),_:1},16,["appear"])),o.createVNode(o.Transition,o.mergeProps(o.unref(D),{appear:h.displayDirective==="if"},o.toHandlers(o.unref(w))),{default:o.withCtx(()=>[o.withDirectives(o.createElementVNode("div",o.mergeProps({ref_key:"vfmContentEl",ref:M,class:["vfm__content vfm--outline-none",[h.contentClass,{"vfm--prevent-auto":h.background==="interactive"}]],style:h.contentStyle,tabindex:"0"},o.unref(Je),{onMousedown:T[6]||(T[6]=()=>o.unref(ce)())}),[o.renderSlot(h.$slots,"default"),h.showSwipeBanner?(o.openBlock(),o.createElementBlock("div",{key:0,ref_key:"swipeBannerEl",ref:Ke,class:"vfm-swipe-banner-container",onTouchstart:T[2]||(T[2]=C=>o.unref(de)(C))},[o.renderSlot(h.$slots,"swipe-banner",{},()=>[o.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:T[0]||(T[0]=C=>h.swipeToClose==="left"&&C.preventDefault())},null,32),o.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:T[1]||(T[1]=C=>h.swipeToClose==="right"&&C.preventDefault())},null,32)])],544)):!h.showSwipeBanner&&h.preventNavigationGestures?(o.openBlock(),o.createElementBlock("div",{key:1,class:"vfm-swipe-banner-container",onTouchstart:T[5]||(T[5]=C=>o.unref(de)(C))},[o.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:T[3]||(T[3]=C=>h.swipeToClose==="left"&&C.preventDefault())},null,32),o.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:T[4]||(T[4]=C=>h.swipeToClose==="right"&&C.preventDefault())},null,32)],32)):o.createCommentVNode("",!0)],16),[[o.vShow,o.unref(v)]])]),_:3},16,["appear"])],38)),[[o.vShow,h.displayDirective!=="show"||o.unref(E)]]):o.createCommentVNode("",!0)}}),oo="",ne={...z,teleportTo:{type:[String,null,Boolean,Object],default:"body"}},Fe=o.defineComponent({inheritAttrs:!1}),te=o.defineComponent({...Fe,__name:"VueFinalModal",props:ne,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(e,{emit:n}){const a=ie({props:e,modalProps:z,emit:n});return(d,c)=>(o.openBlock(),o.createBlock(o.Teleport,{to:d.teleportTo?d.teleportTo:void 0,disabled:!d.teleportTo},[o.createVNode(oe,o.normalizeProps(o.guardReactiveProps(o.unref(a))),{default:o.withCtx(()=>[o.renderSlot(d.$slots,"default")]),_:3},16)],8,["to","disabled"]))}});p.activeVfm=void 0;const le=e=>p.activeVfm=e,se=()=>o.getCurrentInstance()&&o.inject(X)||p.activeVfm;function Ne(){const e=o.shallowReactive([]),n=o.shallowReactive([]),l=o.shallowReactive([]),a=o.shallowReactive([]),d=o.ref([]),c=o.markRaw({install(s){s.provide(X,c),s.config.globalProperties.$vfm=c;const t=Re(c);s.provide(Z,t)},modals:e,openedModals:n,openedModalOverlays:l,dynamicModals:a,modalsContainers:d,get(s){return e.find(t=>t.value.modalId&&s===t.value.modalId)},toggle(s,t){const u=c.get(s);return u==null?void 0:u.value.toggle(t)},open(s){return c.toggle(s,!0)},close(s){return c.toggle(s,!1)},closeAll(){return Promise.allSettled([n.map(s=>s.value.toggle(!1))])}});return le(c),c}function Re(e){const{modals:n,openedModals:l,openedModalOverlays:a,dynamicModals:d}=e,c={deleteFromModals(s){const t=n.findIndex(u=>u.value===s.value);t!==-1&&n.splice(t,1)},moveToLastOpenedModals(s){c.deleteFromOpenedModals(s),l.push(s)},deleteFromOpenedModals(s){const t=l.findIndex(u=>u.value===s.value);t!==-1&&l.splice(t,1)},moveToLastOpenedModalOverlays(s){c.deleteFromOpenedModalOverlays(s),a.push(s)},deleteFromOpenedModalOverlays(s){const t=a.findIndex(u=>u.value===s.value);t!==-1&&a.splice(t,1)},async openLastOverlay(){var s;if(await o.nextTick(),a.forEach(t=>t.value.overlayVisible.value=!1),a.length>0){const t=a[a.length-1];!((s=t.value.hideOverlay)!=null&&s.value)&&(t.value.overlayVisible.value=!0)}},resolvedClosed(s){var t,u,r;(u=(t=d[s])==null?void 0:t.resolveClosed)==null||u.call(t),(r=d[s])!=null&&r.keepAlive||d.splice(s,1)},resolvedOpened(s){var t,u;(u=(t=d[s])==null?void 0:t.resolveOpened)==null||u.call(t)}};return c}function j(){const e=se();if(!e)throw new Error(`[Vue Final Modal]: getActiveVfm was called with no active Vfm. Did you forget to install vfm?
	const vfm = createVfm()
	app.use(vfm)
This will fail in production.`);return e}function je(){return o.inject(Z)}function re(e,n=te){const{component:l,slots:a,...d}=e,c=typeof a>"u"?{}:Object.fromEntries(Object.entries(a).map(([s,t])=>g.isString(t)?[s,t]:"component"in t?[s,{...t,component:o.markRaw(t.component)}]:[s,o.markRaw(t)]));return{...d,component:o.markRaw(l||n),slots:c}}function He(e){var u;const n=o.reactive({id:Symbol("useModal"),modelValue:!!(e!=null&&e.defaultModelValue),resolveOpened:()=>{},resolveClosed:()=>{},attrs:{},...re(e)});g.tryOnUnmounted(()=>{n!=null&&n.keepAlive||t()}),n.modelValue===!0&&(p.activeVfm?(u=p.activeVfm)==null||u.dynamicModals.push(n):o.nextTick(()=>{const r=j();r==null||r.dynamicModals.push(n)}));async function l(){let r;return p.activeVfm?r=p.activeVfm:(await o.nextTick(),r=j()),n.modelValue?Promise.resolve("[Vue Final Modal] modal is already opened."):(t(),n.modelValue=!0,r.dynamicModals.push(n),new Promise(f=>{n.resolveOpened=()=>f("opened")}))}function a(){return n.modelValue?(n.modelValue=!1,new Promise(r=>{n.resolveClosed=()=>r("closed")})):Promise.resolve("[Vue Final Modal] modal is already closed.")}function d(r){const{slots:f,...m}=re(r,n.component);r.defaultModelValue!==void 0&&(n.defaultModelValue=r.defaultModelValue),(r==null?void 0:r.keepAlive)!==void 0&&(n.keepAlive=r==null?void 0:r.keepAlive),c(n,m),f&&Object.entries(f).forEach(([M,b])=>{const S=n.slots[M];g.isString(S)?n.slots[M]=b:ae(S)&&ae(b)?c(S,b):n.slots[M]=b})}function c(r,f){f.component&&(r.component=f.component),f.attrs&&s(r.attrs,f.attrs)}function s(r,f){return Object.entries(f).forEach(([m,M])=>{r[m]=M}),r}function t(){const r=j(),f=r.dynamicModals.indexOf(n);f!==-1&&r.dynamicModals.splice(f,1)}return{options:n,open:l,close:a,patchOptions:d,destroy:t}}function ze(e){return e}function ae(e){return"component"in e||"attrs"in e}function xe(e,n){return Object.keys(n).reduce((l,a)=>(l[a]=e[a],l),{})}function Ye(e){return e?{"onUpdate:modelValue":n=>e("update:modelValue",n),onBeforeClose:()=>e("beforeClose"),onClosed:()=>e("closed"),onBeforeOpen:()=>e("beforeOpen"),onOpened:()=>e("opened"),onClickOutside:()=>e("clickOutside")}:{}}function ie(e){const{props:n,modalProps:l,emit:a}=e,d=o.computed(()=>xe(n,l)),c=Ye(a),s=o.useAttrs();return o.computed(()=>({...d.value,...c,...s}))}const Ue=["innerHTML"],$e=o.defineComponent({__name:"ModalsContainer",setup(e){const n=j(),l=je(),a=Symbol("ModalsContainer"),d=o.computed(()=>{var c;return a===((c=n.modalsContainers.value)==null?void 0:c[0])});return n.modalsContainers.value.push(a),o.onBeforeUnmount(()=>{n.modalsContainers.value=n.modalsContainers.value.filter(c=>c!==a)}),(c,s)=>o.unref(d)?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(o.unref(n).dynamicModals,(t,u)=>(o.openBlock(),o.createBlock(o.resolveDynamicComponent(t.component),o.mergeProps({key:t.id},{displayDirective:t!=null&&t.keepAlive?"show":void 0,...t.attrs},{modelValue:t.modelValue,"onUpdate:modelValue":r=>t.modelValue=r,onClosed:()=>{var r,f;return(f=(r=o.unref(l)).resolvedClosed)==null?void 0:f.call(r,u)},onOpened:()=>{var r,f;return(f=(r=o.unref(l)).resolvedOpened)==null?void 0:f.call(r,u)}}),o.createSlots({_:2},[o.renderList(t.slots,(r,f)=>({name:f,fn:o.withCtx(()=>[o.unref(g.isString)(r)?(o.openBlock(),o.createElementBlock("div",{key:0,innerHTML:r},null,8,Ue)):"component"in r?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(r.component),o.normalizeProps(o.mergeProps({key:1},r.attrs)),null,16)):(o.openBlock(),o.createBlock(o.resolveDynamicComponent(r),{key:2}))])}))]),1040,["modelValue","onUpdate:modelValue","onClosed","onOpened"]))),128)):o.createCommentVNode("",!0)}});p.CoreModal=oe,p.ModalsContainer=$e,p.VueFinalModal=te,p.coreModalProps=z,p.createVfm=Ne,p.getActiveVfm=se,p.setActiveVfm=le,p.useModal=He,p.useModalSlot=ze,p.useVfm=j,p.useVfmAttrs=ie,p.vueFinalModalProps=ne,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});
