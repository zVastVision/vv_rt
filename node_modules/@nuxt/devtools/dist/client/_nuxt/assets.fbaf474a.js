import{_ as K}from"./NIconButton.vue.61b6fdb9.js";import{_ as H}from"./Navbar.vue.1175e5b5.js";import{a as j,J as Y,r as T,e as V,o as s,h as r,i as f,u as n,f as e,l as E,F as N,q as O,c as F,w as z,v as S,s as q,K as ee,L as te,y as G,M as ne,k as Z,p as y,N as se,O as oe,P as ae,t as w,Q as X,R as ie,S as le,T as re,U as ce,G as ue}from"./entry.8297d1ff.js";import{_ as de}from"./NTextInput.vue.3d7af8ee.js";import{_ as pe}from"./NSectionBlock.b03d4f1a.js";import{_ as me}from"./FilepathItem.vue.22e62c13.js";import{_ as fe}from"./CodeSnippets.vue.c8638278.js";import{u as he,a as _e}from"./editor.e9488ebd.js";import{_ as ve}from"./DrawerRight.vue.f79970eb.js";import{D as ge}from"./constants.d7bcda3c.js";import{F as xe}from"./fuse.esm.88e2763d.js";import"./NIconTitle.vue.db04ddec.js";import"./NCodeBlock.vue.7df96def.js";import"./client.64d509dc.js";const be={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},we={for:"drop-zone-input","text-3xl":""},ye={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},$e=e("div",{px6:"",py6:""},[e("h1",{"text-2xl":""}," Upload "),e("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1),ke={grid:"~ cols-minmax-8rem","overflow-auto":"",p6:""},Ce={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Pe=["src"],Fe={flex:"~ gap1","items-center":""},Ae={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},De=j({__name:"DropZone",props:{folder:{type:String,required:!0}},emits:["uploaded"],setup(o,{emit:t}){const m=o,c=Y(),g=T(!1),k=T(),u=T([]),C=["image","video"];function L(a){k.value=a.target,g.value=!0}function B(a){a.target===k.value&&(g.value=!1)}function M(a){a.preventDefault()}function x(a){a.preventDefault(),h(a.dataTransfer.files)}function h(a){const _=Array.from(a||[]);if(_.length){const i=[],v=u.value.map(d=>d.name);for(const d of _)if(v.includes(d.name)){let b=1;const[P,R]=d.name.split(".");for(;v.includes(`${P} (${b}).${R}`);)b++;const U=`${P}-${b}.${R}`,Q=new Blob([d],{type:d.type}),W=new File([Q],U,{lastModified:Date.now()});i.push(W),v.push(U)}else d.type===""?c("Folders are not supported yet","carbon:face-dissatisfied"):C.some(b=>d.type.includes(b))?i.push(d):c(`"${d.type}" file type is not allowed`,"carbon:face-dizzy");u.value=[...u.value,...i]}}async function l(){if(ee.value||te.value)return;const a=[];for(const _ of u.value){const i=new FileReader;i.readAsDataURL(_);const d=(await new Promise(b=>{i.onload=()=>b(i.result)})).split(";base64,").pop();a.push({name:_.name,data:d})}await G.writeStaticAssets([...a],m.folder).then(()=>{t("uploaded"),I(),c("Files uploaded successfully!","carbon:face-cool")}).catch(_=>{console.error(_),I(),c("Upload failed!","carbon:face-dizzy")}),g.value=!1}function p(a){u.value?.splice(a,1)}function A(a){return URL.createObjectURL(a)}function $(a,_){const[i,v]=a.name.split("."),d=_.replace(/\.\w+$/,""),b=`${d}.${v}`;return d.length===0?(alert("File name must be at least 1 characters long"),i):(Object.defineProperty(a,"name",{value:b,writable:!1}),u.value.splice(u.value.indexOf(a),1,a),a)}function D(){u.value=[]}function I(){g.value=!1,D()}return V("dragenter",L),V("dragleave",B),V("dragover",M),V("drop",x),(a,_)=>{const i=K,v=ne,d=de,b=Z;return s(),r("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:q(n(g)?"opacity-100 visible":"opacity-0 invisible")},[f(i,{icon:"carbon-close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",onClick:I}),n(u)?.length?(s(),r("div",ye,[$e,e("div",ke,[(s(!0),r(N,null,O(n(u),(P,R)=>(s(),r("div",{key:P.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[e("div",Ce,[e("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:A(P)},null,8,Pe)]),e("div",Fe,[f(d,{n:"xs","flex-auto":"","model-value":P.name,"onUpdate:modelValue":U=>$(P,U.target.value)},null,8,["model-value","onUpdate:modelValue"]),f(i,{icon:"carbon-delete","flex-none":"",title:"Remove file",onClick:U=>p(R)},null,8,["onClick"])])]))),128))]),e("div",Ae,[n(u).length?(s(),F(b,{key:0,n:"red",onClick:D},{default:z(()=>[f(v,{icon:"carbon-clean"}),E(" Clear ")]),_:1})):S("",!0),f(b,{disabled:!n(u).length,n:"primary solid",onClick:l},{default:z(()=>[f(v,{icon:"carbon-cloud-upload"}),E(" Upload ")]),_:1},8,["disabled"])])])):(s(),r("div",be,[e("label",we,[f(v,{icon:"carbon-cloud-upload","mr-2":""}),E(" Drop files here or click to select ")]),e("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:_[0]||(_[0]=P=>h(P.target.files))},null,32)]))],2)}}}),Ie=j({__name:"AssetFontPreview",props:{asset:null},setup(o){const t=o,m=y(()=>`devtools-assets-${se(t.asset)}`);return oe(y(()=>`
  @font-face {
    font-family: '${m.value}';
    src: url('${t.asset.publicPath}');
  }
`)),(c,g)=>(s(),r("div",{"of-hidden":"",style:ae({fontFamily:`'${n(m)}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),Ne={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},Se=["src"],ze={key:2,"i-carbon-document":"","text-3xl":"",op20:""},Te={key:3,"w-full":"","self-start":"",p4:""},je=["textContent"],Be={key:4,"i-carbon-help":"","text-3xl":"",op20:""},J=j({__name:"AssetPreview",props:{asset:null,textContent:null},setup(o){return(t,m)=>{const c=Ie;return s(),r("div",Ne,[o.asset.type==="image"?(s(),r("img",{key:0,src:o.asset.publicPath},null,8,Se)):o.asset.type==="font"?(s(),F(c,{key:o.asset.publicPath,asset:o.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):o.asset.type==="text"&&!o.textContent?(s(),r("div",ze)):o.asset.type==="text"&&o.textContent?(s(),r("div",Te,[e("pre",{"max-h-10rem":"","of-hidden":"","font-mono":"","text-xs":"",textContent:w(o.textContent)},null,8,je)])):(s(),r("div",Be))])}}}),Ee={flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},Le={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},Me=j({__name:"AssetGridItem",props:{asset:null,folder:null},setup(o){const t=o,m=y(()=>t.folder&&t.asset.path.startsWith(t.folder)?t.asset.path.slice(t.folder.length):t.asset.path);return(c,g)=>{const k=J;return s(),r("button",Ee,[f(k,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:o.asset},null,8,["asset"]),e("div",Le,w(n(m)),1)])}}}),Ue={flex:"~ gap-1","w-full":"","items-center":"",hover:"bg-active",rounded:"",px4:"",py2:""},Oe={"of-hidden":"",truncate:"","ws-nowrap":"","text-center":""},Re=j({__name:"AssetListItem",props:{asset:null},setup(o){const t=o,m=y(()=>t.asset.type==="image"?"i-carbon-image":t.asset.type==="video"?"i-carbon-video":t.asset.type==="audio"?"i-carbon-volume-up":t.asset.type==="font"?"i-carbon-text-small-caps":t.asset.type==="text"?"i-carbon-document":t.asset.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(c,g)=>(s(),r("button",Ue,[e("div",{class:q(n(m))},null,2),e("div",Oe,w(o.asset.path),1)]))}}),Ve={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},Ge=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Preview "),e("div",{"x-divider":""})],-1),Ke={flex:"~","items-center":"","justify-center":""},Xe=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Details "),e("div",{"x-divider":""})],-1),qe={"max-w-full":"","w-full":"","table-fixed":""},Ze=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1),Je={flex:"~ gap-1","w-full":"","items-center":""},Qe=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1),We={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},He={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},Ye=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1),et={capitalize:""},tt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1),nt={key:0},st=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1),ot=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1),at=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1),it={op70:""},lt=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Actions "),e("div",{"x-divider":""})],-1),rt={flex:"~ gap2 wrap"},ct=e("div",{"flex-auto":""},null,-1),ut=j({__name:"AssetDetails",props:{asset:null},setup(o){const t=o,m=he(),c=X(()=>{if(t.asset.type==="image")return G.getImageMeta(t.asset.filePath)}),g=X(()=>{if(t.asset.type==="text")return G.getTextAssetContent(t.asset.filePath)}),k=ie(),u=y(()=>(k.value?._installedModules||[]).some(p=>p.meta?.name==="@nuxt/image"||p.meta?.name==="@nuxt/image-edge")),C=y(()=>{const l=[];if(t.asset.type==="image"){const p=c.value?.width?`
  width="${c.value.width}"
  height="${c.value.height}" `:" ";return l.push({lang:"vue-html",code:`<img${p}
  src="${t.asset.publicPath}"
/>`,name:"Plain Image"}),u.value&&l.push({lang:"vue-html",code:`<NuxtImage${p}
  src="${t.asset.publicPath}"
/>`,name:"Nuxt Image",docs:"https://image.nuxtjs.org/components/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${p}
  src="${t.asset.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxtjs.org/components/nuxt-picture"}),l}return l.push({lang:"html",code:`<a download href="${t.asset.publicPath}">
  Download ${t.asset.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),l}),L=_e(),B=le(()=>t.asset.mtime),M=y(()=>{const l=t.asset.size;return l<1024?`${l} B`:l<1024*1024?`${(l/1024).toFixed(2)} KB`:`${(l/1024/1024).toFixed(2)} MB`}),x=y(()=>{if(!c.value?.width||!c.value?.height)return"";const l=(A,$)=>$?l($,A%$):A,p=l(c.value.width,c.value.height);return p>3?`${c.value.width/p}:${c.value.height/p}`:""}),h=y(()=>["image","text","video","font"].includes(t.asset.type));return(l,p)=>{const A=J,$=me,D=K,I=Z,a=fe;return s(),r("div",Ve,[n(h)?(s(),r(N,{key:0},[Ge,e("div",Ke,[f(A,{"max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:o.asset,"text-content":n(g)},null,8,["asset","text-content"])])],64)):S("",!0),Xe,e("table",qe,[e("tbody",null,[e("tr",null,[Ze,e("td",null,[e("div",Je,[f($,{filepath:o.asset.filePath,"text-left":""},null,8,["filepath"]),f(D,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",onClick:p[0]||(p[0]=_=>n(m)(o.asset.filePath))})])])]),e("tr",null,[Qe,e("td",null,[e("div",We,[e("div",He,w(o.asset.publicPath),1),f(D,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",onClick:p[1]||(p[1]=_=>n(L)(o.asset.publicPath))}),f(D,{"flex-none":"",to:o.asset.publicPath,icon:"carbon-launch",target:"_blank",title:"Open in browser"},null,8,["to"])])])]),e("tr",null,[Ye,e("td",et,w(o.asset.type),1)]),n(c)?.width?(s(),r(N,{key:0},[e("tr",null,[tt,e("td",null,w(n(c).width)+" x "+w(n(c).height),1)]),n(x)?(s(),r("tr",nt,[st,e("td",null,w(n(x)),1)])):S("",!0)],64)):S("",!0),e("tr",null,[ot,e("td",null,w(n(M)),1)]),e("tr",null,[at,e("td",null,[E(w(new Date(o.asset.mtime).toLocaleString())+" ",1),e("span",it,"("+w(n(B))+")",1)])])])]),lt,e("div",rt,[f(I,{to:o.asset.publicPath,download:"",target:"_blank",icon:"carbon-download"},{default:z(()=>[E(" Download ")]),_:1},8,["to"]),o.asset.type==="image"?(s(),F(I,{key:0,disabled:"",icon:"carbon-image-service"},{default:z(()=>[E(" Optimize image (Coming soon) ")]),_:1})):S("",!0)]),ct,n(C).length?(s(),F(a,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":n(C)},null,8,["code-snippets"])):S("",!0)])}}}),dt={"h-full":"","of-auto":""},pt={"flex-none":"",flex:"~ gap2 items-center"},mt={op50:""},ft={key:0},ht={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},_t={key:1,p2:"",grid:"~ cols-minmax-8rem"},vt={key:1},St=j({__name:"assets",setup(o){const t=re(),m=T(""),c=y(()=>new xe(t.value||[],{keys:["path"]})),g=y(()=>m.value?c.value.search(m.value).map(h=>h.item):t.value||[]),k=y(()=>{const x={};for(const h of g.value){const l=`${h.path.split("/").slice(0,-1).join("/")}/`;x[l]||(x[l]=[]),x[l].push(h)}return Object.entries(x).sort(([h],[l])=>h.localeCompare(l))}),u=T(),C=T("grid");function L(){C.value=C.value==="list"?"grid":"list"}ce("Escape",()=>{u.value=void 0});const B=T();function M(){}return(x,h)=>{const l=K,p=H,A=De,$=Me,D=pe,I=Re,a=ut,_=ve;return s(),r("div",dt,[f(p,{ref_key:"navbar",ref:B,search:n(m),"onUpdate:search":h[0]||(h[0]=i=>ue(m)?m.value=i:null),pb2:""},{actions:z(()=>[e("div",pt,[f(l,{"text-lg":"",icon:n(C)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:L},null,8,["icon"])])]),default:z(()=>[e("div",mt,[n(m)?(s(),r("span",ft,w(n(g).length)+" matched · ",1)):S("",!0),e("span",null,w(n(t)?.length)+" assets in total",1)])]),_:1},8,["search"]),f(A,{folder:"/",onUploaded:M}),n(C)==="grid"?(s(),r(N,{key:0},[n(k).length>1?(s(!0),r(N,{key:0},O(n(k),([i,v])=>(s(),F(D,{key:i,text:i,description:`${v.length} items`,open:v.length<=("DETAILS_MAX_ITEMS"in x?x.DETAILS_MAX_ITEMS:n(ge)),padding:!1},{default:z(()=>[e("div",ht,[(s(!0),r(N,null,O(v,d=>(s(),F($,{key:d.path,asset:d,folder:i,onClick:b=>u.value=d},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(s(),r("div",_t,[(s(!0),r(N,null,O(n(g),i=>(s(),F($,{key:i.path,asset:i,onClick:v=>u.value=i},null,8,["asset","onClick"]))),128))]))],64)):(s(),r("div",vt,[(s(!0),r(N,null,O(n(g),i=>(s(),F(I,{key:i.path,asset:i,onClick:v=>u.value=i},null,8,["asset","onClick"]))),128))])),f(_,{"model-value":!!n(u),"auto-close":"","w-120":"",navbar:n(B),onClose:h[1]||(h[1]=i=>u.value=void 0)},{default:z(()=>[n(u)?(s(),F(a,{key:0,asset:n(u)},null,8,["asset"])):S("",!0)]),_:1},8,["model-value","navbar"])])}}});export{St as default};
