import{g as aa,b as Pr,i as hs,p as sr,f as Qr,t as ps,a as vs,P as Ni,S as Ru,C as kt,u as Tr,d as Mu,H as bt,e as _i,j as ys,N as Yt,A as St,h as Fu,_ as M,k as K,l as ie,m as j,W as Lu,n as N,o as O,G as Ne,q as nt,r as oa,s as _t,v as ju,w as qu}from"./Auth.625ee0a0.js";import{Y as he,Z as Be,$ as Ut,a0 as ms,a1 as Bu,a2 as Lr,a3 as Uu,a4 as jr,a5 as Ku}from"./entry.bbefaf41.js";var zu=new he("I18n"),Fa=function(){function t(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&typeof window<"u"&&window&&window.navigator&&(this._lang=window.navigator.language),zu.debug(this._lang)}return t.prototype.setLanguage=function(e){this._lang=e},t.prototype.get=function(e,r){if(r===void 0&&(r=void 0),!this._lang)return typeof r<"u"?r:e;var n=this._lang,i=this.getByLanguage(e,n);return i||(n.indexOf("-")>0&&(i=this.getByLanguage(e,n.split("-")[0])),i)?i:typeof r<"u"?r:e},t.prototype.getByLanguage=function(e,r,n){if(n===void 0&&(n=null),!r)return n;var i=this._dict[r];return i?i[e]:n},t.prototype.putVocabulariesForLanguage=function(e,r){var n=this._dict[e];n||(n=this._dict[e]={}),this._dict[e]=Be(Be({},n),r)},t.prototype.putVocabularies=function(e){var r=this;Object.keys(e).map(function(n){r.putVocabulariesForLanguage(n,e[n])})},t}(),La=new he("I18n"),Kt=null,pt=null,Wu=function(){function t(){}return t.configure=function(e){return La.debug("configure I18n"),e&&(Kt=Object.assign({},Kt,e.I18n||e),t.createInstance()),Kt},t.getModuleName=function(){return"I18n"},t.createInstance=function(){La.debug("create I18n instance"),!pt&&(pt=new Fa(Kt))},t.setLanguage=function(e){return t.checkConfig(),pt.setLanguage(e)},t.get=function(e,r){return t.checkConfig()?pt.get(e,r):typeof r>"u"?e:r},t.putVocabulariesForLanguage=function(e,r){return t.checkConfig(),pt.putVocabulariesForLanguage(e,r)},t.putVocabularies=function(e){return t.checkConfig(),pt.putVocabularies(e)},t.checkConfig=function(){return pt||(pt=new Fa(Kt)),!0},t}();Ut.register(Wu);/*!
 * The MIT License (MIT)
 *
 * Copyright (c) 2016 Christian Speckner <cnspeckn@googlemail.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Vu=function(){function t(){this._queue=[],this._pending=!1}return t.prototype.isLocked=function(){return this._pending},t.prototype.acquire=function(){var e=this,r=new Promise(function(n){return e._queue.push(n)});return this._pending||this._dispatchNext(),r},t.prototype.runExclusive=function(e){return this.acquire().then(function(r){var n;try{n=e()}catch(i){throw r(),i}return Promise.resolve(n).then(function(i){return r(),i},function(i){throw r(),i})})},t.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},t}();const Gu=Vu;var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.Observable=void 0;function sa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ja(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ua(t,e,r){return e&&ja(t.prototype,e),r&&ja(t,r),t}var ca=function(){return typeof Symbol=="function"},la=function(t){return ca()&&!!Symbol[t]},fa=function(t){return la(t)?Symbol[t]:"@@"+t};ca()&&!la("observable")&&(Symbol.observable=Symbol("observable"));var Hu=fa("iterator"),Ci=fa("observable"),gs=fa("species");function pn(t,e){var r=t[e];if(r!=null){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}}function yr(t){var e=t.constructor;return e!==void 0&&(e=e[gs],e===null&&(e=void 0)),e!==void 0?e:_n}function Ju(t){return t instanceof _n}function ur(t){ur.log?ur.log(t):setTimeout(function(){throw t})}function Xr(t){Promise.resolve().then(function(){try{t()}catch(e){ur(e)}})}function bs(t){var e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var r=pn(e,"unsubscribe");r&&r.call(e)}}catch(n){ur(n)}}function xi(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function $u(t){var e=t._queue;if(e){t._queue=void 0,t._state="ready";for(var r=0;r<e.length&&(Ss(t,e[r].type,e[r].value),t._state!=="closed");++r);}}function Ss(t,e,r){t._state="running";var n=t._observer;try{var i=pn(n,e);switch(e){case"next":i&&i.call(n,r);break;case"error":if(xi(t),i)i.call(n,r);else throw r;break;case"complete":xi(t),i&&i.call(n);break}}catch(a){ur(a)}t._state==="closed"?bs(t):t._state==="running"&&(t._state="ready")}function Bn(t,e,r){if(t._state!=="closed"){if(t._state==="buffering"){t._queue.push({type:e,value:r});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:r}],Xr(function(){return $u(t)});return}Ss(t,e,r)}}var Yu=function(){function t(e,r){sa(this,t),this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var n=new Qu(this);try{this._cleanup=r.call(void 0,n)}catch(i){n.error(i)}this._state==="initializing"&&(this._state="ready")}return ua(t,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(xi(this),bs(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),t}(),Qu=function(){function t(e){sa(this,t),this._subscription=e}return ua(t,[{key:"next",value:function(r){Bn(this._subscription,"next",r)}},{key:"error",value:function(r){Bn(this._subscription,"error",r)}},{key:"complete",value:function(){Bn(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),t}(),_n=function(){function t(e){if(sa(this,t),!(this instanceof t))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}return ua(t,[{key:"subscribe",value:function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new Yu(r,this._subscriber)}},{key:"forEach",value:function(r){var n=this;return new Promise(function(i,a){if(typeof r!="function"){a(new TypeError(r+" is not a function"));return}function o(){s.unsubscribe(),i()}var s=n.subscribe({next:function(c){try{r(c,o)}catch(u){a(u),s.unsubscribe()}},error:a,complete:i})})}},{key:"map",value:function(r){var n=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=yr(this);return new i(function(a){return n.subscribe({next:function(o){try{o=r(o)}catch(s){return a.error(s)}a.next(o)},error:function(o){a.error(o)},complete:function(){a.complete()}})})}},{key:"filter",value:function(r){var n=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=yr(this);return new i(function(a){return n.subscribe({next:function(o){try{if(!r(o))return}catch(s){return a.error(s)}a.next(o)},error:function(o){a.error(o)},complete:function(){a.complete()}})})}},{key:"reduce",value:function(r){var n=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=yr(this),a=arguments.length>1,o=!1,s=arguments[1],c=s;return new i(function(u){return n.subscribe({next:function(l){var f=!o;if(o=!0,!f||a)try{c=r(c,l)}catch(h){return u.error(h)}else c=l},error:function(l){u.error(l)},complete:function(){if(!o&&!a)return u.error(new TypeError("Cannot reduce an empty sequence"));u.next(c),u.complete()}})})}},{key:"concat",value:function(){for(var r=this,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=yr(this);return new o(function(s){var c,u=0;function l(f){c=f.subscribe({next:function(h){s.next(h)},error:function(h){s.error(h)},complete:function(){u===i.length?(c=void 0,s.complete()):l(o.from(i[u++]))}})}return l(r),function(){c&&(c.unsubscribe(),c=void 0)}})}},{key:"flatMap",value:function(r){var n=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=yr(this);return new i(function(a){var o=[],s=n.subscribe({next:function(u){if(r)try{u=r(u)}catch(f){return a.error(f)}var l=i.from(u).subscribe({next:function(f){a.next(f)},error:function(f){a.error(f)},complete:function(){var f=o.indexOf(l);f>=0&&o.splice(f,1),c()}});o.push(l)},error:function(u){a.error(u)},complete:function(){c()}});function c(){s.closed&&o.length===0&&a.complete()}return function(){o.forEach(function(u){return u.unsubscribe()}),s.unsubscribe()}})}},{key:Ci,value:function(){return this}}],[{key:"from",value:function(r){var n=typeof this=="function"?this:t;if(r==null)throw new TypeError(r+" is not an object");var i=pn(r,Ci);if(i){var a=i.call(r);if(Object(a)!==a)throw new TypeError(a+" is not an object");return Ju(a)&&a.constructor===n?a:new n(function(o){return a.subscribe(o)})}if(la("iterator")&&(i=pn(r,Hu),i))return new n(function(o){Xr(function(){if(!o.closed){var s=!0,c=!1,u=void 0;try{for(var l=i.call(r)[Symbol.iterator](),f;!(s=(f=l.next()).done);s=!0){var h=f.value;if(o.next(h),o.closed)return}}catch(d){c=!0,u=d}finally{try{!s&&l.return!=null&&l.return()}finally{if(c)throw u}}o.complete()}})});if(Array.isArray(r))return new n(function(o){Xr(function(){if(!o.closed){for(var s=0;s<r.length;++s)if(o.next(r[s]),o.closed)return;o.complete()}})});throw new TypeError(r+" is not observable")}},{key:"of",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=typeof this=="function"?this:t;return new a(function(o){Xr(function(){if(!o.closed){for(var s=0;s<n.length;++s)if(o.next(n[s]),o.closed)return;o.complete()}})})}},{key:gs,get:function(){return this}}]),t}();Nn.Observable=_n;ca()&&Object.defineProperty(_n,Symbol("extensions"),{value:{symbol:Ci,hostReportError:ur},configurable:!0});var Xu=Nn.Observable;const Zu=aa(Xu);var ec=Zu;const xe=ec;var tc=function(){function t(){}return t.prototype.networkMonitor=function(e){if(Pr().isNode)return xe.from([{online:!0}]);var r=hs()?self:window;return new xe(function(n){n.next({online:r.navigator.onLine});var i=function(){return n.next({online:!0})},a=function(){return n.next({online:!1})};return r.addEventListener("online",i),r.addEventListener("offline",a),t._observers.push(n),function(){r.removeEventListener("online",i),r.removeEventListener("offline",a),t._observers=t._observers.filter(function(o){return o!==n})}})},t._observerOverride=function(e){var r,n,i=function(c){if(c.closed)return t._observers=t._observers.filter(function(u){return u!==c}),"continue";c.next(e)};try{for(var a=ms(t._observers),o=a.next();!o.done;o=a.next()){var s=o.value;i(s)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t._observers=[],t}();const Es=tc;var rc=1e3*60*5,He={clockOffset:0,getDateWithClockOffset:function(){return He.clockOffset?new Date(new Date().getTime()+He.clockOffset):new Date},getClockOffset:function(){return He.clockOffset},getHeaderStringFromDate:function(t){return t===void 0&&(t=He.getDateWithClockOffset()),t.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(t){var e=Bu(t.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6];return new Date(Date.UTC(Number(r),Number(n)-1,Number(i),Number(a),Number(o),Number(s)))},isClockSkewed:function(t){return Math.abs(t.getTime()-He.getDateWithClockOffset().getTime())>=rc},isClockSkewError:function(t){if(!t.response||!t.response.headers)return!1;var e=t.response.headers;return!!(["BadRequestException","InvalidSignatureException"].includes(e["x-amzn-errortype"])&&(e.date||e.Date))},setClockOffset:function(t){He.clockOffset=t}},Mt=function(){function t(){this._state=st.Open,this.jobs=new Set}return t.prototype.add=function(e,r){var n,i;typeof e=="string"?(n=void 0,i=e):(n=e,i=r);var a=this.closedFailure(i);if(a)return a;if(n===void 0)return this.addHook(i);if(typeof n=="function")return this.addFunction(n,i);if(n instanceof t)return this.addManager(n,i);throw new Error("If `job` is provided, it must be an Observable, Function, or BackgroundProcessManager.")},t.prototype.addCleaner=function(e,r){var n=this,i=this.addHook(r),a=i.resolve,o=i.onTerminate,s=function(){return Lr(n,void 0,void 0,function(){return jr(this,function(c){switch(c.label){case 0:return[4,e()];case 1:return c.sent(),a(),[2]}})})};return o.then(s),s},t.prototype.addFunction=function(e,r){var n,i=new Promise(function(o){n=o}),a=e(i);return typeof(a==null?void 0:a.then)=="function"&&this.registerPromise(a,n,r),a},t.prototype.addManager=function(e,r){var n=this;this.addCleaner(function(){return Lr(n,void 0,void 0,function(){return jr(this,function(i){switch(i.label){case 0:return[4,e.close()];case 1:return[2,i.sent()]}})})},r)},t.prototype.addHook=function(e){var r,n,i=new Promise(function(s,c){r=s,n=c}),a,o=new Promise(function(s){a=s});return this.registerPromise(i,a,e),{resolve:r,reject:n,onTerminate:o}},t.prototype.registerPromise=function(e,r,n){var i=this,a={promise:e,terminate:r,description:n};this.jobs.add(a),e.then(function(){i.jobs.delete(a)}).catch(function(){i.jobs.delete(a)})},Object.defineProperty(t.prototype,"length",{get:function(){return this.jobs.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return Array.from(this.jobs).map(function(e){return e.description})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this._state===st.Open},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isClosing",{get:function(){return this._state===st.Closing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isClosed",{get:function(){return this._state===st.Closed},enumerable:!0,configurable:!0}),t.prototype.closedFailure=function(e){if(!this.isOpen)return Promise.reject(new nc(["The manager is "+this.state+".",'You tried to add "'+e+'".',`Pending jobs: [
`+this.pending.map(function(r){return"    "+r}).join(`,
`)+`
]`].join(`
`)))},t.prototype.close=function(){return Lr(this,void 0,void 0,function(){var e,r,n,i,a;return jr(this,function(o){switch(o.label){case 0:if(!this.isOpen)return[3,2];this._state=st.Closing;try{for(e=ms(Array.from(this.jobs)),r=e.next();!r.done;r=e.next()){n=r.value;try{n.terminate()}catch(s){console.warn("Failed to send termination signal to job. Error: "+s.message,n)}}}catch(s){i={error:s}}finally{try{r&&!r.done&&(a=e.return)&&a.call(e)}finally{if(i)throw i.error}}return this._closingPromise=Promise.allSettled(Array.from(this.jobs).map(function(s){return s.promise})),[4,this._closingPromise];case 1:o.sent(),this._state=st.Closed,o.label=2;case 2:return[2,this._closingPromise]}})})},t.prototype.open=function(){return Lr(this,void 0,void 0,function(){return jr(this,function(e){switch(e.label){case 0:return this.isClosing?[4,this.close()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._state=st.Open,[2]}})})},t}(),nc=function(t){Uu(e,t);function e(r){return t.call(this,"BackgroundManagerNotOpenError: "+r)||this}return e}(Error),st;(function(t){t.Open="Open",t.Closing="Closing",t.Closed="Closed"})(st||(st={}));var ws=new he("Signer"),qr="AWS4-HMAC-SHA256",ic="iotdevicegateway",gr=function(t,e){var r=new vs.Sha256(t);return r.update(e),r.digestSync()},As=function(t){var e=t||"",r=new vs.Sha256;return r.update(e),ps(r.digestSync())},ac=function(t){return t.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},oc=function(t){return!t||t.length===0?"":t.split("&").map(function(e){var r=e.split("=");if(r.length===1)return e;var n=ac(r[1]);return r[0]+"="+n}).sort(function(e,r){var n=e.split("=")[0],i=r.split("=")[0];return n===i?e<r?-1:1:n<i?-1:1}).join("&")},sc=function(t){return!t||Object.keys(t).length===0?"":Object.keys(t).map(function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}}).sort(function(e,r){return e.key<r.key?-1:1}).map(function(e){return e.key+":"+e.value}).join(`
`)+`
`},Ts=function(t){return Object.keys(t).map(function(e){return e.toLowerCase()}).sort().join(";")},qa=function(t){var e=sr(t.url);return[t.method||"/",encodeURIComponent(e.pathname).replace(/%2F/gi,"/"),oc(e.query),sc(t.headers),Ts(t.headers),As(t.data)].join(`
`)},Ba=function(t){var e=sr(t.url),r=e.host,n=r.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/),i=(n||[]).slice(1,3);return i[1]==="es"&&(i=i.reverse()),{service:t.service||i[0],region:t.region||i[1]}},Ua=function(t,e,r){return[t,e,r,"aws4_request"].join("/")},Ka=function(t,e,r,n){return[t,r,n,As(e)].join(`
`)},za=function(t,e,r){ws.debug(r);var n="AWS4"+t,i=gr(n,e),a=gr(i,r.region),o=gr(a,r.service),s=gr(o,"aws4_request");return s},Wa=function(t,e){return ps(gr(t,e))},uc=function(t,e,r,n,i){return[t+" Credential="+e+"/"+r,"SignedHeaders="+n,"Signature="+i].join(", ")},Is=function(){function t(){}return t.sign=function(e,r,n){if(n===void 0&&(n=null),e.headers=e.headers||{},e.body&&!e.data)throw new Error('The attribute "body" was found on the request object. Please use the attribute "data" instead.');var i=He.getDateWithClockOffset(),a=i.toISOString().replace(/[:\-]|\.\d{3}/g,""),o=a.substr(0,8),s=sr(e.url);e.headers.host=s.host,e.headers["x-amz-date"]=a,r.session_token&&(e.headers["X-Amz-Security-Token"]=r.session_token);var c=qa(e);ws.debug(c);var u=n||Ba(e),l=Ua(o,u.region,u.service),f=Ka(qr,c,a,l),h=za(r.secret_key,o,u),d=Wa(h,f),p=uc(qr,r.access_key,l,Ts(e.headers),d);return e.headers.Authorization=p,e},t.signUrl=function(e,r,n,i){var a=typeof e=="object"?e.url:e,o=typeof e=="object"?e.method:"GET",s=typeof e=="object"?e.body:void 0,c=He.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),u=c.substr(0,8),l=sr(a,!0,!0);l.search;var f=Ku(l,["search"]),h=f.host,d={host:h},p=n||Ba({url:Qr(f)}),y=p.region,g=p.service,v=Ua(u,y,g),m=r.session_token&&g!==ic,S=Be(Be(Be({"X-Amz-Algorithm":qr,"X-Amz-Credential":[r.access_key,v].join("/"),"X-Amz-Date":c.substr(0,16)},m?{"X-Amz-Security-Token":""+r.session_token}:{}),i?{"X-Amz-Expires":""+i}:{}),{"X-Amz-SignedHeaders":Object.keys(d).join(",")}),b=qa({method:o,url:Qr(Be(Be({},f),{query:Be(Be({},f.query),S)})),headers:d,data:s}),E=Ka(qr,b,c,v),A=za(r.secret_key,u,{region:y,service:g}),w=Wa(A,E),T=Be({"X-Amz-Signature":w},r.session_token&&{"X-Amz-Security-Token":r.session_token}),I=Qr({protocol:f.protocol,slashes:!0,hostname:f.hostname,port:f.port,pathname:f.pathname,query:Be(Be(Be({},f.query),S),T)});return I},t}(),cc=typeof Symbol<"u"&&typeof Symbol.for=="function",Os=cc?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",lc="x-amz-user-agent",fc={userAgent:Ni.userAgent};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pi=function(t,e){return Pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Pi(t,e)};function dc(t,e){Pi(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Xe={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:new Ru().getStorage()};function Va(t){var e=0;e=t.length;for(var r=t.length;r>=0;r-=1){var n=t.charCodeAt(r);n>127&&n<=2047?e+=1:n>2047&&n<=65535&&(e+=2),n>=56320&&n<=57343&&(r-=1)}return e}function Qt(){var t=new Date;return t.getTime()}function Br(t){return Number.isInteger?Number.isInteger(t):hc(t)}function hc(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}var ot=new he("StorageCache"),pc=function(){function t(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return t.prototype.getModuleName=function(){return"Cache"},t.prototype.checkConfig=function(){Br(this.config.capacityInBytes)||(ot.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=Xe.capacityInBytes),Br(this.config.itemMaxSize)||(ot.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=Xe.itemMaxSize),Br(this.config.defaultTTL)||(ot.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=Xe.defaultTTL),Br(this.config.defaultPriority)||(ot.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=Xe.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(ot.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=Xe.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(ot.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=Xe.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(ot.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=Xe.warningThreshold);var e=5*1024*1024;this.config.capacityInBytes>e&&(ot.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=Xe.capacityInBytes)},t.prototype.fillCacheItem=function(e,r,n){var i={key:e,data:r,timestamp:Qt(),visitedTime:Qt(),priority:n.priority,expires:n.expires,type:typeof r,byteSize:0};return i.byteSize=Va(JSON.stringify(i)),i.byteSize=Va(JSON.stringify(i)),i},t.prototype.configure=function(e){return e?(e.keyPrefix&&ot.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig(),this.config):this.config},t}(),Pe=new he("Cache"),vc=function(t){dc(e,t);function e(r){var n=this,i=r?Object.assign({},Xe,r):Xe;return n=t.call(this,i)||this,n.config.storage=i.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return e.prototype._decreaseCurSizeInBytes=function(r){var n=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(n-r).toString())},e.prototype._increaseCurSizeInBytes=function(r){var n=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(n+r).toString())},e.prototype._refreshItem=function(r,n){return r.visitedTime=Qt(),this.config.storage.setItem(n,JSON.stringify(r)),r},e.prototype._isExpired=function(r){var n=this.config.storage.getItem(r),i=JSON.parse(n);return Qt()>=i.expires},e.prototype._removeItem=function(r,n){var i=n||JSON.parse(this.config.storage.getItem(r)).byteSize;this._decreaseCurSizeInBytes(i),this.config.storage.removeItem(r)},e.prototype._setItem=function(r,n){this._increaseCurSizeInBytes(n.byteSize);try{this.config.storage.setItem(r,JSON.stringify(n))}catch(i){this._decreaseCurSizeInBytes(n.byteSize),Pe.error("Failed to set item "+i)}},e.prototype._sizeToPop=function(r){var n=this.getCacheCurSize()+r-this.config.capacityInBytes,i=(1-this.config.warningThreshold)*this.config.capacityInBytes;return n>i?n:i},e.prototype._isCacheFull=function(r){return r+this.getCacheCurSize()>this.config.capacityInBytes},e.prototype._findValidKeys=function(){for(var r=[],n=[],i=0;i<this.config.storage.length;i+=1)n.push(this.config.storage.key(i));for(var i=0;i<n.length;i+=1){var a=n[i];a.indexOf(this.config.keyPrefix)===0&&a!==this.cacheCurSizeKey&&(this._isExpired(a)?this._removeItem(a):r.push(a))}return r},e.prototype._popOutItems=function(r,n){for(var i=[],a=n,o=0;o<r.length;o+=1){var s=this.config.storage.getItem(r[o]);if(s!=null){var c=JSON.parse(s);i.push(c)}}i.sort(function(u,l){return u.priority>l.priority?-1:u.priority<l.priority?1:u.visitedTime<l.visitedTime?-1:1});for(var o=0;o<i.length;o+=1)if(this._removeItem(i[o].key,i[o].byteSize),a-=i[o].byteSize,a<=0)return},e.prototype.setItem=function(r,n,i){Pe.log("Set item: key is "+r+", value is "+n+" with options: "+i);var a=this.config.keyPrefix+r;if(a===this.config.keyPrefix||a===this.cacheCurSizeKey){Pe.warn("Invalid key: should not be empty or 'CurSize'");return}if(typeof n>"u"){Pe.warn("The value of item should not be undefined!");return}var o={priority:i&&i.priority!==void 0?i.priority:this.config.defaultPriority,expires:i&&i.expires!==void 0?i.expires:this.config.defaultTTL+Qt()};if(o.priority<1||o.priority>5){Pe.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");return}var s=this.fillCacheItem(a,n,o);if(s.byteSize>this.config.itemMaxSize){Pe.warn("Item with key: "+r+" you are trying to put into is too big!");return}try{var c=this.config.storage.getItem(a);if(c&&this._removeItem(a,JSON.parse(c).byteSize),this._isCacheFull(s.byteSize)){var u=this._findValidKeys();if(this._isCacheFull(s.byteSize)){var l=this._sizeToPop(s.byteSize);this._popOutItems(u,l)}}this._setItem(a,s)}catch(f){Pe.warn("setItem failed! "+f)}},e.prototype.getItem=function(r,n){Pe.log("Get item: key is "+r+" with options "+n);var i=null,a=this.config.keyPrefix+r;if(a===this.config.keyPrefix||a===this.cacheCurSizeKey)return Pe.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(i=this.config.storage.getItem(a),i!=null)if(this._isExpired(a))this._removeItem(a,JSON.parse(i).byteSize),i=null;else{var o=JSON.parse(i);return o=this._refreshItem(o,a),o.data}if(n&&n.callback!==void 0){var s=n.callback();return s!==null&&this.setItem(r,s,n),s}return null}catch(c){return Pe.warn("getItem failed! "+c),null}},e.prototype.removeItem=function(r){Pe.log("Remove item: key is "+r);var n=this.config.keyPrefix+r;if(!(n===this.config.keyPrefix||n===this.cacheCurSizeKey))try{var i=this.config.storage.getItem(n);i&&this._removeItem(n,JSON.parse(i).byteSize)}catch(a){Pe.warn("removeItem failed! "+a)}},e.prototype.clear=function(){Pe.log("Clear Cache");for(var r=[],n=0;n<this.config.storage.length;n+=1){var i=this.config.storage.key(n);i.indexOf(this.config.keyPrefix)===0&&r.push(i)}try{for(var n=0;n<r.length;n+=1)this.config.storage.removeItem(r[n])}catch(a){Pe.warn("clear failed! "+a)}},e.prototype.getAllKeys=function(){for(var r=[],n=0;n<this.config.storage.length;n+=1){var i=this.config.storage.key(n);i.indexOf(this.config.keyPrefix)===0&&i!==this.cacheCurSizeKey&&r.push(i.substring(this.config.keyPrefix.length))}return r},e.prototype.getCacheCurSize=function(){var r=this.config.storage.getItem(this.cacheCurSizeKey);return r||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),r="0"),Number(r)},e.prototype.createInstance=function(r){return(!r.keyPrefix||r.keyPrefix===Xe.keyPrefix)&&(Pe.error("invalid keyPrefix, setting keyPrefix with timeStamp"),r.keyPrefix=Qt.toString()),new e(r)},e}(pc),Ft=new vc;Ut.register(Ft);var da={exports:{}},Ns=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},yc=Ns,At=Object.prototype.toString;function ha(t){return Array.isArray(t)}function ki(t){return typeof t>"u"}function mc(t){return t!==null&&!ki(t)&&t.constructor!==null&&!ki(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function _s(t){return At.call(t)==="[object ArrayBuffer]"}function gc(t){return At.call(t)==="[object FormData]"}function bc(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&_s(t.buffer),e}function Sc(t){return typeof t=="string"}function Ec(t){return typeof t=="number"}function Cs(t){return t!==null&&typeof t=="object"}function Zr(t){if(At.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function wc(t){return At.call(t)==="[object Date]"}function Ac(t){return At.call(t)==="[object File]"}function Tc(t){return At.call(t)==="[object Blob]"}function xs(t){return At.call(t)==="[object Function]"}function Ic(t){return Cs(t)&&xs(t.pipe)}function Oc(t){return At.call(t)==="[object URLSearchParams]"}function Nc(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function _c(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function pa(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),ha(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Di(){var t={};function e(i,a){Zr(t[a])&&Zr(i)?t[a]=Di(t[a],i):Zr(i)?t[a]=Di({},i):ha(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)pa(arguments[r],e);return t}function Cc(t,e,r){return pa(e,function(i,a){r&&typeof i=="function"?t[a]=yc(i,r):t[a]=i}),t}function xc(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Fe={isArray:ha,isArrayBuffer:_s,isBuffer:mc,isFormData:gc,isArrayBufferView:bc,isString:Sc,isNumber:Ec,isObject:Cs,isPlainObject:Zr,isUndefined:ki,isDate:wc,isFile:Ac,isBlob:Tc,isFunction:xs,isStream:Ic,isURLSearchParams:Oc,isStandardBrowserEnv:_c,forEach:pa,merge:Di,extend:Cc,trim:Nc,stripBOM:xc},zt=Fe;function Ga(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ps=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(zt.isURLSearchParams(r))i=r.toString();else{var a=[];zt.forEach(r,function(c,u){c===null||typeof c>"u"||(zt.isArray(c)?u=u+"[]":c=[c],zt.forEach(c,function(f){zt.isDate(f)?f=f.toISOString():zt.isObject(f)&&(f=JSON.stringify(f)),a.push(Ga(u)+"="+Ga(f))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Pc=Fe;function Cn(){this.handlers=[]}Cn.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Cn.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Cn.prototype.forEach=function(e){Pc.forEach(this.handlers,function(n){n!==null&&e(n)})};var kc=Cn,Dc=Fe,Rc=function(e,r){Dc.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},ks=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Un,Ha;function Ds(){if(Ha)return Un;Ha=1;var t=ks;return Un=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},Un}var Kn,Ja;function Mc(){if(Ja)return Kn;Ja=1;var t=Ds();return Kn=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Kn}var zn,$a;function Fc(){if($a)return zn;$a=1;var t=Fe;return zn=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,c){var u=[];u.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&u.push("expires="+new Date(a).toGMTString()),t.isString(o)&&u.push("path="+o),t.isString(s)&&u.push("domain="+s),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),zn}var Wn,Ya;function Lc(){return Ya||(Ya=1,Wn=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Wn}var Vn,Qa;function jc(){return Qa||(Qa=1,Vn=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Vn}var Gn,Xa;function qc(){if(Xa)return Gn;Xa=1;var t=Lc(),e=jc();return Gn=function(n,i){return n&&!t(i)?e(n,i):i},Gn}var Hn,Za;function Bc(){if(Za)return Hn;Za=1;var t=Fe,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Hn=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(u){if(s=u.indexOf(":"),a=t.trim(u.substr(0,s)).toLowerCase(),o=t.trim(u.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},Hn}var Jn,eo;function Uc(){if(eo)return Jn;eo=1;var t=Fe;return Jn=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var c=t.isString(s)?a(s):s;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Jn}var $n,to;function xn(){if(to)return $n;to=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,$n=t,$n}var Yn,ro;function no(){if(ro)return Yn;ro=1;var t=Fe,e=Mc(),r=Fc(),n=Ps,i=qc(),a=Bc(),o=Uc(),s=Ds(),c=Pn(),u=xn();return Yn=function(f){return new Promise(function(d,p){var y=f.data,g=f.headers,v=f.responseType,m;function S(){f.cancelToken&&f.cancelToken.unsubscribe(m),f.signal&&f.signal.removeEventListener("abort",m)}t.isFormData(y)&&delete g["Content-Type"];var b=new XMLHttpRequest;if(f.auth){var E=f.auth.username||"",A=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";g.Authorization="Basic "+btoa(E+":"+A)}var w=i(f.baseURL,f.url);b.open(f.method.toUpperCase(),n(w,f.params,f.paramsSerializer),!0),b.timeout=f.timeout;function T(){if(b){var x="getAllResponseHeaders"in b?a(b.getAllResponseHeaders()):null,C=!v||v==="text"||v==="json"?b.responseText:b.response,_={data:C,status:b.status,statusText:b.statusText,headers:x,config:f,request:b};e(function(D){d(D),S()},function(D){p(D),S()},_),b=null}}if("onloadend"in b?b.onloadend=T:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(T)},b.onabort=function(){b&&(p(s("Request aborted",f,"ECONNABORTED",b)),b=null)},b.onerror=function(){p(s("Network Error",f,null,b)),b=null},b.ontimeout=function(){var C=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",_=f.transitional||c.transitional;f.timeoutErrorMessage&&(C=f.timeoutErrorMessage),p(s(C,f,_.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},t.isStandardBrowserEnv()){var I=(f.withCredentials||o(w))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;I&&(g[f.xsrfHeaderName]=I)}"setRequestHeader"in b&&t.forEach(g,function(C,_){typeof y>"u"&&_.toLowerCase()==="content-type"?delete g[_]:b.setRequestHeader(_,C)}),t.isUndefined(f.withCredentials)||(b.withCredentials=!!f.withCredentials),v&&v!=="json"&&(b.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&b.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(m=function(x){b&&(p(!x||x&&x.type?new u("canceled"):x),b.abort(),b=null)},f.cancelToken&&f.cancelToken.subscribe(m),f.signal&&(f.signal.aborted?m():f.signal.addEventListener("abort",m))),y||(y=null),b.send(y)})},Yn}var Qn,io;function Pn(){if(io)return Qn;io=1;var t=Fe,e=Rc,r=ks,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,u){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=u)}function a(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=no()),c}function o(c,u,l){if(t.isString(c))try{return(u||JSON.parse)(c),t.trim(c)}catch(f){if(f.name!=="SyntaxError")throw f}return(l||JSON.stringify)(c)}var s={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:a(),transformRequest:[function(u,l){return e(l,"Accept"),e(l,"Content-Type"),t.isFormData(u)||t.isArrayBuffer(u)||t.isBuffer(u)||t.isStream(u)||t.isFile(u)||t.isBlob(u)?u:t.isArrayBufferView(u)?u.buffer:t.isURLSearchParams(u)?(i(l,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):t.isObject(u)||l&&l["Content-Type"]==="application/json"?(i(l,"application/json"),o(u)):u}],transformResponse:[function(u){var l=this.transitional||s.transitional,f=l&&l.silentJSONParsing,h=l&&l.forcedJSONParsing,d=!f&&this.responseType==="json";if(d||h&&t.isString(u)&&u.length)try{return JSON.parse(u)}catch(p){if(d)throw p.name==="SyntaxError"?r(p,this,"E_JSON_PARSE"):p}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(u){s.headers[u]={}}),t.forEach(["post","put","patch"],function(u){s.headers[u]=t.merge(n)}),Qn=s,Qn}var Kc=Fe,zc=Pn(),Wc=function(e,r,n){var i=this||zc;return Kc.forEach(n,function(o){e=o.call(i,e,r)}),e},Xn,ao;function Rs(){return ao||(ao=1,Xn=function(e){return!!(e&&e.__CANCEL__)}),Xn}var oo=Fe,Zn=Wc,Vc=Rs(),Gc=Pn(),Hc=xn();function ei(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hc("canceled")}var Jc=function(e){ei(e),e.headers=e.headers||{},e.data=Zn.call(e,e.data,e.headers,e.transformRequest),e.headers=oo.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),oo.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||Gc.adapter;return r(e).then(function(i){return ei(e),i.data=Zn.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Vc(i)||(ei(e),i&&i.response&&(i.response.data=Zn.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},qe=Fe,Ms=function(e,r){r=r||{};var n={};function i(l,f){return qe.isPlainObject(l)&&qe.isPlainObject(f)?qe.merge(l,f):qe.isPlainObject(f)?qe.merge({},f):qe.isArray(f)?f.slice():f}function a(l){if(qe.isUndefined(r[l])){if(!qe.isUndefined(e[l]))return i(void 0,e[l])}else return i(e[l],r[l])}function o(l){if(!qe.isUndefined(r[l]))return i(void 0,r[l])}function s(l){if(qe.isUndefined(r[l])){if(!qe.isUndefined(e[l]))return i(void 0,e[l])}else return i(void 0,r[l])}function c(l){if(l in r)return i(e[l],r[l]);if(l in e)return i(void 0,e[l])}var u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return qe.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var h=u[f]||a,d=h(f);qe.isUndefined(d)&&h!==c||(n[f]=d)}),n},ti,so;function Fs(){return so||(so=1,ti={version:"0.26.0"}),ti}var $c=Fs().version,va={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){va[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var uo={};va.transitional=function(e,r,n){function i(a,o){return"[Axios v"+$c+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!uo[o]&&(uo[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function Yc(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],c=s===void 0||o(s,a,t);if(c!==!0)throw new TypeError("option "+a+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+a)}}var Qc={assertOptions:Yc,validators:va},Ls=Fe,Xc=Ps,co=kc,lo=Jc,kn=Ms,js=Qc,Wt=js.validators;function kr(t){this.defaults=t,this.interceptors={request:new co,response:new co}}kr.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=kn(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&js.assertOptions(n,{silentJSONParsing:Wt.transitional(Wt.boolean),forcedJSONParsing:Wt.transitional(Wt.boolean),clarifyTimeoutError:Wt.transitional(Wt.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(r)===!1||(a=a&&d.synchronous,i.unshift(d.fulfilled,d.rejected))});var o=[];this.interceptors.response.forEach(function(d){o.push(d.fulfilled,d.rejected)});var s;if(!a){var c=[lo,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),s=Promise.resolve(r);c.length;)s=s.then(c.shift(),c.shift());return s}for(var u=r;i.length;){var l=i.shift(),f=i.shift();try{u=l(u)}catch(h){f(h);break}}try{s=lo(u)}catch(h){return Promise.reject(h)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};kr.prototype.getUri=function(e){return e=kn(this.defaults,e),Xc(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Ls.forEach(["delete","get","head","options"],function(e){kr.prototype[e]=function(r,n){return this.request(kn(n||{},{method:e,url:r,data:(n||{}).data}))}});Ls.forEach(["post","put","patch"],function(e){kr.prototype[e]=function(r,n,i){return this.request(kn(i||{},{method:e,url:r,data:n}))}});var Zc=kr,ri,fo;function el(){if(fo)return ri;fo=1;var t=xn();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(c){i.subscribe(c),o=c}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},ri=e,ri}var ni,ho;function tl(){return ho||(ho=1,ni=function(e){return function(n){return e.apply(null,n)}}),ni}var ii,po;function rl(){if(po)return ii;po=1;var t=Fe;return ii=function(r){return t.isObject(r)&&r.isAxiosError===!0},ii}var vo=Fe,nl=Ns,en=Zc,il=Ms,al=Pn();function qs(t){var e=new en(t),r=nl(en.prototype.request,e);return vo.extend(r,en.prototype,e),vo.extend(r,e),r.create=function(i){return qs(il(t,i))},r}var at=qs(al);at.Axios=en;at.Cancel=xn();at.CancelToken=el();at.isCancel=Rs();at.VERSION=Fs().version;at.all=function(e){return Promise.all(e)};at.spread=tl();at.isAxiosError=rl();da.exports=at;da.exports.default=at;var ol=da.exports,sl=ol;const Ur=aa(sl);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vn=function(){return vn=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},vn.apply(this,arguments)};function ul(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(l){try{u(n.next(l))}catch(f){o(f)}}function c(l){try{u(n.throw(l))}catch(f){o(f)}}function u(l){l.done?a(l.value):i(l.value).then(s,c)}u((n=n.apply(t,e||[])).next())})}function cl(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ge=function(){return Ge=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ge.apply(this,arguments)};function Ri(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Bs(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(l){try{u(n.next(l))}catch(f){o(f)}}function c(l){try{u(n.throw(l))}catch(f){o(f)}}function u(l){l.done?a(l.value):i(l.value).then(s,c)}u((n=n.apply(t,e||[])).next())})}function Us(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Vt=new he("RestClient"),Ks=function(){function t(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=kt,this._options=e,Vt.debug("API Options",this._options),this._cancelTokenMap==null&&(this._cancelTokenMap=new WeakMap)}return t.prototype.ajax=function(e,r,n){return Bs(this,void 0,void 0,function(){var i,a,o,s,c,u,l,f,h,d,p,y,g,v,m=this;return Us(this,function(S){switch(S.label){case 0:return Vt.debug(r,e),o="us-east-1",s="execute-api",c=void 0,typeof e=="string"?(i=this._parseUrl(e),a=e):(a=e.endpoint,c=e.custom_header,o=e.region,s=e.service,i=this._parseUrl(e.endpoint)),u={method:r,url:a,host:i.host,path:i.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},l={},Ni.isReactNative&&(f=Ni.userAgent||"aws-amplify/0.1.x",l={"User-Agent":f}),h=Object.assign({},n),d=h.response,h.body&&(typeof FormData=="function"&&h.body instanceof FormData?(l["Content-Type"]="multipart/form-data",u.data=h.body):(l["Content-Type"]="application/json; charset=UTF-8",u.data=JSON.stringify(h.body))),h.responseType&&(u.responseType=h.responseType),h.withCredentials&&(u.withCredentials=h.withCredentials),h.timeout&&(u.timeout=h.timeout),h.cancellableToken&&(u.cancelToken=h.cancellableToken.token),u.signerServiceInfo=h.signerServiceInfo,typeof c!="function"?[3,2]:[4,c()];case 1:return y=S.sent(),[3,3];case 2:y=void 0,S.label=3;case 3:return p=y,u.headers=Ge(Ge(Ge({},l),p),h.headers),g=sr(a,!0,!0),g.search,v=Ri(g,["search"]),u.url=Qr(Ge(Ge({},v),{query:Ge(Ge({},v.query),h.queryStringParameters||{})})),typeof u.headers.Authorization<"u"?(u.headers=Object.keys(u.headers).reduce(function(b,E){return u.headers[E]&&(b[E]=u.headers[E]),b},{}),[2,this._request(u,d)]):[2,this.Credentials.get().then(function(b){return m._signed(Ge({},u),b,d,{region:o,service:s}).catch(function(E){if(He.isClockSkewError(E)){var A=E.response.headers,w=A&&(A.date||A.Date),T=new Date(w),I=He.getDateFromHeaderString(u.headers["x-amz-date"]);if(He.isClockSkewed(T))return He.setClockOffset(T.getTime()-I.getTime()),m.ajax(e,r,n)}throw E})},function(b){return Vt.debug("No credentials available, the request will be unsigned"),m._request(u,d)})]}})})},t.prototype.get=function(e,r){return this.ajax(e,"GET",r)},t.prototype.put=function(e,r){return this.ajax(e,"PUT",r)},t.prototype.patch=function(e,r){return this.ajax(e,"PATCH",r)},t.prototype.post=function(e,r){return this.ajax(e,"POST",r)},t.prototype.del=function(e,r){return this.ajax(e,"DELETE",r)},t.prototype.head=function(e,r){return this.ajax(e,"HEAD",r)},t.prototype.cancel=function(e,r){var n=this._cancelTokenMap.get(e);return n?(n.cancel(r),!0):!1},t.prototype.hasCancelToken=function(e){return this._cancelTokenMap.has(e)},t.prototype.isCancel=function(e){return Ur.isCancel(e)},t.prototype.getCancellableToken=function(){return Ur.CancelToken.source()},t.prototype.updateRequestToBeCancellable=function(e,r){this._cancelTokenMap.set(e,r)},t.prototype.endpoint=function(e){var r=this,n=this._options.endpoints,i="";return Array.isArray(n)&&n.forEach(function(a){a.name===e&&(i=a.endpoint,typeof a.region=="string"?r._region=a.region:typeof r._options.region=="string"&&(r._region=r._options.region),typeof a.service=="string"?r._service=a.service||"execute-api":r._service="execute-api",typeof a.custom_header=="function"?r._custom_header=a.custom_header:r._custom_header=void 0)}),i},t.prototype._signed=function(e,r,n,i){var a=i.service,o=i.region,s=e.signerServiceInfo,c=Ri(e,["signerServiceInfo"]),u=o||this._region||this._options.region,l=a||this._service||this._options.service,f={secret_key:r.secretAccessKey,access_key:r.accessKeyId,session_token:r.sessionToken},h={region:u,service:l},d=Object.assign(h,s),p=Is.sign(c,f,d);return p.data&&(p.body=p.data),Vt.debug("Signed Request: ",p),delete p.headers.host,Ur(p).then(function(y){return n?y:y.data}).catch(function(y){throw Vt.debug(y),y})},t.prototype._request=function(e,r){return r===void 0&&(r=!1),Ur(e).then(function(n){return r?n:n.data}).catch(function(n){throw Vt.debug(n),n})},t.prototype._parseUrl=function(e){var r=e.split("/");return{host:r[2],path:"/"+r.slice(3).join("/")}},t}(),Kr=new he("RestAPI"),zs=function(){function t(e){this._api=null,this.Credentials=kt,this._options=e,Kr.debug("API Options",this._options)}return t.prototype.getModuleName=function(){return"RestAPI"},t.prototype.configure=function(e){var r=e||{},n=r.API,i=n===void 0?{}:n,a=Ri(r,["API"]),o=Ge(Ge({},a),i);if(Kr.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var s=o.aws_cloud_logic_custom;o.endpoints=typeof s=="string"?JSON.parse(s):s}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)?o.endpoints.forEach(function(c){typeof c.custom_header<"u"&&typeof c.custom_header!="function"&&(Kr.warn("Rest API "+c.name+", custom_header should be a function"),c.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?o.endpoints=this._options.endpoints:o.endpoints=[],this._options=Object.assign({},this._options,o),this.createInstance(),this._options},t.prototype.createInstance=function(){return Kr.debug("create Rest API instance"),this._api=new Ks(this._options),this._api.Credentials=this.Credentials,!0},t.prototype.get=function(e,r,n){try{var i=this.getEndpointInfo(e,r),a=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=a;var s=this._api.get(i,o);return this._api.updateRequestToBeCancellable(s,a),s}catch(c){return Promise.reject(c.message)}},t.prototype.post=function(e,r,n){try{var i=this.getEndpointInfo(e,r),a=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=a;var s=this._api.post(i,o);return this._api.updateRequestToBeCancellable(s,a),s}catch(c){return Promise.reject(c.message)}},t.prototype.put=function(e,r,n){try{var i=this.getEndpointInfo(e,r),a=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=a;var s=this._api.put(i,o);return this._api.updateRequestToBeCancellable(s,a),s}catch(c){return Promise.reject(c.message)}},t.prototype.patch=function(e,r,n){try{var i=this.getEndpointInfo(e,r),a=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=a;var s=this._api.patch(i,o);return this._api.updateRequestToBeCancellable(s,a),s}catch(c){return Promise.reject(c.message)}},t.prototype.del=function(e,r,n){try{var i=this.getEndpointInfo(e,r),a=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=a;var s=this._api.del(i,o);return this._api.updateRequestToBeCancellable(s,a),s}catch(c){return Promise.reject(c.message)}},t.prototype.head=function(e,r,n){try{var i=this.getEndpointInfo(e,r),a=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=a;var s=this._api.head(i,o);return this._api.updateRequestToBeCancellable(s,a),s}catch(c){return Promise.reject(c.message)}},t.prototype.isCancel=function(e){return this._api.isCancel(e)},t.prototype.cancel=function(e,r){return this._api.cancel(e,r)},t.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},t.prototype.endpoint=function(e){return Bs(this,void 0,void 0,function(){return Us(this,function(r){return[2,this._api.endpoint(e)]})})},t.prototype.getEndpointInfo=function(e,r){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");var i=n.find(function(o){return o.name===e});if(!i)throw new Error("API "+e+" does not exist");var a={endpoint:i.endpoint+r};return typeof i.region=="string"?a.region=i.region:typeof this._options.region=="string"&&(a.region=this._options.region),typeof i.service=="string"?a.service=i.service||"execute-api":a.service="execute-api",typeof i.custom_header=="function"?a.custom_header=i.custom_header:a.custom_header=void 0,a},t}(),ll=new zs(null);Ut.register(ll);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ut=function(){return ut=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ut.apply(this,arguments)};function fl(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function ai(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(l){try{u(n.next(l))}catch(f){o(f)}}function c(l){try{u(n.throw(l))}catch(f){o(f)}}function u(l){l.done?a(l.value):i(l.value).then(s,c)}u((n=n.apply(t,e||[])).next())})}function oi(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function yo(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function tn(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tn=function(r){return typeof r}:tn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},tn(t)}function dl(t){return tn(t)=="object"&&t!==null}var Ws=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag";function Mi(t,e){for(var r=/\r\n|[\n\r]/g,n=1,i=e+1,a;(a=r.exec(t.body))&&a.index<e;)n+=1,i=e+1-(a.index+a[0].length);return{line:n,column:i}}function hl(t){return Vs(t.source,Mi(t.source,t.start))}function Vs(t,e){var r=t.locationOffset.column-1,n=rn(r)+t.body,i=e.line-1,a=t.locationOffset.line-1,o=e.line+a,s=e.line===1?r:0,c=e.column+s,u="".concat(t.name,":").concat(o,":").concat(c,`
`),l=n.split(/\r\n|[\n\r]/g),f=l[i];if(f.length>120){for(var h=Math.floor(c/80),d=c%80,p=[],y=0;y<f.length;y+=80)p.push(f.slice(y,y+80));return u+mo([["".concat(o),p[0]]].concat(p.slice(1,h+1).map(function(g){return["",g]}),[[" ",rn(d-1)+"^"],["",p[h+1]]]))}return u+mo([["".concat(o-1),l[i-1]],["".concat(o),f],["",rn(c-1)+"^"],["".concat(o+1),l[i+1]]])}function mo(t){var e=t.filter(function(n){n[0];var i=n[1];return i!==void 0}),r=Math.max.apply(Math,e.map(function(n){var i=n[0];return i.length}));return e.map(function(n){var i=n[0],a=n[1];return pl(r,i)+(a?" | "+a:" |")}).join(`
`)}function rn(t){return Array(t+1).join(" ")}function pl(t,e){return rn(t-e.length)+e}function nn(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nn=function(r){return typeof r}:nn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nn(t)}function go(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?go(Object(r),!0).forEach(function(n){yl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):go(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ml(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gl(t,e,r){return e&&bo(t.prototype,e),r&&bo(t,r),t}function bl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ir(t,e)}function Sl(t){var e=Hs();return function(){var n=Or(t),i;if(e){var a=Or(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Gs(this,i)}}function Gs(t,e){return e&&(nn(e)==="object"||typeof e=="function")?e:br(t)}function br(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fi(t){var e=typeof Map=="function"?new Map:void 0;return Fi=function(n){if(n===null||!El(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return an(n,arguments,Or(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ir(i,n)},Fi(t)}function an(t,e,r){return Hs()?an=Reflect.construct:an=function(i,a,o){var s=[null];s.push.apply(s,a);var c=Function.bind.apply(i,s),u=new c;return o&&Ir(u,o.prototype),u},an.apply(null,arguments)}function Hs(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function El(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Ir(t,e){return Ir=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ir(t,e)}function Or(t){return Or=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Or(t)}var tr=function(t){bl(r,t);var e=Sl(r);function r(n,i,a,o,s,c,u){var l,f,h,d;ml(this,r),d=e.call(this,n),d.name="GraphQLError",d.originalError=c??void 0,d.nodes=So(Array.isArray(i)?i:i?[i]:void 0);for(var p=[],y=0,g=(v=d.nodes)!==null&&v!==void 0?v:[];y<g.length;y++){var v,m=g[y],S=m.loc;S!=null&&p.push(S)}p=So(p),d.source=a??((l=p)===null||l===void 0?void 0:l[0].source),d.positions=o??((f=p)===null||f===void 0?void 0:f.map(function(E){return E.start})),d.locations=o&&a?o.map(function(E){return Mi(a,E)}):(h=p)===null||h===void 0?void 0:h.map(function(E){return Mi(E.source,E.start)}),d.path=s??void 0;var b=c==null?void 0:c.extensions;return u==null&&dl(b)?d.extensions=vl({},b):d.extensions=u??{},Object.defineProperties(br(d),{message:{enumerable:!0},locations:{enumerable:d.locations!=null},path:{enumerable:d.path!=null},extensions:{enumerable:d.extensions!=null&&Object.keys(d.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?(Object.defineProperty(br(d),"stack",{value:c.stack,writable:!0,configurable:!0}),Gs(d)):(Error.captureStackTrace?Error.captureStackTrace(br(d),r):Object.defineProperty(br(d),"stack",{value:Error().stack,writable:!0,configurable:!0}),d)}return gl(r,[{key:"toString",value:function(){return wl(this)}},{key:Ws,get:function(){return"Object"}}]),r}(Fi(Error));function So(t){return t===void 0||t.length===0?void 0:t}function wl(t){var e=t.message;if(t.nodes)for(var r=0,n=t.nodes;r<n.length;r++){var i=n[r];i.loc&&(e+=`

`+hl(i.loc))}else if(t.source&&t.locations)for(var a=0,o=t.locations;a<o.length;a++){var s=o[a];e+=`

`+Vs(t.source,s)}return e}function Ke(t,e,r){return new tr("Syntax Error: ".concat(r),void 0,t,[e])}var B=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});function Al(t,e){var r=!!t;if(!r)throw new Error(e??"Unexpected invariant triggered.")}var Tl=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;const Li=Tl;function Js(t){var e=t.prototype.toJSON;typeof e=="function"||Al(0),t.prototype.inspect=e,Li&&(t.prototype[Li]=e)}var $s=function(){function t(r,n,i){this.start=r.start,this.end=n.end,this.startToken=r,this.endToken=n,this.source=i}var e=t.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},t}();Js($s);var de=function(){function t(r,n,i,a,o,s,c){this.kind=r,this.start=n,this.end=i,this.line=a,this.column=o,this.value=c,this.prev=s,this.next=null}var e=t.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();Js(de);function Eo(t){return t!=null&&typeof t.kind=="string"}var k=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function on(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?on=function(r){return typeof r}:on=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},on(t)}var Il=10,Ys=2;function Qs(t){return Dn(t,[])}function Dn(t,e){switch(on(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return t===null?"null":Ol(t,e);default:return String(t)}}function Ol(t,e){if(e.indexOf(t)!==-1)return"[Circular]";var r=[].concat(e,[t]),n=Cl(t);if(n!==void 0){var i=n.call(t);if(i!==t)return typeof i=="string"?i:Dn(i,r)}else if(Array.isArray(t))return _l(t,r);return Nl(t,r)}function Nl(t,e){var r=Object.keys(t);if(r.length===0)return"{}";if(e.length>Ys)return"["+xl(t)+"]";var n=r.map(function(i){var a=Dn(t[i],e);return i+": "+a});return"{ "+n.join(", ")+" }"}function _l(t,e){if(t.length===0)return"[]";if(e.length>Ys)return"[Array]";for(var r=Math.min(Il,t.length),n=t.length-r,i=[],a=0;a<r;++a)i.push(Dn(t[a],e));return n===1?i.push("... 1 more item"):n>1&&i.push("... ".concat(n," more items")),"["+i.join(", ")+"]"}function Cl(t){var e=t[String(Li)];if(typeof e=="function")return e;if(typeof t.inspect=="function")return t.inspect}function xl(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){var r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function si(t,e){var r=!!t;if(!r)throw new Error(e)}const Pl=function(e,r){return e instanceof r};function wo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kl(t,e,r){return e&&wo(t.prototype,e),r&&wo(t,r),t}var Xs=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof e=="string"||si(0,"Body must be a string. Received: ".concat(Qs(e),".")),this.body=e,this.name=r,this.locationOffset=n,this.locationOffset.line>0||si(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||si(0,"column in locationOffset is 1-indexed and must be positive.")}return kl(t,[{key:Ws,get:function(){return"Source"}}]),t}();function Dl(t){return Pl(t,Xs)}var Rl=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Ml(t){var e=t.split(/\r\n|[\n\r]/g),r=Fl(t);if(r!==0)for(var n=1;n<e.length;n++)e[n]=e[n].slice(r);for(var i=0;i<e.length&&Ao(e[i]);)++i;for(var a=e.length;a>i&&Ao(e[a-1]);)--a;return e.slice(i,a).join(`
`)}function Ao(t){for(var e=0;e<t.length;++e)if(t[e]!==" "&&t[e]!=="	")return!1;return!0}function Fl(t){for(var e,r=!0,n=!0,i=0,a=null,o=0;o<t.length;++o)switch(t.charCodeAt(o)){case 13:t.charCodeAt(o+1)===10&&++o;case 10:r=!1,n=!0,i=0;break;case 9:case 32:++i;break;default:n&&!r&&(a===null||i<a)&&(a=i),n=!1}return(e=a)!==null&&e!==void 0?e:0}function Ll(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=t.indexOf(`
`)===-1,i=t[0]===" "||t[0]==="	",a=t[t.length-1]==='"',o=t[t.length-1]==="\\",s=!n||a||o||r,c="";return s&&!(n&&i)&&(c+=`
`+e),c+=e?t.replace(/\n/g,`
`+e):t,s&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var jl=function(){function t(r){var n=new de(k.SOF,0,0,0,0,null);this.source=r,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}var e=t.prototype;return e.advance=function(){this.lastToken=this.token;var n=this.token=this.lookahead();return n},e.lookahead=function(){var n=this.token;if(n.kind!==k.EOF)do{var i;n=(i=n.next)!==null&&i!==void 0?i:n.next=Bl(this,n)}while(n.kind===k.COMMENT);return n},t}();function ql(t){return t===k.BANG||t===k.DOLLAR||t===k.AMP||t===k.PAREN_L||t===k.PAREN_R||t===k.SPREAD||t===k.COLON||t===k.EQUALS||t===k.AT||t===k.BRACKET_L||t===k.BRACKET_R||t===k.BRACE_L||t===k.PIPE||t===k.BRACE_R}function Lt(t){return isNaN(t)?k.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function Bl(t,e){for(var r=t.source,n=r.body,i=n.length,a=e.end;a<i;){var o=n.charCodeAt(a),s=t.line,c=1+a-t.lineStart;switch(o){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++t.line,t.lineStart=a;continue;case 13:n.charCodeAt(a+1)===10?a+=2:++a,++t.line,t.lineStart=a;continue;case 33:return new de(k.BANG,a,a+1,s,c,e);case 35:return Kl(r,a,s,c,e);case 36:return new de(k.DOLLAR,a,a+1,s,c,e);case 38:return new de(k.AMP,a,a+1,s,c,e);case 40:return new de(k.PAREN_L,a,a+1,s,c,e);case 41:return new de(k.PAREN_R,a,a+1,s,c,e);case 46:if(n.charCodeAt(a+1)===46&&n.charCodeAt(a+2)===46)return new de(k.SPREAD,a,a+3,s,c,e);break;case 58:return new de(k.COLON,a,a+1,s,c,e);case 61:return new de(k.EQUALS,a,a+1,s,c,e);case 64:return new de(k.AT,a,a+1,s,c,e);case 91:return new de(k.BRACKET_L,a,a+1,s,c,e);case 93:return new de(k.BRACKET_R,a,a+1,s,c,e);case 123:return new de(k.BRACE_L,a,a+1,s,c,e);case 124:return new de(k.PIPE,a,a+1,s,c,e);case 125:return new de(k.BRACE_R,a,a+1,s,c,e);case 34:return n.charCodeAt(a+1)===34&&n.charCodeAt(a+2)===34?Vl(r,a,s,c,e,t):Wl(r,a,s,c,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return zl(r,a,o,s,c,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return Hl(r,a,s,c,e)}throw Ke(r,a,Ul(o))}var u=t.line,l=1+a-t.lineStart;return new de(k.EOF,i,i,u,l,e)}function Ul(t){return t<32&&t!==9&&t!==10&&t!==13?"Cannot contain the invalid character ".concat(Lt(t),"."):t===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(Lt(t),".")}function Kl(t,e,r,n,i){var a=t.body,o,s=e;do o=a.charCodeAt(++s);while(!isNaN(o)&&(o>31||o===9));return new de(k.COMMENT,e,s,r,n,i,a.slice(e+1,s))}function zl(t,e,r,n,i,a){var o=t.body,s=r,c=e,u=!1;if(s===45&&(s=o.charCodeAt(++c)),s===48){if(s=o.charCodeAt(++c),s>=48&&s<=57)throw Ke(t,c,"Invalid number, unexpected digit after 0: ".concat(Lt(s),"."))}else c=ui(t,c,s),s=o.charCodeAt(c);if(s===46&&(u=!0,s=o.charCodeAt(++c),c=ui(t,c,s),s=o.charCodeAt(c)),(s===69||s===101)&&(u=!0,s=o.charCodeAt(++c),(s===43||s===45)&&(s=o.charCodeAt(++c)),c=ui(t,c,s),s=o.charCodeAt(c)),s===46||Jl(s))throw Ke(t,c,"Invalid number, expected digit but got: ".concat(Lt(s),"."));return new de(u?k.FLOAT:k.INT,e,c,n,i,a,o.slice(e,c))}function ui(t,e,r){var n=t.body,i=e,a=r;if(a>=48&&a<=57){do a=n.charCodeAt(++i);while(a>=48&&a<=57);return i}throw Ke(t,i,"Invalid number, expected digit but got: ".concat(Lt(a),"."))}function Wl(t,e,r,n,i){for(var a=t.body,o=e+1,s=o,c=0,u="";o<a.length&&!isNaN(c=a.charCodeAt(o))&&c!==10&&c!==13;){if(c===34)return u+=a.slice(s,o),new de(k.STRING,e,o+1,r,n,i,u);if(c<32&&c!==9)throw Ke(t,o,"Invalid character within String: ".concat(Lt(c),"."));if(++o,c===92){switch(u+=a.slice(s,o-1),c=a.charCodeAt(o),c){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+=`
`;break;case 114:u+="\r";break;case 116:u+="	";break;case 117:{var l=Gl(a.charCodeAt(o+1),a.charCodeAt(o+2),a.charCodeAt(o+3),a.charCodeAt(o+4));if(l<0){var f=a.slice(o+1,o+5);throw Ke(t,o,"Invalid character escape sequence: \\u".concat(f,"."))}u+=String.fromCharCode(l),o+=4;break}default:throw Ke(t,o,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}++o,s=o}}throw Ke(t,o,"Unterminated string.")}function Vl(t,e,r,n,i,a){for(var o=t.body,s=e+3,c=s,u=0,l="";s<o.length&&!isNaN(u=o.charCodeAt(s));){if(u===34&&o.charCodeAt(s+1)===34&&o.charCodeAt(s+2)===34)return l+=o.slice(c,s),new de(k.BLOCK_STRING,e,s+3,r,n,i,Ml(l));if(u<32&&u!==9&&u!==10&&u!==13)throw Ke(t,s,"Invalid character within String: ".concat(Lt(u),"."));u===10?(++s,++a.line,a.lineStart=s):u===13?(o.charCodeAt(s+1)===10?s+=2:++s,++a.line,a.lineStart=s):u===92&&o.charCodeAt(s+1)===34&&o.charCodeAt(s+2)===34&&o.charCodeAt(s+3)===34?(l+=o.slice(c,s)+'"""',s+=4,c=s):++s}throw Ke(t,s,"Unterminated string.")}function Gl(t,e,r,n){return zr(t)<<12|zr(e)<<8|zr(r)<<4|zr(n)}function zr(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function Hl(t,e,r,n,i){for(var a=t.body,o=a.length,s=e+1,c=0;s!==o&&!isNaN(c=a.charCodeAt(s))&&(c===95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++s;return new de(k.NAME,e,s,r,n,i,a.slice(e,s))}function Jl(t){return t===95||t>=65&&t<=90||t>=97&&t<=122}function ci(t,e){var r=new $l(t,e);return r.parseDocument()}var $l=function(){function t(r,n){var i=Dl(r)?r:new Xs(r);this._lexer=new jl(i),this._options=n}var e=t.prototype;return e.parseName=function(){var n=this.expectToken(k.NAME);return{kind:B.NAME,value:n.value,loc:this.loc(n)}},e.parseDocument=function(){var n=this._lexer.token;return{kind:B.DOCUMENT,definitions:this.many(k.SOF,this.parseDefinition,k.EOF),loc:this.loc(n)}},e.parseDefinition=function(){if(this.peek(k.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(k.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var n=this._lexer.token;if(this.peek(k.BRACE_L))return{kind:B.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(n)};var i=this.parseOperationType(),a;return this.peek(k.NAME)&&(a=this.parseName()),{kind:B.OPERATION_DEFINITION,operation:i,name:a,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseOperationType=function(){var n=this.expectToken(k.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(n)},e.parseVariableDefinitions=function(){return this.optionalMany(k.PAREN_L,this.parseVariableDefinition,k.PAREN_R)},e.parseVariableDefinition=function(){var n=this._lexer.token;return{kind:B.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(k.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(k.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(n)}},e.parseVariable=function(){var n=this._lexer.token;return this.expectToken(k.DOLLAR),{kind:B.VARIABLE,name:this.parseName(),loc:this.loc(n)}},e.parseSelectionSet=function(){var n=this._lexer.token;return{kind:B.SELECTION_SET,selections:this.many(k.BRACE_L,this.parseSelection,k.BRACE_R),loc:this.loc(n)}},e.parseSelection=function(){return this.peek(k.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var n=this._lexer.token,i=this.parseName(),a,o;return this.expectOptionalToken(k.COLON)?(a=i,o=this.parseName()):o=i,{kind:B.FIELD,alias:a,name:o,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(k.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},e.parseArguments=function(n){var i=n?this.parseConstArgument:this.parseArgument;return this.optionalMany(k.PAREN_L,i,k.PAREN_R)},e.parseArgument=function(){var n=this._lexer.token,i=this.parseName();return this.expectToken(k.COLON),{kind:B.ARGUMENT,name:i,value:this.parseValueLiteral(!1),loc:this.loc(n)}},e.parseConstArgument=function(){var n=this._lexer.token;return{kind:B.ARGUMENT,name:this.parseName(),value:(this.expectToken(k.COLON),this.parseValueLiteral(!0)),loc:this.loc(n)}},e.parseFragment=function(){var n=this._lexer.token;this.expectToken(k.SPREAD);var i=this.expectOptionalKeyword("on");return!i&&this.peek(k.NAME)?{kind:B.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(n)}:{kind:B.INLINE_FRAGMENT,typeCondition:i?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseFragmentDefinition=function(){var n,i=this._lexer.token;return this.expectKeyword("fragment"),((n=this._options)===null||n===void 0?void 0:n.experimentalFragmentVariables)===!0?{kind:B.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}:{kind:B.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},e.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(n){var i=this._lexer.token;switch(i.kind){case k.BRACKET_L:return this.parseList(n);case k.BRACE_L:return this.parseObject(n);case k.INT:return this._lexer.advance(),{kind:B.INT,value:i.value,loc:this.loc(i)};case k.FLOAT:return this._lexer.advance(),{kind:B.FLOAT,value:i.value,loc:this.loc(i)};case k.STRING:case k.BLOCK_STRING:return this.parseStringLiteral();case k.NAME:switch(this._lexer.advance(),i.value){case"true":return{kind:B.BOOLEAN,value:!0,loc:this.loc(i)};case"false":return{kind:B.BOOLEAN,value:!1,loc:this.loc(i)};case"null":return{kind:B.NULL,loc:this.loc(i)};default:return{kind:B.ENUM,value:i.value,loc:this.loc(i)}}case k.DOLLAR:if(!n)return this.parseVariable();break}throw this.unexpected()},e.parseStringLiteral=function(){var n=this._lexer.token;return this._lexer.advance(),{kind:B.STRING,value:n.value,block:n.kind===k.BLOCK_STRING,loc:this.loc(n)}},e.parseList=function(n){var i=this,a=this._lexer.token,o=function(){return i.parseValueLiteral(n)};return{kind:B.LIST,values:this.any(k.BRACKET_L,o,k.BRACKET_R),loc:this.loc(a)}},e.parseObject=function(n){var i=this,a=this._lexer.token,o=function(){return i.parseObjectField(n)};return{kind:B.OBJECT,fields:this.any(k.BRACE_L,o,k.BRACE_R),loc:this.loc(a)}},e.parseObjectField=function(n){var i=this._lexer.token,a=this.parseName();return this.expectToken(k.COLON),{kind:B.OBJECT_FIELD,name:a,value:this.parseValueLiteral(n),loc:this.loc(i)}},e.parseDirectives=function(n){for(var i=[];this.peek(k.AT);)i.push(this.parseDirective(n));return i},e.parseDirective=function(n){var i=this._lexer.token;return this.expectToken(k.AT),{kind:B.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n),loc:this.loc(i)}},e.parseTypeReference=function(){var n=this._lexer.token,i;return this.expectOptionalToken(k.BRACKET_L)?(i=this.parseTypeReference(),this.expectToken(k.BRACKET_R),i={kind:B.LIST_TYPE,type:i,loc:this.loc(n)}):i=this.parseNamedType(),this.expectOptionalToken(k.BANG)?{kind:B.NON_NULL_TYPE,type:i,loc:this.loc(n)}:i},e.parseNamedType=function(){var n=this._lexer.token;return{kind:B.NAMED_TYPE,name:this.parseName(),loc:this.loc(n)}},e.parseTypeSystemDefinition=function(){var n=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(n.kind===k.NAME)switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(n)},e.peekDescription=function(){return this.peek(k.STRING)||this.peek(k.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("schema");var a=this.parseDirectives(!0),o=this.many(k.BRACE_L,this.parseOperationTypeDefinition,k.BRACE_R);return{kind:B.SCHEMA_DEFINITION,description:i,directives:a,operationTypes:o,loc:this.loc(n)}},e.parseOperationTypeDefinition=function(){var n=this._lexer.token,i=this.parseOperationType();this.expectToken(k.COLON);var a=this.parseNamedType();return{kind:B.OPERATION_TYPE_DEFINITION,operation:i,type:a,loc:this.loc(n)}},e.parseScalarTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("scalar");var a=this.parseName(),o=this.parseDirectives(!0);return{kind:B.SCALAR_TYPE_DEFINITION,description:i,name:a,directives:o,loc:this.loc(n)}},e.parseObjectTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("type");var a=this.parseName(),o=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:B.OBJECT_TYPE_DEFINITION,description:i,name:a,interfaces:o,directives:s,fields:c,loc:this.loc(n)}},e.parseImplementsInterfaces=function(){var n;if(!this.expectOptionalKeyword("implements"))return[];if(((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLImplementsInterfaces)===!0){var i=[];this.expectOptionalToken(k.AMP);do i.push(this.parseNamedType());while(this.expectOptionalToken(k.AMP)||this.peek(k.NAME));return i}return this.delimitedMany(k.AMP,this.parseNamedType)},e.parseFieldsDefinition=function(){var n;return((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLEmptyFields)===!0&&this.peek(k.BRACE_L)&&this._lexer.lookahead().kind===k.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(k.BRACE_L,this.parseFieldDefinition,k.BRACE_R)},e.parseFieldDefinition=function(){var n=this._lexer.token,i=this.parseDescription(),a=this.parseName(),o=this.parseArgumentDefs();this.expectToken(k.COLON);var s=this.parseTypeReference(),c=this.parseDirectives(!0);return{kind:B.FIELD_DEFINITION,description:i,name:a,arguments:o,type:s,directives:c,loc:this.loc(n)}},e.parseArgumentDefs=function(){return this.optionalMany(k.PAREN_L,this.parseInputValueDef,k.PAREN_R)},e.parseInputValueDef=function(){var n=this._lexer.token,i=this.parseDescription(),a=this.parseName();this.expectToken(k.COLON);var o=this.parseTypeReference(),s;this.expectOptionalToken(k.EQUALS)&&(s=this.parseValueLiteral(!0));var c=this.parseDirectives(!0);return{kind:B.INPUT_VALUE_DEFINITION,description:i,name:a,type:o,defaultValue:s,directives:c,loc:this.loc(n)}},e.parseInterfaceTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("interface");var a=this.parseName(),o=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:B.INTERFACE_TYPE_DEFINITION,description:i,name:a,interfaces:o,directives:s,fields:c,loc:this.loc(n)}},e.parseUnionTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("union");var a=this.parseName(),o=this.parseDirectives(!0),s=this.parseUnionMemberTypes();return{kind:B.UNION_TYPE_DEFINITION,description:i,name:a,directives:o,types:s,loc:this.loc(n)}},e.parseUnionMemberTypes=function(){return this.expectOptionalToken(k.EQUALS)?this.delimitedMany(k.PIPE,this.parseNamedType):[]},e.parseEnumTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("enum");var a=this.parseName(),o=this.parseDirectives(!0),s=this.parseEnumValuesDefinition();return{kind:B.ENUM_TYPE_DEFINITION,description:i,name:a,directives:o,values:s,loc:this.loc(n)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(k.BRACE_L,this.parseEnumValueDefinition,k.BRACE_R)},e.parseEnumValueDefinition=function(){var n=this._lexer.token,i=this.parseDescription(),a=this.parseName(),o=this.parseDirectives(!0);return{kind:B.ENUM_VALUE_DEFINITION,description:i,name:a,directives:o,loc:this.loc(n)}},e.parseInputObjectTypeDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("input");var a=this.parseName(),o=this.parseDirectives(!0),s=this.parseInputFieldsDefinition();return{kind:B.INPUT_OBJECT_TYPE_DEFINITION,description:i,name:a,directives:o,fields:s,loc:this.loc(n)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(k.BRACE_L,this.parseInputValueDef,k.BRACE_R)},e.parseTypeSystemExtension=function(){var n=this._lexer.lookahead();if(n.kind===k.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)},e.parseSchemaExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var i=this.parseDirectives(!0),a=this.optionalMany(k.BRACE_L,this.parseOperationTypeDefinition,k.BRACE_R);if(i.length===0&&a.length===0)throw this.unexpected();return{kind:B.SCHEMA_EXTENSION,directives:i,operationTypes:a,loc:this.loc(n)}},e.parseScalarTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var i=this.parseName(),a=this.parseDirectives(!0);if(a.length===0)throw this.unexpected();return{kind:B.SCALAR_TYPE_EXTENSION,name:i,directives:a,loc:this.loc(n)}},e.parseObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var i=this.parseName(),a=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),s=this.parseFieldsDefinition();if(a.length===0&&o.length===0&&s.length===0)throw this.unexpected();return{kind:B.OBJECT_TYPE_EXTENSION,name:i,interfaces:a,directives:o,fields:s,loc:this.loc(n)}},e.parseInterfaceTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var i=this.parseName(),a=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),s=this.parseFieldsDefinition();if(a.length===0&&o.length===0&&s.length===0)throw this.unexpected();return{kind:B.INTERFACE_TYPE_EXTENSION,name:i,interfaces:a,directives:o,fields:s,loc:this.loc(n)}},e.parseUnionTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var i=this.parseName(),a=this.parseDirectives(!0),o=this.parseUnionMemberTypes();if(a.length===0&&o.length===0)throw this.unexpected();return{kind:B.UNION_TYPE_EXTENSION,name:i,directives:a,types:o,loc:this.loc(n)}},e.parseEnumTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var i=this.parseName(),a=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();if(a.length===0&&o.length===0)throw this.unexpected();return{kind:B.ENUM_TYPE_EXTENSION,name:i,directives:a,values:o,loc:this.loc(n)}},e.parseInputObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var i=this.parseName(),a=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();if(a.length===0&&o.length===0)throw this.unexpected();return{kind:B.INPUT_OBJECT_TYPE_EXTENSION,name:i,directives:a,fields:o,loc:this.loc(n)}},e.parseDirectiveDefinition=function(){var n=this._lexer.token,i=this.parseDescription();this.expectKeyword("directive"),this.expectToken(k.AT);var a=this.parseName(),o=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var c=this.parseDirectiveLocations();return{kind:B.DIRECTIVE_DEFINITION,description:i,name:a,arguments:o,repeatable:s,locations:c,loc:this.loc(n)}},e.parseDirectiveLocations=function(){return this.delimitedMany(k.PIPE,this.parseDirectiveLocation)},e.parseDirectiveLocation=function(){var n=this._lexer.token,i=this.parseName();if(Rl[i.value]!==void 0)return i;throw this.unexpected(n)},e.loc=function(n){var i;if(((i=this._options)===null||i===void 0?void 0:i.noLocation)!==!0)return new $s(n,this._lexer.lastToken,this._lexer.source)},e.peek=function(n){return this._lexer.token.kind===n},e.expectToken=function(n){var i=this._lexer.token;if(i.kind===n)return this._lexer.advance(),i;throw Ke(this._lexer.source,i.start,"Expected ".concat(Zs(n),", found ").concat(li(i),"."))},e.expectOptionalToken=function(n){var i=this._lexer.token;if(i.kind===n)return this._lexer.advance(),i},e.expectKeyword=function(n){var i=this._lexer.token;if(i.kind===k.NAME&&i.value===n)this._lexer.advance();else throw Ke(this._lexer.source,i.start,'Expected "'.concat(n,'", found ').concat(li(i),"."))},e.expectOptionalKeyword=function(n){var i=this._lexer.token;return i.kind===k.NAME&&i.value===n?(this._lexer.advance(),!0):!1},e.unexpected=function(n){var i=n??this._lexer.token;return Ke(this._lexer.source,i.start,"Unexpected ".concat(li(i),"."))},e.any=function(n,i,a){this.expectToken(n);for(var o=[];!this.expectOptionalToken(a);)o.push(i.call(this));return o},e.optionalMany=function(n,i,a){if(this.expectOptionalToken(n)){var o=[];do o.push(i.call(this));while(!this.expectOptionalToken(a));return o}return[]},e.many=function(n,i,a){this.expectToken(n);var o=[];do o.push(i.call(this));while(!this.expectOptionalToken(a));return o},e.delimitedMany=function(n,i){this.expectOptionalToken(n);var a=[];do a.push(i.call(this));while(this.expectOptionalToken(n));return a},t}();function li(t){var e=t.value;return Zs(t.kind)+(e!=null?' "'.concat(e,'"'):"")}function Zs(t){return ql(t)?'"'.concat(t,'"'):t}var Yl={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Ql=Object.freeze({});function Xl(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Yl,n=void 0,i=Array.isArray(t),a=[t],o=-1,s=[],c=void 0,u=void 0,l=void 0,f=[],h=[],d=t;do{o++;var p=o===a.length,y=p&&s.length!==0;if(p){if(u=h.length===0?void 0:f[f.length-1],c=l,l=h.pop(),y){if(i)c=c.slice();else{for(var g={},v=0,m=Object.keys(c);v<m.length;v++){var S=m[v];g[S]=c[S]}c=g}for(var b=0,E=0;E<s.length;E++){var A=s[E][0],w=s[E][1];i&&(A-=b),i&&w===null?(c.splice(A,1),b++):c[A]=w}}o=n.index,a=n.keys,s=n.edits,i=n.inArray,n=n.prev}else{if(u=l?i?o:a[o]:void 0,c=l?l[u]:d,c==null)continue;l&&f.push(u)}var T=void 0;if(!Array.isArray(c)){if(!Eo(c))throw new Error("Invalid AST Node: ".concat(Qs(c),"."));var I=Zl(e,c.kind,p);if(I){if(T=I.call(e,c,u,l,f,h),T===Ql)break;if(T===!1){if(!p){f.pop();continue}}else if(T!==void 0&&(s.push([u,T]),!p))if(Eo(T))c=T;else{f.pop();continue}}}if(T===void 0&&y&&s.push([u,c]),p)f.pop();else{var x;n={inArray:i,index:o,keys:a,edits:s,prev:n},i=Array.isArray(c),a=i?c:(x=r[c.kind])!==null&&x!==void 0?x:[],o=-1,s=[],l&&h.push(l),l=c}}while(n!==void 0);return s.length!==0&&(d=s[s.length-1][1]),d}function Zl(t,e,r){var n=t[e];if(n){if(!r&&typeof n=="function")return n;var i=r?n.leave:n.enter;if(typeof i=="function")return i}else{var a=r?t.leave:t.enter;if(a){if(typeof a=="function")return a;var o=a[e];if(typeof o=="function")return o}}}function fi(t){return Xl(t,{leave:tf})}var ef=80,tf={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return F(e.definitions,`

`)+`
`},OperationDefinition:function(e){var r=e.operation,n=e.name,i=fe("(",F(e.variableDefinitions,", "),")"),a=F(e.directives," "),o=e.selectionSet;return!n&&!a&&!i&&r==="query"?o:F([r,F([n,i]),a,o]," ")},VariableDefinition:function(e){var r=e.variable,n=e.type,i=e.defaultValue,a=e.directives;return r+": "+n+fe(" = ",i)+fe(" ",F(a," "))},SelectionSet:function(e){var r=e.selections;return Ye(r)},Field:function(e){var r=e.alias,n=e.name,i=e.arguments,a=e.directives,o=e.selectionSet,s=fe("",r,": ")+n,c=s+fe("(",F(i,", "),")");return c.length>ef&&(c=s+fe(`(
`,sn(F(i,`
`)),`
)`)),F([c,F(a," "),o]," ")},Argument:function(e){var r=e.name,n=e.value;return r+": "+n},FragmentSpread:function(e){var r=e.name,n=e.directives;return"..."+r+fe(" ",F(n," "))},InlineFragment:function(e){var r=e.typeCondition,n=e.directives,i=e.selectionSet;return F(["...",fe("on ",r),F(n," "),i]," ")},FragmentDefinition:function(e){var r=e.name,n=e.typeCondition,i=e.variableDefinitions,a=e.directives,o=e.selectionSet;return"fragment ".concat(r).concat(fe("(",F(i,", "),")")," ")+"on ".concat(n," ").concat(fe("",F(a," ")," "))+o},IntValue:function(e){var r=e.value;return r},FloatValue:function(e){var r=e.value;return r},StringValue:function(e,r){var n=e.value,i=e.block;return i?Ll(n,r==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var r=e.value;return r?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var r=e.value;return r},ListValue:function(e){var r=e.values;return"["+F(r,", ")+"]"},ObjectValue:function(e){var r=e.fields;return"{"+F(r,", ")+"}"},ObjectField:function(e){var r=e.name,n=e.value;return r+": "+n},Directive:function(e){var r=e.name,n=e.arguments;return"@"+r+fe("(",F(n,", "),")")},NamedType:function(e){var r=e.name;return r},ListType:function(e){var r=e.type;return"["+r+"]"},NonNullType:function(e){var r=e.type;return r+"!"},SchemaDefinition:$e(function(t){var e=t.directives,r=t.operationTypes;return F(["schema",F(e," "),Ye(r)]," ")}),OperationTypeDefinition:function(e){var r=e.operation,n=e.type;return r+": "+n},ScalarTypeDefinition:$e(function(t){var e=t.name,r=t.directives;return F(["scalar",e,F(r," ")]," ")}),ObjectTypeDefinition:$e(function(t){var e=t.name,r=t.interfaces,n=t.directives,i=t.fields;return F(["type",e,fe("implements ",F(r," & ")),F(n," "),Ye(i)]," ")}),FieldDefinition:$e(function(t){var e=t.name,r=t.arguments,n=t.type,i=t.directives;return e+(To(r)?fe(`(
`,sn(F(r,`
`)),`
)`):fe("(",F(r,", "),")"))+": "+n+fe(" ",F(i," "))}),InputValueDefinition:$e(function(t){var e=t.name,r=t.type,n=t.defaultValue,i=t.directives;return F([e+": "+r,fe("= ",n),F(i," ")]," ")}),InterfaceTypeDefinition:$e(function(t){var e=t.name,r=t.interfaces,n=t.directives,i=t.fields;return F(["interface",e,fe("implements ",F(r," & ")),F(n," "),Ye(i)]," ")}),UnionTypeDefinition:$e(function(t){var e=t.name,r=t.directives,n=t.types;return F(["union",e,F(r," "),n&&n.length!==0?"= "+F(n," | "):""]," ")}),EnumTypeDefinition:$e(function(t){var e=t.name,r=t.directives,n=t.values;return F(["enum",e,F(r," "),Ye(n)]," ")}),EnumValueDefinition:$e(function(t){var e=t.name,r=t.directives;return F([e,F(r," ")]," ")}),InputObjectTypeDefinition:$e(function(t){var e=t.name,r=t.directives,n=t.fields;return F(["input",e,F(r," "),Ye(n)]," ")}),DirectiveDefinition:$e(function(t){var e=t.name,r=t.arguments,n=t.repeatable,i=t.locations;return"directive @"+e+(To(r)?fe(`(
`,sn(F(r,`
`)),`
)`):fe("(",F(r,", "),")"))+(n?" repeatable":"")+" on "+F(i," | ")}),SchemaExtension:function(e){var r=e.directives,n=e.operationTypes;return F(["extend schema",F(r," "),Ye(n)]," ")},ScalarTypeExtension:function(e){var r=e.name,n=e.directives;return F(["extend scalar",r,F(n," ")]," ")},ObjectTypeExtension:function(e){var r=e.name,n=e.interfaces,i=e.directives,a=e.fields;return F(["extend type",r,fe("implements ",F(n," & ")),F(i," "),Ye(a)]," ")},InterfaceTypeExtension:function(e){var r=e.name,n=e.interfaces,i=e.directives,a=e.fields;return F(["extend interface",r,fe("implements ",F(n," & ")),F(i," "),Ye(a)]," ")},UnionTypeExtension:function(e){var r=e.name,n=e.directives,i=e.types;return F(["extend union",r,F(n," "),i&&i.length!==0?"= "+F(i," | "):""]," ")},EnumTypeExtension:function(e){var r=e.name,n=e.directives,i=e.values;return F(["extend enum",r,F(n," "),Ye(i)]," ")},InputObjectTypeExtension:function(e){var r=e.name,n=e.directives,i=e.fields;return F(["extend input",r,F(n," "),Ye(i)]," ")}};function $e(t){return function(e){return F([e.description,t(e)],`
`)}}function F(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(e=t==null?void 0:t.filter(function(n){return n}).join(r))!==null&&e!==void 0?e:""}function Ye(t){return fe(`{
`,sn(F(t,`
`)),`
}`)}function fe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e!=null&&e!==""?t+e+r:""}function sn(t){return fe("  ",t.replace(/\n/g,`
  `))}function rf(t){return t.indexOf(`
`)!==-1}function To(t){return t!=null&&t.some(rf)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ji=function(t,e){return ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ji(t,e)};function nf(t,e){ji(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var we=function(){return we=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},we.apply(this,arguments)};function ke(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(l){try{u(n.next(l))}catch(f){o(f)}}function c(l){try{u(n.throw(l))}catch(f){o(f)}}function u(l){l.done?a(l.value):i(l.value).then(s,c)}u((n=n.apply(t,e||[])).next())})}function De(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function af(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}var of=new he("AbstractPubSubProvider"),sf=function(){function t(e){this._config=e}return t.prototype.configure=function(e){return this._config=we(we({},e),this._config),of.debug("configure "+this.getProviderName(),this._config),this.options},t.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(t.prototype,"options",{get:function(){return we({},this._config)},enumerable:!0,configurable:!0}),t}(),Oe;(function(t){t.CONNECTION_CLOSED="Connection closed",t.CONNECTION_FAILED="Connection failed",t.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",t.SUBSCRIPTION_ACK="Subscription ack",t.TIMEOUT_DISCONNECT="Timeout disconnect"})(Oe||(Oe={}));var ye;(function(t){t.Connected="Connected",t.ConnectedPendingNetwork="ConnectedPendingNetwork",t.ConnectionDisrupted="ConnectionDisrupted",t.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",t.Connecting="Connecting",t.ConnectedPendingDisconnect="ConnectedPendingDisconnect",t.Disconnected="Disconnected",t.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"})(ye||(ye={}));var uf=5e3,cf=[400,401,403],eu="ConnectionStateChange",Qe;(function(t){t.GQL_CONNECTION_INIT="connection_init",t.GQL_CONNECTION_ERROR="connection_error",t.GQL_CONNECTION_ACK="connection_ack",t.GQL_START="start",t.GQL_START_ACK="start_ack",t.GQL_DATA="data",t.GQL_CONNECTION_KEEP_ALIVE="ka",t.GQL_STOP="stop",t.GQL_COMPLETE="complete",t.GQL_ERROR="error"})(Qe||(Qe={}));var mt;(function(t){t[t.PENDING=0]="PENDING",t[t.CONNECTED=1]="CONNECTED",t[t.FAILED=2]="FAILED"})(mt||(mt={}));var Ue;(function(t){t[t.CLOSED=0]="CLOSED",t[t.READY=1]="READY",t[t.CONNECTING=2]="CONNECTING"})(Ue||(Ue={}));var lf=typeof Symbol<"u"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",ff={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},Io=15e3,df=15e3,Oo=5*60*1e3,hf=65*1e3,pf=5*1e3,vf=60*1e3,No=function(){return new Es().networkMonitor()},Ie={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}},yf=function(){function t(){var e=this;this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=No().subscribe(function(r){var n=r.online,i;e.record(n?Ie.ONLINE:Ie.OFFLINE),(i=e._initialNetworkStateSubscription)===null||i===void 0||i.unsubscribe()}),this._linkedConnectionStateObservable=new xe(function(r){r.next(e._linkedConnectionState),e._linkedConnectionStateObserver=r})}return t.prototype.enableNetworkMonitoring=function(){var e=this,r;(r=this._initialNetworkStateSubscription)===null||r===void 0||r.unsubscribe(),this._networkMonitoringSubscription===void 0&&(this._networkMonitoringSubscription=No().subscribe(function(n){var i=n.online;e.record(i?Ie.ONLINE:Ie.OFFLINE)}))},t.prototype.disableNetworkMonitoring=function(){var e;(e=this._networkMonitoringSubscription)===null||e===void 0||e.unsubscribe(),this._networkMonitoringSubscription=void 0},Object.defineProperty(t.prototype,"connectionStateObservable",{get:function(){var e=this,r;return this._linkedConnectionStateObservable.map(function(n){return e.connectionStatesTranslator(n)}).filter(function(n){var i=n!==r;return r=n,i})},enumerable:!0,configurable:!0}),t.prototype.record=function(e){e.intendedConnectionState==="connected"?this.enableNetworkMonitoring():e.intendedConnectionState==="disconnected"&&this.disableNetworkMonitoring();var r=we(we({},this._linkedConnectionState),e);this._linkedConnectionState=we({},r),this._linkedConnectionStateObserver.next(this._linkedConnectionState)},t.prototype.connectionStatesTranslator=function(e){var r=e.connectionState,n=e.networkState,i=e.intendedConnectionState,a=e.keepAliveState;return r==="connected"&&n==="disconnected"?ye.ConnectedPendingNetwork:r==="connected"&&i==="disconnected"?ye.ConnectedPendingDisconnect:r==="disconnected"&&i==="connected"&&n==="disconnected"?ye.ConnectionDisruptedPendingNetwork:r==="disconnected"&&i==="connected"?ye.ConnectionDisrupted:r==="connected"&&a==="unhealthy"?ye.ConnectedPendingKeepAlive:r==="connecting"?ye.Connecting:r==="disconnected"?ye.Disconnected:ye.Connected},t}(),cr;(function(t){t.START_RECONNECT="START_RECONNECT",t.HALT_RECONNECT="HALT_RECONNECT"})(cr||(cr={}));var mf=function(){function t(){this.reconnectObservers=[]}return t.prototype.addObserver=function(e){this.reconnectObservers.push(e)},t.prototype.record=function(e){var r=this;e===cr.START_RECONNECT&&this.reconnectSetTimeoutId===void 0&&this.reconnectIntervalId===void 0&&(this.reconnectSetTimeoutId=setTimeout(function(){r._triggerReconnect(),r.reconnectIntervalId=setInterval(function(){r._triggerReconnect()},vf)},pf)),e===cr.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))},t.prototype.close=function(){this.reconnectObservers.forEach(function(e){var r;(r=e.complete)===null||r===void 0||r.call(e)})},t.prototype._triggerReconnect=function(){this.reconnectObservers.forEach(function(e){var r;(r=e.next)===null||r===void 0||r.call(e)})},t}(),te=new he("AWSAppSyncRealTimeProvider"),_o=function(t,e,r){bt.dispatch("api",{event:t,data:e,message:r},"PubSub",lf)},gf=/^https:\/\/\w{26}\.appsync\-api\.\w{2}(?:(?:\-\w{2,})+)\-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,bf="/realtime",Sf=function(t){nf(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,r)||this;return n.socketStatus=Ue.CLOSED,n.keepAliveTimeout=Oo,n.subscriptionObserverMap=new Map,n.promiseArray=[],n.connectionStateMonitor=new yf,n.reconnectionMonitor=new mf,n.connectionStateMonitorSubscription=n.connectionStateMonitor.connectionStateObservable.subscribe(function(i){_o(eu,{provider:n,connectionState:i},"Connection state is "+i),n.connectionState=i,i===ye.ConnectionDisrupted&&n.reconnectionMonitor.record(cr.START_RECONNECT),[ye.Connected,ye.ConnectedPendingDisconnect,ye.ConnectedPendingKeepAlive,ye.ConnectedPendingNetwork,ye.ConnectedPendingNetwork,ye.ConnectionDisruptedPendingNetwork,ye.Disconnected].includes(i)&&n.reconnectionMonitor.record(cr.HALT_RECONNECT)}),n}return e.prototype.close=function(){this.socketStatus=Ue.CLOSED,this.connectionStateMonitor.record(Ie.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close()},e.prototype.getNewWebSocket=function(r,n){return new WebSocket(r,n)},e.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},e.prototype.newClient=function(){throw new Error("Not used here")},e.prototype.publish=function(r,n,i){return ke(this,void 0,void 0,function(){return De(this,function(a){throw new Error("Operation not supported")})})},e.prototype.isCustomDomain=function(r){return r.match(gf)===null},e.prototype.subscribe=function(r,n){var i=this,a=n==null?void 0:n.appSyncGraphqlEndpoint;return new xe(function(o){if(!n||!a)o.error({errors:[we({},new tr("Subscribe only available for AWS AppSync endpoint"))]}),o.complete();else{var s=!1,c=Tr.v4(),u=function(){if(!s){s=!0;var f=i._startSubscriptionWithAWSAppSyncRealTime({options:n,observer:o,subscriptionId:c}).catch(function(h){te.debug(Oe.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+h),i.connectionStateMonitor.record(Ie.CLOSED)});f.finally(function(){s=!1})}},l;return l=new xe(function(f){i.reconnectionMonitor.addObserver(f)}).subscribe(function(){u()}),u(),function(){return ke(i,void 0,void 0,function(){var f,h;return De(this,function(d){switch(d.label){case 0:l==null||l.unsubscribe(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this._waitForSubscriptionToBeConnected(c)];case 2:if(d.sent(),f=(this.subscriptionObserverMap.get(c)||{}).subscriptionState,!f)return[2];if(f===mt.CONNECTED)this._sendUnsubscriptionMessage(c);else throw new Error("Subscription never connected");return[3,5];case 3:return h=d.sent(),te.debug("Error while unsubscribing "+h),[3,5];case 4:return this._removeSubscriptionObserver(c),[7];case 5:return[2]}})})}}})},Object.defineProperty(e.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),e.prototype._startSubscriptionWithAWSAppSyncRealTime=function(r){var n=r.options,i=r.observer,a=r.subscriptionId,o;return ke(this,void 0,void 0,function(){var s,c,u,l,f,h,d,p,y,g,v,m,S,b,E,A,w,T,I,x,C,_,P,D=this;return De(this,function(R){switch(R.label){case 0:return s=n.appSyncGraphqlEndpoint,c=n.authenticationType,u=n.query,l=n.variables,f=n.apiKey,h=n.region,d=n.graphql_headers,p=d===void 0?function(){return{}}:d,y=n.additionalHeaders,g=y===void 0?{}:y,v=mt.PENDING,m={query:u,variables:l},this.subscriptionObserverMap.set(a,{observer:i,query:u??"",variables:l??{},subscriptionState:v,startAckTimeoutId:void 0}),S=JSON.stringify(m),E=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:f,appSyncGraphqlEndpoint:s,authenticationType:c,payload:S,canonicalUri:"",region:h,additionalHeaders:g})];case 1:return A=[we.apply(void 0,E.concat([R.sent()]))],[4,p()];case 2:b=we.apply(void 0,[we.apply(void 0,[we.apply(void 0,A.concat([R.sent()])),g]),(P={},P[lc]=fc.userAgent,P)]),w={id:a,payload:{data:S,extensions:{authorization:we({},b)}},type:Qe.GQL_START},T=JSON.stringify(w),R.label=3;case 3:return R.trys.push([3,5,,6]),this.connectionStateMonitor.record(Ie.OPENING_CONNECTION),[4,this._initializeWebSocketConnection({apiKey:f,appSyncGraphqlEndpoint:s,authenticationType:c,region:h,additionalHeaders:g})];case 4:return R.sent(),[3,6];case 5:return I=R.sent(),this._logStartSubscriptionError(a,i,I),[2];case 6:return x=(o=this.subscriptionObserverMap.get(a))!==null&&o!==void 0?o:{},C=x.subscriptionFailedCallback,_=x.subscriptionReadyCallback,this.subscriptionObserverMap.set(a,{observer:i,subscriptionState:v,query:u??"",variables:l??{},subscriptionReadyCallback:_,subscriptionFailedCallback:C,startAckTimeoutId:setTimeout(function(){D._timeoutStartSubscriptionAck.call(D,a)},df)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(T),[2]}})})},e.prototype._logStartSubscriptionError=function(r,n,i){var a;te.debug({err:i});var o=String((a=i.message)!==null&&a!==void 0?a:"");if(Promise.resolve(this.connectionStateMonitor.record(Ie.CLOSED)),this.connectionState!==ye.ConnectionDisruptedPendingNetwork){Mu(i)?n.error({errors:[we({},new tr(Oe.CONNECTION_FAILED+": "+o))]}):te.debug(Oe.CONNECTION_FAILED+": "+o);var s=(this.subscriptionObserverMap.get(r)||{}).subscriptionFailedCallback;typeof s=="function"&&s()}},e.prototype._waitForSubscriptionToBeConnected=function(r){return ke(this,void 0,void 0,function(){var n,i,a=this;return De(this,function(o){return n=this.subscriptionObserverMap.get(r),n&&(i=n.subscriptionState,i===mt.PENDING)?[2,new Promise(function(s,c){var u=n.observer,l=n.subscriptionState,f=n.variables,h=n.query;a.subscriptionObserverMap.set(r,{observer:u,subscriptionState:l,variables:f,query:h,subscriptionReadyCallback:s,subscriptionFailedCallback:c})})]:[2]})})},e.prototype._sendUnsubscriptionMessage=function(r){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Ue.READY){var n={id:r,type:Qe.GQL_STOP},i=JSON.stringify(n);this.awsRealTimeSocket.send(i)}}catch(a){te.debug({err:a})}},e.prototype._removeSubscriptionObserver=function(r){this.subscriptionObserverMap.delete(r),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},e.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=Ue.CLOSED;return}if(this.connectionStateMonitor.record(Ie.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{te.debug("closing WebSocket..."),this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId);var r=this.awsRealTimeSocket;r.onclose=null,r.onerror=null,r.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=Ue.CLOSED,this.connectionStateMonitor.record(Ie.CLOSED)}}},e.prototype._handleIncomingSubscriptionMessage=function(r){var n=this;if(typeof r.data=="string"){te.debug("subscription message from AWS AppSync RealTime: "+r.data);var i=JSON.parse(String(r.data)),a=i.id,o=a===void 0?"":a,s=i.payload,c=i.type,u=this.subscriptionObserverMap.get(o)||{},l=u.observer,f=l===void 0?null:l,h=u.query,d=h===void 0?"":h,p=u.variables,y=p===void 0?{}:p,g=u.startAckTimeoutId,v=u.subscriptionReadyCallback,m=u.subscriptionFailedCallback;if(te.debug({id:o,observer:f,query:d,variables:y}),c===Qe.GQL_DATA&&s&&s.data){f?f.next(s):te.debug("observer not found for id: "+o);return}if(c===Qe.GQL_START_ACK){te.debug("subscription ready for "+JSON.stringify({query:d,variables:y})),typeof v=="function"&&v(),g&&clearTimeout(g),_o(Oe.SUBSCRIPTION_ACK,{query:d,variables:y},"Connection established for subscription");var S=mt.CONNECTED;f&&this.subscriptionObserverMap.set(o,{observer:f,query:d,variables:y,startAckTimeoutId:void 0,subscriptionState:S,subscriptionReadyCallback:v,subscriptionFailedCallback:m}),this.connectionStateMonitor.record(Ie.CONNECTION_ESTABLISHED);return}if(c===Qe.GQL_CONNECTION_KEEP_ALIVE){this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId),this.keepAliveTimeoutId=setTimeout(function(){return n._errorDisconnect(Oe.TIMEOUT_DISCONNECT)},this.keepAliveTimeout),this.keepAliveAlertTimeoutId=setTimeout(function(){n.connectionStateMonitor.record(Ie.KEEP_ALIVE_MISSED)},hf),this.connectionStateMonitor.record(Ie.KEEP_ALIVE);return}if(c===Qe.GQL_ERROR){var S=mt.FAILED;f&&(this.subscriptionObserverMap.set(o,{observer:f,query:d,variables:y,startAckTimeoutId:g,subscriptionReadyCallback:v,subscriptionFailedCallback:m,subscriptionState:S}),te.debug(Oe.CONNECTION_FAILED+": "+JSON.stringify(s)),f.error({errors:[we({},new tr(Oe.CONNECTION_FAILED+": "+JSON.stringify(s)))]}),g&&clearTimeout(g),typeof m=="function"&&m())}}},e.prototype._errorDisconnect=function(r){te.debug("Disconnect error: "+r),this.awsRealTimeSocket&&(this.connectionStateMonitor.record(Ie.CLOSED),this.awsRealTimeSocket.close()),this.socketStatus=Ue.CLOSED},e.prototype._timeoutStartSubscriptionAck=function(r){var n=this.subscriptionObserverMap.get(r);if(n){var i=n.observer,a=n.query,o=n.variables;if(!i)return;this.subscriptionObserverMap.set(r,{observer:i,query:a,variables:o,subscriptionState:mt.FAILED}),this.connectionStateMonitor.record(Ie.CLOSED),te.debug("timeoutStartSubscription",JSON.stringify({query:a,variables:o}))}},e.prototype._initializeWebSocketConnection=function(r){var n=this,i=r.appSyncGraphqlEndpoint,a=r.authenticationType,o=r.apiKey,s=r.region,c=r.additionalHeaders;if(this.socketStatus!==Ue.READY)return new Promise(function(u,l){return ke(n,void 0,void 0,function(){var f,h,d,p,y,g,v,m,S;return De(this,function(b){switch(b.label){case 0:if(this.promiseArray.push({res:u,rej:l}),this.socketStatus!==Ue.CLOSED)return[3,5];b.label=1;case 1:return b.trys.push([1,4,,5]),this.socketStatus=Ue.CONNECTING,f="{}",[4,this._awsRealTimeHeaderBasedAuth({authenticationType:a,payload:f,canonicalUri:"/connect",apiKey:o,appSyncGraphqlEndpoint:i,region:s,additionalHeaders:c})];case 2:return h=b.sent(),d=h?JSON.stringify(h):"",p=_i.Buffer.from(d).toString("base64"),y=_i.Buffer.from(f).toString("base64"),g=i??"",this.isCustomDomain(g)?g=g.concat(bf):g=g.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),v=this.isSSLEnabled?"wss://":"ws://",g=g.replace("https://",v).replace("http://",v),m=g+"?header="+p+"&payload="+y,[4,this._initializeRetryableHandshake(m)];case 3:return b.sent(),this.promiseArray.forEach(function(E){var A=E.res;te.debug("Notifying connection successful"),A()}),this.socketStatus=Ue.READY,this.promiseArray=[],[3,5];case 4:return S=b.sent(),te.debug("Connection exited with",S),this.promiseArray.forEach(function(E){var A=E.rej;return A(S)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=Ue.CLOSED,[3,5];case 5:return[2]}})})})},e.prototype._initializeRetryableHandshake=function(r){return ke(this,void 0,void 0,function(){return De(this,function(n){switch(n.label){case 0:return te.debug("Initializaling retryable Handshake"),[4,ys(this._initializeHandshake.bind(this),[r],uf)];case 1:return n.sent(),[2]}})})},e.prototype._initializeHandshake=function(r){return ke(this,void 0,void 0,function(){var n,i,a,o,s=this;return De(this,function(c){switch(c.label){case 0:te.debug("Initializing handshake "+r),c.label=1;case 1:return c.trys.push([1,4,,5]),[4,function(){return new Promise(function(u,l){var f=s.getNewWebSocket(r,"graphql-ws");f.onerror=function(){te.debug("WebSocket connection error")},f.onclose=function(){l(new Error("Connection handshake error"))},f.onopen=function(){return s.awsRealTimeSocket=f,u()}})}()];case 2:return c.sent(),[4,function(){return new Promise(function(u,l){if(s.awsRealTimeSocket){var f=!1;s.awsRealTimeSocket.onerror=function(p){te.debug("WebSocket error "+JSON.stringify(p))},s.awsRealTimeSocket.onclose=function(p){te.debug("WebSocket closed "+p.reason),l(new Error(JSON.stringify(p)))},s.awsRealTimeSocket.onmessage=function(p){if(typeof p.data=="string"){te.debug("subscription message from AWS AppSyncRealTime: "+p.data+" ");var y=JSON.parse(p.data),g=y.type,v=y.payload,m=(v===void 0?{}:v).connectionTimeoutMs,S=m===void 0?Oo:m;if(g===Qe.GQL_CONNECTION_ACK){f=!0,s.awsRealTimeSocket&&(s.keepAliveTimeout=S,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(P){te.debug(P),s._errorDisconnect(Oe.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(P){te.debug("WebSocket closed "+P.reason),s._errorDisconnect(Oe.CONNECTION_CLOSED)}),u("Cool, connected to AWS AppSyncRealTime");return}if(g===Qe.GQL_CONNECTION_ERROR){var b=y.payload,E=(b===void 0?{}:b).errors,A=af(E===void 0?[]:E,1),w=A[0],T=w===void 0?{}:w,I=T.errorType,x=I===void 0?"":I,C=T.errorCode,_=C===void 0?0:C;l({errorType:x,errorCode:_})}}};var h={type:Qe.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(h));var d=function(p){p||(s.connectionStateMonitor.record(Ie.CONNECTION_FAILED),l(new Error("Connection timeout: ack from AWSAppSyncRealTime was not received after "+Io+" ms")))};setTimeout(function(){return d(f)},Io)}})}()];case 3:return c.sent(),[3,5];case 4:throw n=c.sent(),i=n,a=i.errorType,o=i.errorCode,cf.includes(o)?new Yt(a):a?new Error(a):n;case 5:return[2]}})})},e.prototype._awsRealTimeHeaderBasedAuth=function(r){var n=r.authenticationType,i=r.payload,a=r.canonicalUri,o=r.appSyncGraphqlEndpoint,s=r.apiKey,c=r.region,u=r.additionalHeaders;return ke(this,void 0,void 0,function(){var l,f,h,d;return De(this,function(p){switch(p.label){case 0:return l={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},!n||!l[n]?(te.debug("Authentication type "+n+" not supported"),[2,void 0]):[3,1];case 1:return f=l[n],h=sr(o??"").host,te.debug("Authenticating with "+n),[4,f({payload:i,canonicalUri:a,appSyncGraphqlEndpoint:o,apiKey:s,region:c,host:h,additionalHeaders:u})];case 2:return d=p.sent(),[2,d]}})})},e.prototype._awsRealTimeCUPHeader=function(r){var n=r.host;return ke(this,void 0,void 0,function(){var i;return De(this,function(a){switch(a.label){case 0:return[4,St.currentSession()];case 1:return i=a.sent(),[2,{Authorization:i.getAccessToken().getJwtToken(),host:n}]}})})},e.prototype._awsRealTimeOPENIDHeader=function(r){var n=r.host;return ke(this,void 0,void 0,function(){var i,a,o;return De(this,function(s){switch(s.label){case 0:return[4,Ft.getItem("federatedInfo")];case 1:return a=s.sent(),a?(i=a.token,[3,4]):[3,2];case 2:return[4,St.currentAuthenticatedUser()];case 3:o=s.sent(),o&&(i=o.token),s.label=4;case 4:if(!i)throw new Error("No federated jwt");return[2,{Authorization:i,host:n}]}})})},e.prototype._awsRealTimeApiKeyHeader=function(r){var n=r.apiKey,i=r.host;return ke(this,void 0,void 0,function(){var a,o;return De(this,function(s){return a=new Date,o=a.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:i,"x-amz-date":o,"x-api-key":n}]})})},e.prototype._awsRealTimeIAMHeader=function(r){var n=r.payload,i=r.canonicalUri,a=r.appSyncGraphqlEndpoint,o=r.region;return ke(this,void 0,void 0,function(){var s,c,u,l,f;return De(this,function(h){switch(h.label){case 0:return s={region:o,service:"appsync"},[4,this._ensureCredentials()];case 1:if(c=h.sent(),!c)throw new Error("No credentials");return[4,kt.get().then(function(d){var p=d,y=p.secretAccessKey,g=p.accessKeyId,v=p.sessionToken;return{secret_key:y,access_key:g,session_token:v}})];case 2:return u=h.sent(),l={url:""+a+i,data:n,method:"POST",headers:we({},ff)},f=Is.sign(l,u,s),[2,f.headers]}})})},e.prototype._customAuthHeader=function(r){var n=r.host,i=r.additionalHeaders;if(!i||!i.Authorization)throw new Error("No auth token specified");return{Authorization:i.Authorization,host:n}},e.prototype._ensureCredentials=function(){return kt.get().then(function(r){if(!r)return!1;var n=kt.shear(r);return te.debug("set credentials for AWSAppSyncRealTimeProvider",n),!0}).catch(function(r){return te.warn("ensure credentials error",r),!1})},e}(sf),Ef=Pr().isNode,di=new he("PubSub"),wf=function(){function t(e){this._options=e??{},di.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(t.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new Sf(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),t.prototype.getModuleName=function(){return"PubSub"},t.prototype.configure=function(e){var r=this,n=e?e.PubSub||e:{};return di.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map(function(i){return i.configure(r._options)}),this._options},t.prototype.addPluggable=function(e){return ke(this,void 0,void 0,function(){var r;return De(this,function(n){return e&&e.getCategory()==="PubSub"?(this._pluggables.push(e),r=e.configure(this._options),[2,r]):[2]})})},t.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter(function(r){return r.getProviderName()!==e})},t.prototype.getProviderByName=function(e){return e===Os?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(r){return r.getProviderName()===e})},t.prototype.getProviders=function(e){e===void 0&&(e={});var r=e.provider;if(!r)return this._pluggables;var n=this.getProviderByName(r);if(!n)throw new Error("Could not find provider named "+String(r));return[n]},t.prototype.publish=function(e,r,n){return ke(this,void 0,void 0,function(){return De(this,function(i){return[2,Promise.all(this.getProviders(n).map(function(a){return a.publish(e,r,n)}))]})})},t.prototype.subscribe=function(e,r){if(Ef&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");di.debug("subscribe options",r);var n=this.getProviders(r);return new xe(function(i){var a=n.map(function(s){return{provider:s,observable:s.subscribe(e,r)}}),o=a.map(function(s){var c=s.provider,u=s.observable;return u.subscribe({start:console.error,next:function(l){return i.next({provider:c,value:l})},error:function(l){return i.error({provider:c,error:l})}})});return function(){return o.forEach(function(s){return s.unsubscribe()})}})},t}(),un=new wf;Ut.register(un);var lt;(function(t){t.NO_API_KEY="No api-key configured",t.NO_CURRENT_USER="No current user",t.NO_CREDENTIALS="No credentials",t.NO_FEDERATED_JWT="No federated jwt",t.NO_AUTH_TOKEN="No auth token specified"})(lt||(lt={}));var Af="x-amz-user-agent",It=new he("GraphQLAPI"),tu=function(){function t(e){this._api=null,this.Auth=St,this.Cache=Ft,this.Credentials=kt,this._options=e,It.debug("API Options",this._options)}return t.prototype.getModuleName=function(){return"GraphQLAPI"},t.prototype.configure=function(e){var r=e||{},n=r.API,i=n===void 0?{}:n,a=fl(r,["API"]),o=ut(ut({},a),i);return It.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),typeof o.graphql_headers<"u"&&typeof o.graphql_headers!="function"&&(It.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},t.prototype.createInstance=function(){return It.debug("create Rest instance"),this._options?(this._api=new Ks(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},t.prototype._headerBasedAuth=function(e,r){return r===void 0&&(r={}),ai(this,void 0,void 0,function(){var n,i,a,o,s,c,u,l,f,h,d;return oi(this,function(p){switch(p.label){case 0:switch(n=this._options,i=n.aws_appsync_authenticationType,a=n.aws_appsync_apiKey,o=e||i||"AWS_IAM",s={},c=o,c){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11];case"AWS_LAMBDA":return[3,15]}return[3,16];case 1:if(!a)throw new Error(lt.NO_API_KEY);return s={Authorization:null,"X-Api-Key":a},[3,17];case 2:return[4,this._ensureCredentials()];case 3:if(u=p.sent(),!u)throw new Error(lt.NO_CREDENTIALS);return[3,17];case 4:return p.trys.push([4,9,,10]),l=void 0,[4,Ft.getItem("federatedInfo")];case 5:return f=p.sent(),f?(l=f.token,[3,8]):[3,6];case 6:return[4,St.currentAuthenticatedUser()];case 7:h=p.sent(),h&&(l=h.token),p.label=8;case 8:if(!l)throw new Error(lt.NO_FEDERATED_JWT);return s={Authorization:l},[3,10];case 9:throw p.sent(),new Error(lt.NO_CURRENT_USER);case 10:return[3,17];case 11:return p.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return d=p.sent(),s={Authorization:d.getAccessToken().getJwtToken()},[3,14];case 13:throw p.sent(),new Error(lt.NO_CURRENT_USER);case 14:return[3,17];case 15:if(!r.Authorization)throw new Error(lt.NO_AUTH_TOKEN);return s={Authorization:r.Authorization},[3,17];case 16:return s={Authorization:null},[3,17];case 17:return[2,s]}})})},t.prototype.getGraphqlOperationType=function(e){var r=ci(e),n=r.definitions,i=yo(n,1),a=i[0].operation;return a},t.prototype.graphql=function(e,r){var n=e.query,i=e.variables,a=i===void 0?{}:i,o=e.authMode,s=e.authToken,c=e.userAgentSuffix,u=ci(typeof n=="string"?n:fi(n)),l=yo(u.definitions.filter(function(m){return m.kind==="OperationDefinition"}),1),f=l[0],h=f===void 0?{}:f,d=h.operation,p=r||{};switch(s&&(p.Authorization=s),d){case"query":case"mutation":this.createInstanceIfNotCreated();var y=this._api.getCancellableToken(),g={cancellableToken:y,withCredentials:this._options.withCredentials},v=this._graphql({query:u,variables:a,authMode:o,userAgentSuffix:c},p,g);return this._api.updateRequestToBeCancellable(v,y),v;case"subscription":return this._graphqlSubscribe({query:u,variables:a,authMode:o},p);default:throw new Error("invalid operation type: "+d)}},t.prototype._graphql=function(e,r,n){var i=e.query,a=e.variables,o=e.authMode,s=e.userAgentSuffix;return r===void 0&&(r={}),n===void 0&&(n={}),ai(this,void 0,void 0,function(){var c,u,l,f,h,d,p,y,g,v,m,S,b,E,A,w,T,I,x,C,_,P;return oi(this,function(D){switch(D.label){case 0:return this.createInstanceIfNotCreated(),c=this._options,u=c.aws_appsync_region,l=c.aws_appsync_graphqlEndpoint,f=c.graphql_headers,h=f===void 0?function(){return{}}:f,d=c.graphql_endpoint,p=c.graphql_endpoint_iam_region,g=[{}],v=!d,v?[4,this._headerBasedAuth(o,r)]:[3,2];case 1:v=D.sent(),D.label=2;case 2:return m=[ut.apply(void 0,g.concat([v]))],S=d,S?p?[4,this._headerBasedAuth(o,r)]:[3,4]:[3,6];case 3:return b=D.sent(),[3,5];case 4:b={Authorization:null},D.label=5;case 5:S=b,D.label=6;case 6:return E=[ut.apply(void 0,m.concat([S]))],[4,h({query:i,variables:a})];case 7:if(y=ut.apply(void 0,[ut.apply(void 0,[ut.apply(void 0,E.concat([D.sent()])),r]),!d&&(P={},P[Af]=Fu(s),P)]),A={query:fi(i),variables:a},w=Object.assign({headers:y,body:A,signerServiceInfo:{service:d?"execute-api":"appsync",region:d?p:u}},n),T=d||l,!T)throw I=new tr("No graphql endpoint provided."),{data:{},errors:[I]};D.label=8;case 8:return D.trys.push([8,10,,11]),[4,this._api.post(T,w)];case 9:return x=D.sent(),[3,11];case 10:if(C=D.sent(),this._api.isCancel(C))throw C;return x={data:{},errors:[new tr(C.message,null,null,null,null,C)]},[3,11];case 11:if(_=x.errors,_&&_.length)throw x;return[2,x]}})})},t.prototype.createInstanceIfNotCreated=function(){return ai(this,void 0,void 0,function(){return oi(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.isCancel=function(e){return this._api.isCancel(e)},t.prototype.cancel=function(e,r){return this._api.cancel(e,r)},t.prototype.hasCancelToken=function(e){return this._api.hasCancelToken(e)},t.prototype._graphqlSubscribe=function(e,r){var n=e.query,i=e.variables,a=e.authMode,o=e.authToken;r===void 0&&(r={});var s=this._options,c=s.aws_appsync_region,u=s.aws_appsync_graphqlEndpoint,l=s.aws_appsync_authenticationType,f=s.aws_appsync_apiKey,h=s.graphql_headers,d=h===void 0?function(){return{}}:h,p=a||l||"AWS_IAM";if(un&&typeof un.subscribe=="function")return un.subscribe("",{provider:Os,appSyncGraphqlEndpoint:u,authenticationType:p,apiKey:f,query:fi(n),region:c,variables:i,graphql_headers:d,additionalHeaders:r,authToken:o});throw It.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},t.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then(function(r){if(!r)return!1;var n=e.Credentials.shear(r);return It.debug("set credentials for api",n),!0}).catch(function(r){return It.warn("ensure credentials error",r),!1})},t}(),Tf=new tu(null);Ut.register(Tf);var If=new he("API"),Of=function(){function t(e){this.Auth=St,this.Cache=Ft,this.Credentials=kt,this._options=e,this._restApi=new zs(e),this._graphqlApi=new tu(e),If.debug("API Options",this._options)}return t.prototype.getModuleName=function(){return"API"},t.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var r=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return vn(vn({},r),n)},t.prototype.get=function(e,r,n){return this._restApi.get(e,r,n)},t.prototype.post=function(e,r,n){return this._restApi.post(e,r,n)},t.prototype.put=function(e,r,n){return this._restApi.put(e,r,n)},t.prototype.patch=function(e,r,n){return this._restApi.patch(e,r,n)},t.prototype.del=function(e,r,n){return this._restApi.del(e,r,n)},t.prototype.head=function(e,r,n){return this._restApi.head(e,r,n)},t.prototype.isCancel=function(e){return this._restApi.isCancel(e)},t.prototype.cancel=function(e,r){return this._restApi.hasCancelToken(e)?this._restApi.cancel(e,r):this._graphqlApi.hasCancelToken(e)?this._graphqlApi.cancel(e,r):!1},t.prototype.endpoint=function(e){return ul(this,void 0,void 0,function(){return cl(this,function(r){return[2,this._restApi.endpoint(e)]})})},t.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},t.prototype.graphql=function(e,r){return this._graphqlApi.graphql(e,r)},t}(),Dr=new Of(null);Ut.register(Dr);function Ce(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function jt(t){return!!t&&!!t[ze]}function Et(t){return!!t&&(function(e){if(!e||typeof e!="object")return!1;var r=Object.getPrototypeOf(e);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===Mf}(t)||Array.isArray(t)||!!t[Dt]||!!t.constructor[Dt]||Rn(t)||Mn(t))}function lr(t,e,r){r===void 0&&(r=!1),wt(t)===0?(r?Object.keys:Ea)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function wt(t){var e=t[ze];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Rn(t)?2:Mn(t)?3:0}function Nr(t,e){return wt(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function cn(t,e){return wt(t)===2?t.get(e):t[e]}function ru(t,e,r){var n=wt(t);n===2?t.set(e,r):n===3?(t.delete(e),t.add(r)):t[e]=r}function Nf(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Rn(t){return Df&&t instanceof Map}function Mn(t){return Rf&&t instanceof Set}function Nt(t){return t.o||t.t}function ya(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Ff(t);delete e[ze];for(var r=Ea(e),n=0;n<r.length;n++){var i=r[n],a=e[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function ma(t,e){return e===void 0&&(e=!1),ga(t)||jt(t)||!Et(t)||(wt(t)>1&&(t.set=t.add=t.clear=t.delete=_f),Object.freeze(t),e&&lr(t,function(r,n){return ma(n,!0)},!0)),t}function _f(){Ce(2)}function ga(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function ft(t){var e=Ki[t];return e||Ce(18,t),e}function Cf(t,e){Ki[t]||(Ki[t]=e)}function Co(){return _r}function hi(t,e){e&&(ft("Patches"),t.u=[],t.s=[],t.v=e)}function yn(t){qi(t),t.p.forEach(xf),t.p=null}function qi(t){t===_r&&(_r=t.l)}function xo(t){return _r={p:[],l:_r,h:t,m:!0,_:0}}function xf(t){var e=t[ze];e.i===0||e.i===1?e.j():e.O=!0}function pi(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.g||ft("ES5").S(e,t,n),n?(r[ze].P&&(yn(e),Ce(4)),Et(t)&&(t=mn(e,t),e.l||gn(e,t)),e.u&&ft("Patches").M(r[ze],t,e.u,e.s)):t=mn(e,r,[]),yn(e),e.u&&e.v(e.u,e.s),t!==Sa?t:void 0}function mn(t,e,r){if(ga(e))return e;var n=e[ze];if(!n)return lr(e,function(a,o){return Po(t,n,e,a,o,r)},!0),e;if(n.A!==t)return e;if(!n.P)return gn(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=ya(n.k):n.o;lr(n.i===3?new Set(i):i,function(a,o){return Po(t,n,i,a,o,r)}),gn(t,i,!1),r&&t.u&&ft("Patches").R(n,r,t.u,t.s)}return n.o}function Po(t,e,r,n,i,a){if(jt(i)){var o=mn(t,i,a&&e&&e.i!==3&&!Nr(e.D,n)?a.concat(n):void 0);if(ru(r,n,o),!jt(o))return;t.m=!1}if(Et(i)&&!ga(i)){if(!t.h.F&&t._<1)return;mn(t,i),e&&e.A.l||gn(t,i)}}function gn(t,e,r){r===void 0&&(r=!1),t.h.F&&t.m&&ma(e,r)}function vi(t,e){var r=t[ze];return(r?Nt(r):t)[e]}function ko(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Bi(t){t.P||(t.P=!0,t.l&&Bi(t.l))}function yi(t){t.o||(t.o=ya(t.t))}function Ui(t,e,r){var n=Rn(e)?ft("MapSet").N(e,r):Mn(e)?ft("MapSet").T(e,r):t.g?function(i,a){var o=Array.isArray(i),s={i:o?1:0,A:a?a.A:Co(),P:!1,I:!1,D:{},l:a,t:i,k:null,o:null,j:null,C:!1},c=s,u=ln;o&&(c=[s],u=fn);var l=Proxy.revocable(c,u),f=l.revoke,h=l.proxy;return s.k=h,s.j=f,h}(e,r):ft("ES5").J(e,r);return(r?r.A:Co()).p.push(n),n}function Pf(t){return jt(t)||Ce(22,t),function e(r){if(!Et(r))return r;var n,i=r[ze],a=wt(r);if(i){if(!i.P&&(i.i<4||!ft("ES5").K(i)))return i.t;i.I=!0,n=Do(r,a),i.I=!1}else n=Do(r,a);return lr(n,function(o,s){i&&cn(i.t,o)===s||ru(n,o,e(s))}),a===3?new Set(n):n}(t)}function Do(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return ya(t)}function kf(){function t(n){if(!Et(n))return n;if(Array.isArray(n))return n.map(t);if(Rn(n))return new Map(Array.from(n.entries()).map(function(o){return[o[0],t(o[1])]}));if(Mn(n))return new Set(Array.from(n).map(t));var i=Object.create(Object.getPrototypeOf(n));for(var a in n)i[a]=t(n[a]);return Nr(n,Dt)&&(i[Dt]=n[Dt]),i}function e(n){return jt(n)?t(n):n}var r="add";Cf("Patches",{$:function(n,i){return i.forEach(function(a){for(var o=a.path,s=a.op,c=n,u=0;u<o.length-1;u++){var l=wt(c),f=""+o[u];l!==0&&l!==1||f!=="__proto__"&&f!=="constructor"||Ce(24),typeof c=="function"&&f==="prototype"&&Ce(24),typeof(c=cn(c,f))!="object"&&Ce(15,o.join("/"))}var h=wt(c),d=t(a.value),p=o[o.length-1];switch(s){case"replace":switch(h){case 2:return c.set(p,d);case 3:Ce(16);default:return c[p]=d}case r:switch(h){case 1:return c.splice(p,0,d);case 2:return c.set(p,d);case 3:return c.add(d);default:return c[p]=d}case"remove":switch(h){case 1:return c.splice(p,1);case 2:return c.delete(p);case 3:return c.delete(a.value);default:return delete c[p]}default:Ce(17,s)}}),n},R:function(n,i,a,o){switch(n.i){case 0:case 4:case 2:return function(s,c,u,l){var f=s.t,h=s.o;lr(s.D,function(d,p){var y=cn(f,d),g=cn(h,d),v=p?Nr(f,d)?"replace":r:"remove";if(y!==g||v!=="replace"){var m=c.concat(d);u.push(v==="remove"?{op:v,path:m}:{op:v,path:m,value:g}),l.push(v===r?{op:"remove",path:m}:v==="remove"?{op:r,path:m,value:e(y)}:{op:"replace",path:m,value:e(y)})}})}(n,i,a,o);case 5:case 1:return function(s,c,u,l){var f=s.t,h=s.D,d=s.o;if(d.length<f.length){var p=[d,f];f=p[0],d=p[1];var y=[l,u];u=y[0],l=y[1]}for(var g=0;g<f.length;g++)if(h[g]&&d[g]!==f[g]){var v=c.concat([g]);u.push({op:"replace",path:v,value:e(d[g])}),l.push({op:"replace",path:v,value:e(f[g])})}for(var m=f.length;m<d.length;m++){var S=c.concat([m]);u.push({op:r,path:S,value:e(d[m])})}f.length<d.length&&l.push({op:"replace",path:c.concat(["length"]),value:f.length})}(n,i,a,o);case 3:return function(s,c,u,l){var f=s.t,h=s.o,d=0;f.forEach(function(p){if(!h.has(p)){var y=c.concat([d]);u.push({op:"remove",path:y,value:p}),l.unshift({op:r,path:y,value:p})}d++}),d=0,h.forEach(function(p){if(!f.has(p)){var y=c.concat([d]);u.push({op:r,path:y,value:p}),l.unshift({op:"remove",path:y,value:p})}d++})}(n,i,a,o)}},M:function(n,i,a,o){a.push({op:"replace",path:[],value:i===Sa?void 0:i}),o.push({op:"replace",path:[],value:n.t})}})}var Ro,_r,ba=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Df=typeof Map<"u",Rf=typeof Set<"u",Mo=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Sa=ba?Symbol.for("immer-nothing"):((Ro={})["immer-nothing"]=!0,Ro),Dt=ba?Symbol.for("immer-draftable"):"__$immer_draftable",ze=ba?Symbol.for("immer-state"):"__$immer_state",Mf=""+Object.prototype.constructor,Ea=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Ff=Object.getOwnPropertyDescriptors||function(t){var e={};return Ea(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},Ki={},ln={get:function(t,e){if(e===ze)return t;var r=Nt(t);if(!Nr(r,e))return function(i,a,o){var s,c=ko(a,o);return c?"value"in c?c.value:(s=c.get)===null||s===void 0?void 0:s.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!Et(n)?n:n===vi(t.t,e)?(yi(t),t.o[e]=Ui(t.A.h,n,t)):n},has:function(t,e){return e in Nt(t)},ownKeys:function(t){return Reflect.ownKeys(Nt(t))},set:function(t,e,r){var n=ko(Nt(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=vi(Nt(t),e),a=i==null?void 0:i[ze];if(a&&a.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(Nf(r,i)&&(r!==void 0||Nr(t.t,e)))return!0;yi(t),Bi(t)}return t.o[e]===r&&typeof r!="number"&&(r!==void 0||e in t.o)||(t.o[e]=r,t.D[e]=!0,!0)},deleteProperty:function(t,e){return vi(t.t,e)!==void 0||e in t.t?(t.D[e]=!1,yi(t),Bi(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=Nt(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){Ce(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Ce(12)}},fn={};lr(ln,function(t,e){fn[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),fn.deleteProperty=function(t,e){return ln.deleteProperty.call(this,t[0],e)},fn.set=function(t,e,r){return ln.set.call(this,t[0],e,r,t[0])};var Lf=function(){function t(r){var n=this;this.g=Mo,this.F=!0,this.produce=function(i,a,o){if(typeof i=="function"&&typeof a!="function"){var s=a;a=i;var c=n;return function(d){var p=this;d===void 0&&(d=s);for(var y=arguments.length,g=Array(y>1?y-1:0),v=1;v<y;v++)g[v-1]=arguments[v];return c.produce(d,function(m){var S;return(S=a).call.apply(S,[p,m].concat(g))})}}var u;if(typeof a!="function"&&Ce(6),o!==void 0&&typeof o!="function"&&Ce(7),Et(i)){var l=xo(n),f=Ui(n,i,void 0),h=!0;try{u=a(f),h=!1}finally{h?yn(l):qi(l)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(d){return hi(l,o),pi(d,l)},function(d){throw yn(l),d}):(hi(l,o),pi(u,l))}if(!i||typeof i!="object")return(u=a(i))===Sa?void 0:(u===void 0&&(u=i),n.F&&ma(u,!0),u);Ce(21,i)},this.produceWithPatches=function(i,a){return typeof i=="function"?function(c){for(var u=arguments.length,l=Array(u>1?u-1:0),f=1;f<u;f++)l[f-1]=arguments[f];return n.produceWithPatches(c,function(h){return i.apply(void 0,[h].concat(l))})}:[n.produce(i,a,function(c,u){o=c,s=u}),o,s];var o,s},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){Et(r)||Ce(8),jt(r)&&(r=Pf(r));var n=xo(this),i=Ui(this,r,void 0);return i[ze].C=!0,qi(n),i},e.finishDraft=function(r,n){var i=r&&r[ze],a=i.A;return hi(a,n),pi(void 0,a)},e.setAutoFreeze=function(r){this.F=r},e.setUseProxies=function(r){r&&!Mo&&Ce(20),this.g=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var a=n[i];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}var o=ft("Patches").$;return jt(r)?o(r,n):this.produce(r,function(s){return o(s,n.slice(i+1))})},t}(),We=new Lf,Er=We.produce;We.produceWithPatches.bind(We);var jf=We.setAutoFreeze.bind(We);We.setUseProxies.bind(We);var qf=We.applyPatches.bind(We);We.createDraft.bind(We);We.finishDraft.bind(We);var Fo=function(){return[]};function rr(t){var e=new Error(t);return e.source="ulid",e}var nr="0123456789ABCDEFGHJKMNPQRSTVWXYZ",ir=nr.length,Lo=Math.pow(2,48)-1,zi=10,nu=16;function jo(t,e,r){return e>t.length-1?t:t.substr(0,e)+r+t.substr(e+1)}function Bf(t){for(var e=void 0,r=t.length,n=void 0,i=void 0,a=ir-1;!e&&r-->=0;){if(n=t[r],i=nr.indexOf(n),i===-1)throw rr("incorrectly encoded string");if(i===a){t=jo(t,r,nr[0]);continue}e=jo(t,r,nr[i+1])}if(typeof e=="string")return e;throw rr("cannot increment this string")}function Uf(t){var e=Math.floor(t()*ir);return e===ir&&(e=ir-1),nr.charAt(e)}function Wi(t,e){if(isNaN(t))throw new Error(t+" must be a number");if(t>Lo)throw rr("cannot encode time greater than "+Lo);if(t<0)throw rr("time must be positive");if(Number.isInteger(t)===!1)throw rr("time must be an integer");for(var r=void 0,n="";e>0;e--)r=t%ir,n=nr.charAt(r)+n,t=(t-r)/ir;return n}function iu(t,e){for(var r="";t>0;t--)r=Uf(e)+r;return r}function au(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments[1];e||(e=typeof window<"u"?window:null);var r=e&&(e.crypto||e.msCrypto);if(r)return function(){var i=new Uint8Array(1);return r.getRandomValues(i),i[0]/255};try{var n=require("crypto");return function(){return n.randomBytes(1).readUInt8()/255}}catch{}if(t){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch{}return function(){return Math.random()}}throw rr("secure crypto unusable, insecure Math.random not allowed")}function Kf(t){return t||(t=au()),function(r){return isNaN(r)&&(r=Date.now()),Wi(r,zi)+iu(nu,t)}}function zf(t){t||(t=au());var e=0,r=void 0;return function(i){if(isNaN(i)&&(i=Date.now()),i<=e){var a=r=Bf(r);return Wi(e,zi)+a}e=i;var o=r=iu(nu,t);return Wi(i,zi)+o}}Kf();var Vi=function(){function t(){}return t.createPredicateBuilder=function(e){var r=e.name,n=new Set(Object.keys(e.fields)),i=new Proxy({},{get:function(a,o,s){var c=o;if(!n.has(c))throw new Error("Invalid field for model. field: "+c+", model: "+r);var u=function(l){var f;return(f=t.sortPredicateGroupsMap.get(s))===null||f===void 0||f.push({field:c,sortDirection:l}),s};return u}});return t.sortPredicateGroupsMap.set(i,[]),i},t.isValidPredicate=function(e){return t.sortPredicateGroupsMap.has(e)},t.getPredicates=function(e,r){if(r===void 0&&(r=!0),r&&!t.isValidPredicate(e))throw new Error("The predicate is not valid");var n=t.sortPredicateGroupsMap.get(e);if(n)return n;throw new Error("Predicate group not found")},t.createFromExisting=function(e,r){if(!(!r||!e))return r(t.createPredicateBuilder(e))},t.sortPredicateGroupsMap=new WeakMap,t}(),ou=new WeakSet;function mi(t){return ou.has(t)}var Wf=new Set(["and","or","not"]),Vf=function(t){var e=ie(Object.keys(t));return e.length===1&&Wf.has(e[0])},Gf=function(t){return!Array.isArray(t)&&Object.keys(t).length===0},su=new Set(["eq","ne","gt","lt","ge","le","contains","notContains","beginsWith","between"]),Hf=function(t){var e=ie(Object.keys(t));return!Array.isArray(t)&&e.length===1&&su.has(e[0])},uu=function(t){return Array.isArray(t)?t.every(function(e){return uu(e)}):Object.keys(t).length<=1},ep=function(){function t(){}return Object.defineProperty(t,"ALL",{get:function(){var e=function(r){return r};return ou.add(e),e},enumerable:!0,configurable:!0}),t}(),ne=function(){function t(){}return t.isValidPredicate=function(e){return t.predicateGroupsMap.has(e)},t.getPredicates=function(e,r){if(r===void 0&&(r=!0),r&&!t.isValidPredicate(e))throw new Error("The predicate is not valid");return t.predicateGroupsMap.get(e)},t.createForPk=function(e,r){var n=Se(e),i=hu(r,n),a=this.createFromAST(e,{and:n.map(function(o,s){var c,u=i[s];return c={},c[o]={eq:u},c})});return a},t.createFromFlatEqualities=function(e,r){var n={and:Object.entries(r).map(function(i){var a,o=M(i,2),s=o[0],c=o[1];return a={},a[s]={eq:c},a})};return this.createFromAST(e,n)},t.transformGraphQLFilterNodeToPredicateAST=function(e){var r=this;if(!uu(e))throw new Error("Invalid GraphQL Condition or subtree: "+e);if(Gf(e))return{type:"and",predicates:[]};if(Vf(e)){var n=Object.keys(e)[0],i=this.transformGraphQLFilterNodeToPredicateAST(e[n]);return{type:n,predicates:Array.isArray(i)?i:[i]}}else if(Hf(e)){var a=Object.keys(e)[0];return{operator:a,operand:e[a]}}else{if(Array.isArray(e))return e.map(function(s){return r.transformGraphQLFilterNodeToPredicateAST(s)});var o=Object.keys(e)[0];return K({field:o},this.transformGraphQLFilterNodeToPredicateAST(e[o]))}},t.createFromAST=function(e,r){var n={};return t.predicateGroupsMap.set(n,this.transformGraphQLFilterNodeToPredicateAST(r)),n},t.predicateGroupsMap=new WeakMap,t}(),Rr="id",gt="#",cu="-",wr={idEmptyString:"An index field cannot contain an empty string value",queryByPkWithCompositeKeyPresent:"Models with composite primary keys cannot be queried by a single key value. Use object literal syntax for composite keys instead: https://docs.amplify.aws/lib/datastore/advanced-workflows/q/platform/js/#querying-records-with-custom-primary-keys",deleteByPkWithCompositeKeyPresent:"Models with composite primary keys cannot be deleted by a single key value, unless using a predicate. Use object literal syntax for composite keys instead: https://docs.amplify.aws/lib/datastore/advanced-workflows/q/platform/js/#querying-records-with-custom-primary-keys",observeWithObjectLiteral:"Object literal syntax cannot be used with observe. Use a predicate instead: https://docs.amplify.aws/lib/datastore/data-access/q/platform/js/#predicates"},fr;(function(t){t.DATASTORE="datastore",t.USER="user",t.SYNC="sync",t.STORAGE="storage"})(fr||(fr={}));var wa=fr.DATASTORE,hr=fr.USER,ar=fr.SYNC,lu=fr.STORAGE,bn="/DataStore",Ve=function(t){return typeof t>"u"||t===void 0||t===null},qt=function(t,e,r){var n,i=!1;if(r.length===0)return!0;switch(e){case"not":n="every",i=!0;break;case"and":n="every";break;case"or":n="some";break;default:throw new Error("Invalid "+e)}var a=r[n](function(o){if(dr(o)){var s=o.field,c=o.operator,u=o.operand,l=t[s];return Jf(l,c,u)}if(Cr(o)){var f=o.type,h=o.predicates;return qt(t,f,h)}throw new Error("Not a predicate or group")});return i?!a:a},Jf=function(t,e,r){switch(e){case"ne":return t!==r;case"eq":return t===r;case"le":return t<=r;case"lt":return t<r;case"ge":return t>=r;case"gt":return t>r;case"between":var n=M(r,2),i=n[0],a=n[1];return t>=i&&t<=a;case"beginsWith":return!Ve(t)&&t.startsWith(r);case"contains":return!Ve(t)&&t.indexOf(r)>-1;case"notContains":return Ve(t)||t.indexOf(r)===-1;default:return!1}},Rt=function(t){return t&&typeof t.copyOf=="function"},$f=new WeakSet;function Yf(t){$f.add(t)}var gi=new WeakMap,Aa=function(t,e,r,n,i){var a=i(r.name,t),o=[],s=a.copyOf(e,function(){});o.unshift({modelName:t,item:s,instance:s}),gi.has(r)||gi.set(r,Array.from(r.modelTopologicalOrdering.keys()));var c=gi.get(r);return o.sort(function(u,l){return c.indexOf(u.modelName)-c.indexOf(l.modelName)}),o},Wr,Qf=function(){return new Promise(function(t){var e=Tr.v4(),r,n=function(){Wr=!1,t(!0)},i=function(){return N(void 0,void 0,void 0,function(){return O(this,function(a){switch(a.label){case 0:return r&&r.result&&typeof r.result.close=="function"?[4,r.result.close()]:[3,2];case 1:a.sent(),a.label=2;case 2:return[4,indexedDB.deleteDatabase(e)];case 3:return a.sent(),Wr=!0,[2,t(!1)]}})})};if(Wr===!0)return i();if(Wr===!1||indexedDB===null)return n();r=indexedDB.open(e),r.onerror=n,r.onsuccess=i})},Gt,Xf=function(){return N(void 0,void 0,void 0,function(){var t,e,r,n,i,a,o;return O(this,function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),t=Tr.v4(),e="indexedDBFeatureProbeStore",r="idx",indexedDB===null?[2,!1]:Gt!==void 0?[2,Gt]:[4,new Promise(function(c){var u=indexedDB.open(t);u.onerror=function(){return c(!1)},u.onsuccess=function(){var l=u.result;c(l)},u.onupgradeneeded=function(l){var f,h=(f=l==null?void 0:l.target)===null||f===void 0?void 0:f.result;h.onerror=function(){return c(!1)};var d=h.createObjectStore(e,{autoIncrement:!0});d.createIndex(r,["id"])}})];case 1:if(n=s.sent(),!n)throw new Error("Could not open probe DB");return i=n.transaction(e,"readwrite"),a=i.objectStore(e),a.add({id:1}),i.commit(),[4,new Promise(function(c){var u=n.transaction(e,"readonly"),l=u.objectStore(e),f=l.index(r),h=f.get([1]);h.onerror=function(){return c(!1)},h.onsuccess=function(d){var p;c((p=d==null?void 0:d.target)===null||p===void 0?void 0:p.result)}})];case 2:return o=s.sent(),n&&typeof n.close=="function"?[4,n.close()]:[3,4];case 3:s.sent(),s.label=4;case 4:return[4,indexedDB.deleteDatabase(t)];case 5:return s.sent(),o===void 0?Gt=!0:Gt=!1,[3,7];case 6:return s.sent(),Gt=!1,[3,7];case 7:return[2,Gt]}})})},Zf=function(t){return _i.Buffer.from(new Lu().random(t).toString(),"hex")},ed=function(){return Zf(1).readUInt8(0)/255};function fu(t){var e=zf(ed);return function(){return e(t)}}function qo(){return typeof performance<"u"&&performance&&typeof performance.now=="function"?performance.now()|0:Date.now()}function du(t){return function(r,n){var i,a;try{for(var o=j(t),s=o.next();!s.done;s=o.next()){var c=s.value,u=c.field,l=c.sortDirection,f=l===Ji.ASCENDING?1:-1;if(r[u]<n[u])return-1*f;if(r[u]>n[u])return 1*f}}catch(h){i={error:h}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return 0}}function Sn(t,e,r){var n,i;r===void 0&&(r=!1);var a=t,o=e,s=function(g,v){return g==null&&v==null};if(a instanceof Object&&!(o instanceof Object)||!(a instanceof Object)&&o instanceof Object)return!1;if(!(a instanceof Object))return r&&s(a,o)?!0:a===o;if(Array.isArray(a)&&!Array.isArray(o)||Array.isArray(o)&&!Array.isArray(a))return!1;a instanceof Set&&o instanceof Set&&(a=ie(a),o=ie(o)),a instanceof Map&&o instanceof Map&&(a=Object.fromEntries(a),o=Object.fromEntries(o));var c=Object.keys(a),u=Object.keys(o);if(c.length!==u.length&&(!r||Array.isArray(a)))return!1;var l=c.length>=u.length?c:u;try{for(var f=j(l),h=f.next();!h.done;h=f.next()){var d=h.value,p=a[d],y=o[d];if(!Sn(p,y,r))return!1}}catch(g){n={error:g}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}return!0}function Ta(t,e){if(e&&t.length>1){if(e.sort){var r=Vi.getPredicates(e.sort);if(r.length){var n=du(r);t.sort(n)}}var i=e.page,a=i===void 0?0:i,o=e.limit,s=o===void 0?0:o,c=Math.max(0,a*s)||0,u=s>0?c+s:t.length;return t.slice(c,u)}return t}function td(t,e){return N(this,void 0,void 0,function(){var r,n,i,a,o,s;return O(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,7]),r=j(t),n=r.next(),c.label=1;case 1:return n.done?[3,4]:(i=n.value,[4,e(i)]);case 2:if(c.sent())return[2,!0];c.label=3;case 3:return n=r.next(),[3,1];case 4:return[3,7];case 5:return a=c.sent(),o={error:a},[3,7];case 6:try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(o)throw o.error}return[7];case 7:return[2,!1]}})})}function rd(t,e){return N(this,void 0,void 0,function(){var r,n,i,a,o,s;return O(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,7]),r=j(t),n=r.next(),c.label=1;case 1:return n.done?[3,4]:(i=n.value,[4,e(i)]);case 2:if(!c.sent())return[2,!1];c.label=3;case 3:return n=r.next(),[3,1];case 4:return[3,7];case 5:return a=c.sent(),o={error:a},[3,7];case 6:try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(o)throw o.error}return[7];case 7:return[2,!0]}})})}var nd=function(t){return!!/^\d{4}-\d{2}-\d{2}(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(t)},id=function(t){return!!/^\d{2}:\d{2}(:\d{2}(.\d+)?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(t)},ad=function(t){return!!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}(:\d{2}(.\d+)?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(t)},od=function(t){return!!/^\d+$/.exec(String(t))},sd=function(t){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.exec(t)},ud=function(t){try{return JSON.parse(t),!0}catch{return!1}},cd=function(t){try{return!!new URL(t)}catch{return!1}},ld=function(t){return!!/^\+?\d[\d\s-]+$/.exec(t)},fd=function(t){return!!/((^((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))$)|(^((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?$))$/.exec(t)},Bo=function(){function t(){var e=this;this.promise=new Promise(function(r,n){e.resolve=r,e.reject=n})}return t}(),dd=function(){function t(e){this.limitPromise=new Bo,this.raceInFlight=!1,this.callback=function(){},this.defaultErrorHandler=function(r){throw r===void 0&&(r="DeferredCallbackResolver error"),new Error(r)},this.callback=e.callback,this.errorHandler=e.errorHandler||this.defaultErrorHandler,this.maxInterval=e.maxInterval||2e3}return t.prototype.startTimer=function(){var e=this;this.timerPromise=new Promise(function(r,n){e.timer=setTimeout(function(){r(An.TIMER)},e.maxInterval)})},t.prototype.racePromises=function(){return N(this,void 0,void 0,function(){var e,r;return O(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),this.raceInFlight=!0,this.startTimer(),[4,Promise.race([this.timerPromise,this.limitPromise.promise])];case 1:return e=n.sent(),this.callback(),[3,4];case 2:return r=n.sent(),this.errorHandler(r),[3,4];case 3:return this.clear(),this.raceInFlight=!1,this.limitPromise=new Bo,[2,e];case 4:return[2]}})})},t.prototype.start=function(){this.raceInFlight||this.racePromises()},t.prototype.clear=function(){clearTimeout(this.timer)},t.prototype.resolve=function(){this.limitPromise.resolve(An.LIMIT)},t}();function hd(t,e,r){var n=e.concat(r),i;return Er(t,function(a){qf(a,n)},function(a){i=a}),i}var Ct=function(t,e){var r=t+"_"+e;return r},pd=function(t){var e=function(o){var s=M(o.properties.fields),c=s.slice(1);return c},r=t.filter(gd).map(e),n=function(o){return o.reduce(function(s,c){var u=new Set(c);if(s.length===0)return s.push(u),s;var l=s.findIndex(function(h){return ie(h).some(function(d){return u.has(d)})});if(l>-1){var f=new Set(ie(s[l],u));s[l]=f}else s.push(u);return s},[])},i=n(r),a=n(i);return a},Ia=function(t){var e,r=(e=t==null?void 0:t.attributes)===null||e===void 0?void 0:e.find(Fn);return r},Se=function(t){var e=Ia(t);return e&&Ln(e)?e.properties.fields:[Rr]},hu=function(t,e){return e.map(function(r){return t[r]})},vd=function(t,e){var r={};return e.forEach(function(n){return r[n]=t[n]}),r},pu=function(t){var e=Ia(t);return!(e&&Ln(e))},yd=function(t){var e=Ia(t);return e&&Ln(e)?e.properties.fields[0]===Rr:!1},vu=function(t){var e={},r={};return Object.keys(t.models).forEach(function(n){var i,a;e[n]={indexes:[],relationTypes:[]},r[n]={};var o=t.models[n];if(Object.keys(o.fields).forEach(function(f){var h=o.fields[f];if(typeof h.type=="object"&&"model"in h.type){var d=h.association.connectionType;if(e[n].relationTypes.push({fieldName:h.name,modelName:h.type.model,relationType:d,targetName:h.association.targetName,targetNames:h.association.targetNames,associatedWith:h.association.associatedWith}),d==="BELONGS_TO"){var p=yu(h.association);if(p){var y=Gi(p),g=e[n].indexes.find(function(v){var m=M(v,1),S=m[0];return S===y});g||e[n].indexes.push([y,p])}}}}),o.attributes){r[n].compositeKeys=pd(o.attributes);var s=function(f){if(!Fn(f))return"continue";var h=f.properties.fields;if(Ln(f))return r[n].primaryKey=h,"continue";var d=Gi(h),p=e[n].indexes.find(function(y){var g=M(y,1),v=g[0];return v===d});p||e[n].indexes.push([d,h])};try{for(var c=j(o.attributes),u=c.next();!u.done;u=c.next()){var l=u.value;s(l)}}catch(f){i={error:f}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}r[n].primaryKey||(r[n].primaryKey=[Rr]),e[n].indexes.push(["byPk",r[n].primaryKey,{unique:!0}])}),[e,r]},yu=function(t){var e=t==null?void 0:t.targetName,r=t==null?void 0:t.targetNames;return Array.isArray(r)?r:typeof e=="string"?[e]:void 0},Gi=function(t){return t.reduce(function(e,r,n){return n===0?r:""+e+cu+r},"")},En=function(t,e){return t.length!==e.length?!1:t.every(function(r,n){return r===e[n]})},dn=function(t,e){var r,n,i=(n=(r=t==null?void 0:t.keys)===null||r===void 0?void 0:r[e])===null||n===void 0?void 0:n.primaryKey;return i||[Rr]},md=function(t){var e,r,n=(e=t.attributes)===null||e===void 0?void 0:e.find(function(s){return s.type==="model"}),i=(r=n==null?void 0:n.properties)===null||r===void 0?void 0:r.timestamps,a={createdAt:"createdAt",updatedAt:"updatedAt"},o=i||{};return K(K({},a),o)};function mu(t){return t&&t.pluralName!==void 0}function Hi(t){return mu(t)&&t.attributes!==void 0}function Oa(t){return(t==null?void 0:t.targetName)||(t==null?void 0:t.targetNames)}function Uo(t,e){var r,n;return(n=(r=t==null?void 0:t.fields[e])===null||r===void 0?void 0:r.association)===null||n===void 0?void 0:n.connectionType}function Fn(t){return t.type==="key"&&t.properties&&t.properties.fields&&t.properties.fields.length>0}function Ln(t){return Fn(t)&&t.properties.name===void 0}function gd(t){return Fn(t)&&t.properties.name!==void 0&&t.properties.fields.length>2}var Je;(function(t){t.CUSTOM="custom",t.OWNER="owner",t.GROUPS="groups",t.PRIVATE="private",t.PUBLIC="public"})(Je||(Je={}));var _e;(function(t){t.FUNCTION="function",t.USER_POOLS="userPools",t.OIDC="oidc",t.IAM="iam",t.API_KEY="apiKey"})(_e||(_e={}));var Bt;(function(t){t[t.ID=0]="ID",t[t.String=1]="String",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Boolean=4]="Boolean",t[t.AWSDate=5]="AWSDate",t[t.AWSTime=6]="AWSTime",t[t.AWSDateTime=7]="AWSDateTime",t[t.AWSTimestamp=8]="AWSTimestamp",t[t.AWSEmail=9]="AWSEmail",t[t.AWSJSON=10]="AWSJSON",t[t.AWSURL=11]="AWSURL",t[t.AWSPhone=12]="AWSPhone",t[t.AWSIPAddress=13]="AWSIPAddress"})(Bt||(Bt={}));(function(t){function e(n){switch(n){case"Boolean":return"boolean";case"ID":case"String":case"AWSDate":case"AWSTime":case"AWSDateTime":case"AWSEmail":case"AWSURL":case"AWSPhone":case"AWSIPAddress":return"string";case"Int":case"Float":case"AWSTimestamp":return"number";case"AWSJSON":return"object";default:throw new Error("Invalid scalar type")}}t.getJSType=e;function r(n){switch(n){case"AWSDate":return nd;case"AWSTime":return id;case"AWSDateTime":return ad;case"AWSTimestamp":return od;case"AWSEmail":return sd;case"AWSJSON":return ud;case"AWSURL":return cd;case"AWSPhone":return ld;case"AWSIPAddress":return fd;default:return}}t.getValidationFunction=r})(Bt||(Bt={}));function gu(t){return t&&Bt[t]!==void 0}function bu(t){var e="model";return!!(t&&t[e])}function wn(t){var e="nonModel";return!!(t&&t[e])}function bd(t){var e="enum";return!!(t&&t[e])}function Vr(t,e){var r=Se(e);return typeof t=="object"&&t&&r.every(function(n){return t[n]!==void 0})}var X;(function(t){t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(X||(X={}));function dr(t){return t&&t.field!==void 0}function Cr(t){return t&&t.type!==void 0}var ht;(function(t){t[t.FIRST=0]="FIRST",t[t.LAST=1]="LAST"})(ht||(ht={}));var Ji;(function(t){t.ASCENDING="ASCENDING",t.DESCENDING="DESCENDING"})(Ji||(Ji={}));var Ar;(function(t){t.DEFAULT="DEFAULT",t.MULTI_AUTH="MULTI_AUTH"})(Ar||(Ar={}));var $i;(function(t){t.CREATE="CREATE",t.READ="READ",t.UPDATE="UPDATE",t.DELETE="DELETE"})($i||($i={}));var xr;(function(t){t.sync="sync",t.mutate="mutate",t.subscribe="subscribe"})(xr||(xr={}));var Ko=Symbol("DISCARD"),An;(function(t){t.LIMIT="LIMIT",t.TIMER="TIMER"})(An||(An={}));var Sd=function(){function t(){this.__isPredicateInternalsKeySentinel=!0}return t}();function zo(t){return t.allow==="private"&&!t.provider?_e.USER_POOLS:t.allow==="public"&&!t.provider?_e.API_KEY:t.provider}function Ed(t){var e=[Je.CUSTOM,Je.OWNER,Je.GROUPS,Je.PRIVATE,Je.PUBLIC],r=[_e.FUNCTION,_e.USER_POOLS,_e.OIDC,_e.IAM,_e.API_KEY];return ie(t).sort(function(n,i){return n.allow===i.allow?r.indexOf(zo(n))-r.indexOf(zo(i)):e.indexOf(n.allow)-e.indexOf(i.allow)})}function wd(t){var e=t.rules,r=t.currentUser,n=new Set;return e.forEach(function(i){switch(i.allow){case Je.CUSTOM:(!i.provider||i.provider===_e.FUNCTION)&&n.add(Ne.AWS_LAMBDA);break;case Je.GROUPS:case Je.OWNER:{r&&(i.provider===_e.USER_POOLS?n.add(Ne.AMAZON_COGNITO_USER_POOLS):i.provider===_e.OIDC&&n.add(Ne.OPENID_CONNECT));break}case Je.PRIVATE:{r&&(!i.provider||i.provider===_e.USER_POOLS?n.add(Ne.AMAZON_COGNITO_USER_POOLS):i.provider===_e.IAM&&n.add(Ne.AWS_IAM));break}case Je.PUBLIC:{i.provider===_e.IAM?n.add(Ne.AWS_IAM):(!i.provider||i.provider===_e.API_KEY)&&n.add(Ne.API_KEY);break}}}),Array.from(n)}var Ad=function(t){return function(e){var r=e.schema,n=e.modelName;return N(void 0,void 0,void 0,function(){var i,a,o,s,c;return O(this,function(u){switch(u.label){case 0:t.Auth=t.Auth||St,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,t.Auth.currentAuthenticatedUser()];case 2:return i=u.sent(),[3,4];case 3:return u.sent(),[3,4];case 4:return a=r.namespaces.user.models[n].attributes,a&&(o=a.find(function(l){return l.type==="auth"}),!((c=o==null?void 0:o.properties)===null||c===void 0)&&c.rules)?(s=Ed(o.properties.rules),[2,wd({currentUser:i,rules:s})]):[2,[]]}})})}},Yi={exports:{}};(function(t,e){(function(r,n){r(e,t)})(function(r,n){function i(v){return typeof Symbol=="function"&&!!Symbol[v]}function a(v){return i(v)?Symbol[v]:"@@"+v}typeof Symbol=="function"&&!Symbol.observable&&(Symbol.observable=Symbol("observable"));function o(v){setTimeout(function(){throw v})}function s(v,m){var S=v[m];if(S!=null){if(typeof S!="function")throw new TypeError(S+" is not a function");return S}}function c(v){var m=v.constructor;return m!==void 0&&(m=m[a("species")],m===null&&(m=void 0)),m!==void 0?m:g}function u(v,m){Object.keys(m).forEach(function(S){var b=Object.getOwnPropertyDescriptor(m,S);b.enumerable=!1,Object.defineProperty(v,S,b)})}function l(v){var m=v._cleanup;if(m){v._cleanup=void 0;try{m()}catch(S){o(S)}}}function f(v){return v._observer===void 0}function h(v){f(v)||(v._observer=void 0,l(v))}function d(v){return function(){v.unsubscribe()}}function p(v,m){if(Object(v)!==v)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=v;try{var S=s(v,"start");S&&S.call(v,this)}catch(E){o(E)}if(!f(this)){v=new y(this);try{var b=m.call(void 0,v);if(b!=null){if(typeof b.unsubscribe=="function")b=d(b);else if(typeof b!="function")throw new TypeError(b+" is not a function");this._cleanup=b}}catch(E){v.error(E);return}f(this)&&l(this)}}u(p.prototype={},{get closed(){return f(this)},unsubscribe:function(){h(this)}});function y(v){this._subscription=v}u(y.prototype={},{get closed(){return f(this._subscription)},next:function(v){var m=this._subscription;if(!f(m)){var S=m._observer;try{var b=s(S,"next");b&&b.call(S,v)}catch(E){o(E)}}},error:function(v){var m=this._subscription;if(f(m)){o(v);return}var S=m._observer;m._observer=void 0;try{var b=s(S,"error");if(b)b.call(S,v);else throw v}catch(E){o(E)}l(m)},complete:function(){var v=this._subscription;if(!f(v)){var m=v._observer;v._observer=void 0;try{var S=s(m,"complete");S&&S.call(m)}catch(b){o(b)}l(v)}}});function g(v){if(!(this instanceof g))throw new TypeError("Observable cannot be called as a function");if(typeof v!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=v}u(g.prototype,{subscribe:function(v){for(var m=[],S=1;S<arguments.length;++S)m.push(arguments[S]);return typeof v=="function"?v={next:v,error:m[0],complete:m[1]}:(typeof v!="object"||v===null)&&(v={}),new p(v,this._subscriber)},forEach:function(v){var m=this;return new Promise(function(S,b){if(typeof v!="function")return Promise.reject(new TypeError(v+" is not a function"));m.subscribe({_subscription:null,start:function(E){if(Object(E)!==E)throw new TypeError(E+" is not an object");this._subscription=E},next:function(E){var A=this._subscription;if(!A.closed)try{v(E)}catch(w){b(w),A.unsubscribe()}},error:b,complete:S})})},map:function(v){var m=this;if(typeof v!="function")throw new TypeError(v+" is not a function");var S=c(this);return new S(function(b){return m.subscribe({next:function(E){if(!b.closed){try{E=v(E)}catch(A){return b.error(A)}b.next(E)}},error:function(E){b.error(E)},complete:function(){b.complete()}})})},filter:function(v){var m=this;if(typeof v!="function")throw new TypeError(v+" is not a function");var S=c(this);return new S(function(b){return m.subscribe({next:function(E){if(!b.closed){try{if(!v(E))return}catch(A){return b.error(A)}b.next(E)}},error:function(E){b.error(E)},complete:function(){b.complete()}})})},reduce:function(v){var m=this;if(typeof v!="function")throw new TypeError(v+" is not a function");var S=c(this),b=arguments.length>1,E=!1,A=arguments[1],w=A;return new S(function(T){return m.subscribe({next:function(I){if(!T.closed){var x=!E;if(E=!0,!x||b)try{w=v(w,I)}catch(C){return T.error(C)}else w=I}},error:function(I){T.error(I)},complete:function(){if(!E&&!b)return T.error(new TypeError("Cannot reduce an empty sequence"));T.next(w),T.complete()}})})}}),Object.defineProperty(g.prototype,a("observable"),{value:function(){return this},writable:!0,configurable:!0}),u(g,{from:function(v){var m=typeof this=="function"?this:g;if(v==null)throw new TypeError(v+" is not an object");var S=s(v,a("observable"));if(S){var b=S.call(v);if(Object(b)!==b)throw new TypeError(b+" is not an object");return b.constructor===m?b:new m(function(E){return b.subscribe(E)})}if(i("iterator")&&(S=s(v,a("iterator"))))return new m(function(E){for(var A=S.call(v)[Symbol.iterator](),w;w=A.next(),!w.done;){var T=w.value;if(E.next(T),E.closed)return}E.complete()});if(Array.isArray(v))return new m(function(E){for(var A=0;A<v.length;++A)if(E.next(v[A]),E.closed)return;E.complete()});throw new TypeError(v+" is not observable")},of:function(){for(var v=[],m=0;m<arguments.length;++m)v.push(arguments[m]);var S=typeof this=="function"?this:g;return new S(function(b){for(var E=0;E<v.length;++E)if(b.next(v[E]),b.closed)return;b.complete()})}}),Object.defineProperty(g,a("species"),{get:function(){return this},configurable:!0}),Object.defineProperty(g,"extensions",{value:{observableSymbol:a("observable"),setHostReportError:function(v){o=v}}}),r.Observable=g})})(Yi,Yi.exports);var Td=Yi.exports,Id=Td.Observable,Od=Id;function Nd(t,e){Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);n.enumerable=!1,Object.defineProperty(t,r,n)})}function bi(t,e,r){if(t._observer)Wo(t._observer,e,r);else if(t._observers){var n=[];t._observers.forEach(function(i){n.push(i)}),n.forEach(function(i){Wo(i,e,r)})}}function Wo(t,e,r){if(!t.closed)switch(e){case"next":return t.next(r);case"error":return t.error(r);case"complete":return t.complete(r)}}function Na(t){return t._observer||t._observers&&t._observers.size>0}function _d(t,e){t._observers?t._observers.add(e):t._observer?(t._observers=new Set,t._observers.add(t._observer),t._observers.add(e),t._observer=null):t._observer=e}function Cd(t,e){t._observers?t._observers.delete(e):t._observer===e&&(t._observer=null)}function xd(t,e){!Na(t)&&e&&e.start&&e.start()}function Pd(t,e){!Na(t)&&e&&e.pause&&e.pause()}function Su(t){var e=this;this._observer=null,this._observers=null,this._observable=new Od(function(r){return xd(e,t),_d(e,r),function(){Cd(e,r),Pd(e,t)}})}Nd(Su.prototype,{get observable(){return this._observable},get observed(){return Na(this)},next:function(t){bi(this,"next",t)},error:function(t){bi(this,"error",t)},complete:function(t){bi(this,"complete",t)}});var kd=Su;const Dd=aa(kd);var Rd=new he("DataStore"),Qi;(function(t){t.LIST="query",t.CREATE="mutation",t.UPDATE="mutation",t.DELETE="mutation",t.GET="query"})(Qi||(Qi={}));var J;(function(t){t.CREATE="Create",t.UPDATE="Update",t.DELETE="Delete",t.GET="Get"})(J||(J={}));var Md={_version:void 0,_lastChangedAt:void 0,_deleted:void 0},Fd=Object.keys(Md);function Ld(){return Fd}function _a(t,e){var r=Eu(e),n=Ud(t,e),i=jd(e,r),a=Object.values(r).map(function(s){var c=s.name;return c}).concat(i).concat(n);mu(e)&&(a=a.concat(Ld()).concat(Bd(e,t)));var o=a.join(`
`);return o}function jd(t,e){var r=qd(t);return!e.owner&&r.includes("owner")?["owner"]:[]}function qd(t){var e=[];return Hi(t)&&t.attributes.forEach(function(r){if(r.properties&&r.properties.rules){var n=r.properties.rules.find(function(i){return i.allow==="owner"});n&&n.ownerField&&e.push(n.ownerField)}}),e}function Eu(t){var e=t.fields,r=Object.values(e).filter(function(n){return!!(gu(n.type)||bd(n.type))}).reduce(function(n,i){return n[i.name]=i,n},{});return r}function Bd(t,e){var r=[];return Object.values(t.fields).filter(function(n){var i=n.association;return i&&Object.keys(i).length}).forEach(function(n){var i=n.name,a=n.association,o=(a||{}).connectionType;switch(o){case"HAS_ONE":case"HAS_MANY":break;case"BELONGS_TO":if(Oa(a))if(a.targetNames&&a.targetNames.length>0){var s=M(vu(e),1),c=s[0],u=t.fields[i].type.model,l=c[u].indexes.find(function(d){var p=M(d,1),y=p[0];return y==="byPk"}),f=l&&l[1],h=f==null?void 0:f.join(" ");r.push(i+" { "+h+" _deleted }")}else r.push(i+" { id _deleted }");break;default:throw new Error("Invalid connection type "+o)}}),r}function Ud(t,e){var r=[];return Object.values(e.fields).forEach(function(n){var i=n.name,a=n.type;if(wn(a)){var o=t.nonModels[a.nonModel],s=Object.values(Eu(o)).map(function(u){var l=u.name;return l}),c=[];Object.values(o.fields).forEach(function(u){var l=u.type,f=u.name;if(wn(l)){var h=t.nonModels[l.nonModel];c.push(f+" { "+_a(t,h)+" }")}}),r.push(i+" { "+s.join(" ")+" "+c.join(" ")+" }")}}),r}function wu(t){var e=[].concat(t.attributes||[]).find(function(o){return o&&o.type==="auth"}),r=(e||{}).properties,n=(r===void 0?{}:r).rules,i=n===void 0?[]:n,a=[];return i.forEach(function(o){var s=o.identityClaim,c=s===void 0?"cognito:username":s,u=o.ownerField,l=u===void 0?"owner":u,f=o.operations,h=f===void 0?["create","update","delete","read"]:f,d=o.provider,p=d===void 0?"userPools":d,y=o.groupClaim,g=y===void 0?"cognito:groups":y,v=o.allow,m=v===void 0?"iam":v,S=o.groups,b=S===void 0?[]:S,E=o.groupsField,A=E===void 0?"":E,w=h.includes("read"),T=m==="owner";if(!(!w&&!T)){var I={identityClaim:c,ownerField:l,provider:p,groupClaim:g,authStrategy:m,groups:b,groupsField:A,areSubscriptionsPublic:!1};if(T){var x=[].concat(t.attributes||[]).find(function(R){return R&&R.type==="model"}),C=(x||{}).properties,_=(C===void 0?{}:C).subscriptions,P=(_===void 0?{}:_).level,D=P===void 0?"on":P;I.areSubscriptionsPublic=!h.includes("read")||D==="public"}if(T){a.push(I);return}a.unshift(I)}}),a}function Kd(t,e,r,n,i,a){a===void 0&&(a=!1);var o=_a(t,e),s=e.name,c="on"+r+s,u=[],l=[];a&&(u.push("$filter: ModelSubscription"+s+"FilterInput"),l.push("filter: $filter")),n&&(u.push("$"+i+": String!"),l.push(i+": $"+i));var f=u.length?"("+u.join(",")+")":"",h=l.length?"("+l.join(",")+")":"";return[r,c,"subscription operation"+f+`{
			`+c+h+`{
				`+o+`
			}
		}`]}function Sr(t,e,r){var n=_a(t,e),i=e.name,a=e.pluralName,o,s,c,u;switch(r){case"LIST":o="sync"+a,s="($limit: Int, $nextToken: String, $lastSync: AWSTimestamp, $filter: Model"+i+"FilterInput)",c="(limit: $limit, nextToken: $nextToken, lastSync: $lastSync, filter: $filter)",n=`items {
							`+n+`
						}
						nextToken
						startedAt`;break;case"CREATE":o="create"+i,s="($input: Create"+i+"Input!)",c="(input: $input)",u=J.CREATE;break;case"UPDATE":o="update"+i,s="($input: Update"+i+"Input!, $condition: Model"+i+"ConditionInput)",c="(input: $input, condition: $condition)",u=J.UPDATE;break;case"DELETE":o="delete"+i,s="($input: Delete"+i+"Input!, $condition: Model"+i+"ConditionInput)",c="(input: $input, condition: $condition)",u=J.DELETE;break;case"GET":o="get"+i,s="($id: ID!)",c="(id: $id)",u=J.GET;break;default:throw new Error("Invalid graphQlOpType "+r)}return[[u,o,Qi[r]+" operation"+s+`{
		`+o+c+`{
			`+n+`
		}
	}`]]}function Au(t,e,r,n,i,a,o,s,c){var u;switch(r){case X.INSERT:u=J.CREATE;break;case X.UPDATE:u=J.UPDATE;break;case X.DELETE:u=J.DELETE;break;default:throw new Error("Invalid opType "+r)}var l=function(p,y){var g=p&&y!==null&&typeof y=="object"&&e.fields[p]&&e.fields[p].type==="AWSJSON";return g?JSON.stringify(y):y},f=it(e,i),h=X.INSERT&&c?{id:c}:{},d=s(o,K(K({},h),{data:JSON.stringify(i,l),modelId:f,model:n.name,operation:u,condition:JSON.stringify(a)}));return d}function zd(t,e){var r={};if(!t||!Array.isArray(t.predicates))return r;var n=Se(e);return Mr(t,n)}function Mr(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=!0);var n={};if(!t||!Array.isArray(t.predicates))return n;var i=t.type,a=t.predicates,o=i==="and"||i==="or";n[i]=o?[]:{};var s=[];if(a.forEach(function(l){var f,h;if(dr(l)){var d=l.field,p=l.operator,y=l.operand;if(e.includes(d))return;var g=(f={},f[d]=(h={},h[p]=y,h),f);s.push(g);return}var v=Mr(l,e,!1);Object.keys(v).length>0&&s.push(v)}),s.length===1){var c=M(s,1),u=c[0];if(o&&!r||o&&r&&("and"in u||"or"in u))return delete n[i],Object.assign(n,u),n}if(s.forEach(function(l){o?n[i].push(l):n[i]=l}),o){if(n[i].length===0)return{}}else if(Object.keys(n[i]).length===0)return{};return n}function Wd(t){var e=new Set;if(!t||!Array.isArray(t.predicates))return e;for(var r=t.predicates,n=ie(r);n.length>0;){var i=n.pop();dr(i)?e.add(i.field):Cr(i)&&n.push.apply(n,ie(i.predicates))}return e}function Vd(t){var e,r,n=wu(t),i=new Set;try{for(var a=j(n),o=a.next();!o.done;o=a.next()){var s=o.value;s.groupsField&&!s.groups.length?i.add(s.groupsField):s.ownerField&&i.add(s.ownerField)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i}function Gd(t){if(!t||!Array.isArray(t.predicates))return 0;for(var e=0,r=[t];r.length>0;){var n=r.pop();if(Cr(n)){var i=n.predicates,a=n.type;a==="or"&&i.length>1&&(e+=i.length),r.push.apply(r,ie(i))}}return e||1}function Hd(t){if(!t||!Array.isArray(t.predicates))return null;for(var e=Mr(t),r=[e],n=function(f){var h,d,p={};try{for(var y=j(f),g=y.next();!g.done;g=y.next()){var v=g.value,m=M(Object.keys(v),1),S=m[0];if(p[S])return S;p[S]=!0}}catch(b){h={error:b}}finally{try{g&&!g.done&&(d=y.return)&&d.call(y)}finally{if(h)throw h.error}}return null};r.length>0;){var i=r.pop(),a=M(Object.keys(i),1),o=a[0],s=i[o];if(!Array.isArray(s))return null;var c=s.filter(function(f){return!Array.isArray(Object.values(f)[0])}),u=s.filter(function(f){return Array.isArray(Object.values(f)[0])});if(o==="and"){var l=n(c);if(l)return l}r.push.apply(r,ie(u))}return null}var Me;(function(t){t[t.UnknownField=0]="UnknownField",t[t.MaxAttributes=1]="MaxAttributes",t[t.MaxCombinations=2]="MaxCombinations",t[t.RepeatedFieldname=3]="RepeatedFieldname",t[t.NotGroup=4]="NotGroup",t[t.FieldNotInType=5]="FieldNotInType"})(Me||(Me={}));function Jd(t,e,r){var n=Wd(r),i=ie(n).join(", "),a=Vd(e),o=ie(a).join(", "),s=Gd(r),c=Hd(r);switch(t){case Me.UnknownField:return"Your API was generated with an older version of the CLI that doesn't support backend subscription filtering.To enable backend subscription filtering, upgrade your Amplify CLI to the latest version and push your app by running `amplify upgrade` followed by `amplify push`";case Me.MaxAttributes:{var u="Your selective sync expression for "+e.name+" contains "+n.size+" different model fields: "+i+`.

`;return a.size>0&&(u+=`Note: the number of fields you can use with selective sync is affected by @auth rules configured on the model.

Dynamic auth modes, such as owner auth and dynamic group auth each utilize 1 field.
`+("You currently have "+a.size+" dynamic auth mode(s) configured on this model: "+o+".")),u}case Me.MaxCombinations:{var u="Your selective sync expression for "+e.name+" contains "+s+` field combinations (total number of predicates in an OR expression).

`;return a.size>0&&(u+=`Note: the number of fields you can use with selective sync is affected by @auth rules configured on the model.

Dynamic auth modes, such as owner auth and dynamic group auth factor in to the number of combinations you're using.
`+("You currently have "+a.size+" dynamic auth mode(s) configured on this model: "+o+".")),u}case Me.RepeatedFieldname:return"Your selective sync expression for "+e.name+" contains multiple entries for "+c+" in the same AND group.";case Me.NotGroup:return"Your selective sync expression for "+e.name+" uses a `not` group. If you'd like to filter subscriptions in the backend, rewrite your expression using `ne` or `notContains` operators.";case Me.FieldNotInType:return""}}function Vo(t,e){var r=t[e.groupClaim]||[];if(typeof r=="string"){var n=void 0;try{n=JSON.parse(r)}catch{n=r}r=[].concat(n)}return r}function Ca(t){var e=t.authModeStrategy,r=t.defaultAuthMode,n=t.modelName,i=t.schema;return N(this,void 0,void 0,function(){var a,o,s,c=this;return O(this,function(u){switch(u.label){case 0:a=Object.values($i),o={CREATE:[],READ:[],UPDATE:[],DELETE:[]},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(a.map(function(l){return N(c,void 0,void 0,function(){var f;return O(this,function(h){switch(h.label){case 0:return[4,e({schema:i,modelName:n,operation:l})];case 1:return f=h.sent(),typeof f=="string"?o[l]=[f]:Array.isArray(f)&&f.length?o[l]=f:o[l]=[r],[2]}})})}))];case 2:return u.sent(),[3,4];case 3:return s=u.sent(),Rd.debug("Error getting auth modes for model: "+n,s),[3,4];case 4:return[2,o]}})})}function Go(t){var e=["Request failed with status code 401","Request failed with status code 403"],r;return t&&t.errors?r=t.errors.find(function(n){return e.includes(n.message)}):t&&t.message&&(r=t),r?r.message:null}function Ho(t){var e=Object.values(lt),r=t&&t.message&&e.find(function(n){return t.message.includes(n)});return r||null}function Tn(t,e){return e===void 0&&(e={}),N(this,void 0,void 0,function(){var r,n,i,a;return O(this,function(o){switch(o.label){case 0:if(t!==Ne.AWS_LAMBDA)return[3,6];if(r=e.authProviders,n=(r===void 0?{functionAuthProvider:null}:r).functionAuthProvider,!(n&&typeof n=="function"))return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n()];case 2:return i=o.sent().token,[2,i];case 3:throw a=o.sent(),new Error("Error retrieving token from `functionAuthProvider`: "+a);case 4:return[3,6];case 5:throw new Error("You must provide a `functionAuthProvider` function to `DataStore.configure` when using "+Ne.AWS_LAMBDA);case 6:return[2]}})})}function it(t,e){var r=Se(t),n=r.map(function(i){return e[i]}).join(cu);return n}const $d=(t,e)=>e.some(r=>t instanceof r);let Jo,$o;function Yd(){return Jo||(Jo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qd(){return $o||($o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tu=new WeakMap,Xi=new WeakMap,Iu=new WeakMap,Si=new WeakMap,xa=new WeakMap;function Xd(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(dt(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&Tu.set(r,t)}).catch(()=>{}),xa.set(e,t),e}function Zd(t){if(Xi.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Xi.set(t,e)}let Zi={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Xi.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Iu.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return dt(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eh(t){Zi=t(Zi)}function th(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Ei(this),e,...r);return Iu.set(n,e.sort?e.sort():[e]),dt(n)}:Qd().includes(t)?function(...e){return t.apply(Ei(this),e),dt(Tu.get(this))}:function(...e){return dt(t.apply(Ei(this),e))}}function rh(t){return typeof t=="function"?th(t):(t instanceof IDBTransaction&&Zd(t),$d(t,Yd())?new Proxy(t,Zi):t)}function dt(t){if(t instanceof IDBRequest)return Xd(t);if(Si.has(t))return Si.get(t);const e=rh(t);return e!==t&&(Si.set(t,e),xa.set(e,t)),e}const Ei=t=>xa.get(t);function nh(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),s=dt(o);return n&&o.addEventListener("upgradeneeded",c=>{n(dt(o.result),c.oldVersion,c.newVersion,dt(o.transaction))}),r&&o.addEventListener("blocked",()=>r()),s.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),s}function ih(t,{blocked:e}={}){const r=indexedDB.deleteDatabase(t);return e&&r.addEventListener("blocked",()=>e()),dt(r).then(()=>{})}const ah=["get","getKey","getAll","getAllKeys","count"],oh=["put","add","delete","clear"],wi=new Map;function Yo(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wi.get(e))return wi.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=oh.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||ah.includes(r)))return;const a=async function(o,...s){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;n&&(u=u.index(s.shift()));const l=await u[r](...s);return i&&await c.done,l};return wi.set(e,a),a}eh(t=>({...t,get:(e,r,n)=>Yo(e,r)||t.get(e,r,n),has:(e,r)=>!!Yo(e,r)||t.has(e,r)}));var jn=function(){function t(e,r){if(!Uo(e.schema,r))throw new Error(e.schema.name+"."+r+" is not a relationship.");this.localModel=e,this._field=r}return t.from=function(e,r){return Uo(e.schema,r)?new this(e,r):null},t.allFrom=function(e){var r,n,i=[];try{for(var a=j(Object.keys(e.schema.fields)),o=a.next();!o.done;o=a.next()){var s=o.value,c=t.from(e,s);c&&i.push(c)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},Object.defineProperty(t.prototype,"localDefinition",{get:function(){return this.localModel.schema},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"field",{get:function(){return this._field},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localConstructor",{get:function(){return this.localModel.builder},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.localAssocation.connectionType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localAssocation",{get:function(){return this.localDefinition.fields[this.field].association},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localJoinFields",{get:function(){return this.localAssocation.targetName?[this.localAssocation.targetName]:this.localAssocation.targetNames?this.localAssocation.targetNames:this.localPKFields},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localPKFields",{get:function(){return this.localModel.pkField},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remoteDefinition",{get:function(){var e;return(e=this.remoteModelType.modelConstructor)===null||e===void 0?void 0:e.schema},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remoteModelType",{get:function(){return this.localDefinition.fields[this.field].type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remoteModelConstructor",{get:function(){return this.remoteModelType.modelConstructor.builder},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remotePKFields",{get:function(){var e;return((e=this.remoteModelType.modelConstructor)===null||e===void 0?void 0:e.pkField)||["id"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localAssociatedWith",{get:function(){if(this.localAssocation.connectionType==="HAS_MANY"||this.localAssocation.connectionType==="HAS_ONE")return Array.isArray(this.localAssocation.associatedWith)?this.localAssocation.associatedWith:[this.localAssocation.associatedWith]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"explicitRemoteAssociation",{get:function(){var e;if(this.localAssociatedWith)return this.localAssociatedWith.length===1?(e=this.remoteDefinition.fields[this.localAssociatedWith[0]])===null||e===void 0?void 0:e.association:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remoteJoinFields",{get:function(){var e,r,n;return!((e=this.explicitRemoteAssociation)===null||e===void 0)&&e.targetName?[this.explicitRemoteAssociation.targetName]:!((r=this.explicitRemoteAssociation)===null||r===void 0)&&r.targetNames?(n=this.explicitRemoteAssociation)===null||n===void 0?void 0:n.targetNames:this.localAssociatedWith?this.localAssociatedWith:this.remotePKFields},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this.localJoinFields.length>0&&this.remoteJoinFields.length>0},enumerable:!0,configurable:!0}),t.prototype.createLocalFKObject=function(e){for(var r={},n=0;n<this.localJoinFields.length;n++)r[this.localJoinFields[n]]=e[this.remoteJoinFields[n]];return r},t.prototype.createRemoteQueryObject=function(e){for(var r={},n=0;n<this.remoteJoinFields.length;n++){var i=e[this.localJoinFields[n]];if(i==null)return null;r[this.remoteJoinFields[n]]=e[this.localJoinFields[n]]}return r},t}(),Ai=new he("DataStore"),Qo="amplify-datastore",Ou=function(){function t(){this.dbName=Qo}return t.prototype.setUp=function(e,r,n,i,a){return N(this,void 0,void 0,function(){var o,s,c=this;return O(this,function(u){switch(u.label){case 0:return[4,this.preSetUpChecks()];case 1:return u.sent(),this.initPromise?[3,2]:(this.initPromise=new Promise(function(l,f){c.resolve=l,c.reject=f}),[3,4]);case 2:return[4,this.initPromise];case 3:return u.sent(),[2];case 4:a&&(this.dbName=Qo+"-"+a),this.schema=e,this.namespaceResolver=r,this.modelInstanceCreator=n,this.getModelConstructorByModelName=i,u.label=5;case 5:return u.trys.push([5,8,,9]),this.db?[3,7]:(o=this,[4,this.initDb()]);case 6:o.db=u.sent(),this.resolve(),u.label=7;case 7:return[3,9];case 8:return s=u.sent(),this.reject(s),[3,9];case 9:return[2]}})})},t.prototype.getStorenameForModel=function(e){var r=this.namespaceResolver(e),n=e.name;return Ct(r,n)},t.prototype.getIndexKeyValuesFromModel=function(e){var r=Object.getPrototypeOf(e).constructor,n=this.namespaceResolver(r),i=dn(this.schema.namespaces[n],r.name);return hu(e,i)},t.prototype.saveMetadata=function(e){var r=this,n=Object.getPrototypeOf(e).constructor,i=this.getStorenameForModel(n),a=this.namespaceResolver(n),o=Aa(n.name,e,this.schema.namespaces[a],this.modelInstanceCreator,this.getModelConstructorByModelName),s=new Set,c=Object.values(o).map(function(l){var f=l.modelName,h=l.item,d=l.instance,p=Ct(a,f);s.add(p);var y=dn(r.schema.namespaces[a],f);return{storeName:p,item:h,instance:d,keys:y}}),u=this.getIndexKeyValuesFromModel(e);return{storeName:i,set:s,connectionStoreNames:c,modelKeyValues:u}},t.prototype.validateSaveCondition=function(e,r){if(e&&r){var n=ne.getPredicates(e),i=n,a=i.predicates,o=i.type,s=qt(r,o,a);if(!s){var c="Conditional update failed";throw Ai.error(c,{model:r,condition:a}),new Error(c)}}},t.prototype.load=function(e,r,n){return N(this,void 0,void 0,function(){var i,a,o,s,c=this;return O(this,function(u){return i=this.schema.namespaces[e],a=i.relationships[r].relationTypes,o=a.map(function(l){var f=l.modelName;return Ct(e,f)}),s=this.getModelConstructorByModelName(e,r),o.length===0?[2,n.map(function(l){return c.modelInstanceCreator(s,l)})]:[2,n.map(function(l){return c.modelInstanceCreator(s,l)})]})})},t.prototype.keyValueFromPredicate=function(e,r){var n,i,a=e.predicates;if(a.length===r.length){var o=[],s=function(f){var h=a.find(function(d){return dr(d)&&d.field===f&&d.operator==="eq"&&d.operand!==null&&d.operand!==void 0});h&&o.push(h.operand)};try{for(var c=j(r),u=c.next();!u.done;u=c.next()){var l=u.value;s(l)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return o.length===r.length?o:void 0}},t.prototype.queryMetadata=function(e,r,n){var i=this.getStorenameForModel(e),a=this.namespaceResolver(e),o=r&&ne.getPredicates(r),s=dn(this.schema.namespaces[a],e.name),c=o&&this.keyValueFromPredicate(o,s),u=n&&n.sort,l=n&&n.limit;return{storeName:i,namespaceName:a,queryByKey:c,predicates:o,hasSort:u,hasPagination:l}},t.prototype.delete=function(e,r){return N(this,void 0,void 0,function(){var n,s,i,a,m,m,o,s,c,u,l,f,v,h,d,p,y,g,v,m;return O(this,function(S){switch(S.label){case 0:return[4,this.preOpCheck()];case 1:return S.sent(),n=[],Rt(e)?(s=e,i=this.namespaceResolver(s),[4,this.query(s,r)]):[3,9];case 2:return a=S.sent(),r===void 0?[3,5]:[4,this.deleteTraverse(a,s,i,n)];case 3:return S.sent(),[4,this.deleteItem(n)];case 4:return S.sent(),m=n.reduce(function(b,E){var A=E.items;return b.concat(A)},[]),[2,[a,m]];case 5:return[4,this.deleteTraverse(a,s,i,n)];case 6:return S.sent(),[4,this.deleteItem(n)];case 7:return S.sent(),m=n.reduce(function(b,E){var A=E.items;return b.concat(A)},[]),[2,[a,m]];case 8:return[3,16];case 9:return o=e,s=Object.getPrototypeOf(o).constructor,c=this.namespaceResolver(s),u=this.getStorenameForModel(s),r?(l=this.getIndexKeyValuesFromModel(o),[4,this._get(u,l)]):[3,12];case 10:if(f=S.sent(),f===void 0)return v="Model instance not found in storage",Ai.warn(v,{model:o}),[2,[[o],[]]];if(h=ne.getPredicates(r),d=h,p=d.predicates,y=d.type,g=qt(f,y,p),!g)throw v="Conditional update failed",Ai.error(v,{model:f,condition:p}),new Error(v);return[4,this.deleteTraverse([o],s,c,n)];case 11:return S.sent(),[3,14];case 12:return[4,this.deleteTraverse([o],s,c,n)];case 13:S.sent(),S.label=14;case 14:return[4,this.deleteItem(n)];case 15:return S.sent(),m=n.reduce(function(b,E){var A=E.items;return b.concat(A)},[]),[2,[[o],m]];case 16:return[2]}})})},t.prototype.deleteTraverse=function(e,r,n,i){var a,o,s,c,u,l;return N(this,void 0,void 0,function(){var f,h,d,p,y,g,v,m,S,b,E,A;return O(this,function(w){switch(w.label){case 0:f=["HAS_ONE","HAS_MANY"],w.label=1;case 1:w.trys.push([1,19,20,25]),a=nt(e),w.label=2;case 2:return[4,a.next()];case 3:if(o=w.sent(),!!o.done)return[3,18];h=o.value,d=this.schema.namespaces[n].models[r.name],p={builder:r,schema:d,pkField:Se(d)},y=jn.allFrom(p).filter(function(T){return f.includes(T.type)}),w.label=4;case 4:w.trys.push([4,11,12,17]),g=nt(y),w.label=5;case 5:return[4,g.next()];case 6:return v=w.sent(),!v.done?(m=v.value,S=m.createRemoteQueryObject(h),S===null?[3,9]:[4,this.query(m.remoteModelConstructor,ne.createFromFlatEqualities(m.remoteDefinition,S))]):[3,10];case 7:return b=w.sent(),[4,this.deleteTraverse(b,m.remoteModelConstructor,n,i)];case 8:w.sent(),w.label=9;case 9:return[3,5];case 10:return[3,17];case 11:return E=w.sent(),u={error:E},[3,17];case 12:return w.trys.push([12,,15,16]),v&&!v.done&&(l=g.return)?[4,l.call(g)]:[3,14];case 13:w.sent(),w.label=14;case 14:return[3,16];case 15:if(u)throw u.error;return[7];case 16:return[7];case 17:return[3,2];case 18:return[3,25];case 19:return A=w.sent(),s={error:A},[3,25];case 20:return w.trys.push([20,,23,24]),o&&!o.done&&(c=a.return)?[4,c.call(a)]:[3,22];case 21:w.sent(),w.label=22;case 22:return[3,24];case 23:if(s)throw s.error;return[7];case 24:return[7];case 25:return i.push({storeName:Ct(n,r.name),items:e}),[2]}})})},t}(),Gr=new he("DataStore"),sh=7,uh=3,ch=function(t){oa(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.safariCompatabilityMode=!1,r.canonicalKeyPath=function(n){return r.safariCompatabilityMode?n.length>1?n:n[0]:n},r}return e.prototype.preSetUpChecks=function(){return N(this,void 0,void 0,function(){return O(this,function(r){switch(r.label){case 0:return[4,this.checkPrivate()];case 1:return r.sent(),[4,this.setSafariCompatabilityMode()];case 2:return r.sent(),[2]}})})},e.prototype.preOpCheck=function(){return N(this,void 0,void 0,function(){return O(this,function(r){switch(r.label){case 0:return[4,this.checkPrivate()];case 1:return r.sent(),[2]}})})},e.prototype.initDb=function(){return N(this,void 0,void 0,function(){var r=this;return O(this,function(n){switch(n.label){case 0:return[4,nh(this.dbName,uh,{upgrade:function(i,a,o,s){return N(r,void 0,void 0,function(){var c,u,l,f,h,d,p,y,g,v,m,S,b,E,A,w,T=this;return O(this,function(I){switch(I.label){case 0:if(a===0)return Object.keys(this.schema.namespaces).forEach(function(x){var C=T.schema.namespaces[x];Object.keys(C.models).forEach(function(_){var P=Ct(x,_);T.createObjectStoreForModel(i,x,P,_)})}),[2];if(!((a===1||a===2)&&o===3))return[3,16];I.label=1;case 1:I.trys.push([1,14,,15]),I.label=2;case 2:I.trys.push([2,11,12,13]),c=j(s.objectStoreNames),u=c.next(),I.label=3;case 3:return u.done?[3,10]:(l=u.value,f=s.objectStore(l),h="tmp_"+l,f.name=h,d=this.getNamespaceAndModelFromStorename(l),p=d.namespaceName,y=d.modelName,g=y in this.schema.namespaces[p].models,g?(v=this.createObjectStoreForModel(i,p,l,y),[4,f.openCursor()]):(i.deleteObjectStore(h),[3,9]));case 4:m=I.sent(),S=0,I.label=5;case 5:return m&&m.value?[4,v.put(m.value)]:[3,8];case 6:return I.sent(),[4,m.continue()];case 7:return m=I.sent(),S++,[3,5];case 8:i.deleteObjectStore(h),Gr.debug(S+" "+l+" records migrated"),I.label=9;case 9:return u=c.next(),[3,3];case 10:return[3,13];case 11:return b=I.sent(),A={error:b},[3,13];case 12:try{u&&!u.done&&(w=c.return)&&w.call(c)}finally{if(A)throw A.error}return[7];case 13:return Object.keys(this.schema.namespaces).forEach(function(x){var C=T.schema.namespaces[x],_=new Set(s.objectStoreNames);Object.keys(C.models).map(function(P){return[P,Ct(x,P)]}).filter(function(P){var D=M(P,2),R=D[1];return!_.has(R)}).forEach(function(P){var D=M(P,2),R=D[0],q=D[1];T.createObjectStoreForModel(i,x,q,R)})}),[3,15];case 14:throw E=I.sent(),Gr.error("Error migrating IndexedDB data",E),s.abort(),E;case 15:return[2];case 16:return[2]}})})}})];case 1:return[2,n.sent()]}})})},e.prototype._get=function(r,n){return N(this,void 0,void 0,function(){var i,a,o,s;return O(this,function(c){switch(c.label){case 0:return typeof r=="string"?(a=r,i=this.db.transaction(a,"readonly").store.index("byPk")):(o=r,i=o.index("byPk")),[4,i.get(this.canonicalKeyPath(n))];case 1:return s=c.sent(),[2,s]}})})},e.prototype.clear=function(){var r;return N(this,void 0,void 0,function(){return O(this,function(n){switch(n.label){case 0:return[4,this.checkPrivate()];case 1:return n.sent(),(r=this.db)===null||r===void 0||r.close(),[4,ih(this.dbName)];case 2:return n.sent(),this.db=void 0,this.initPromise=void 0,[2]}})})},e.prototype.save=function(r,n){var i,a;return N(this,void 0,void 0,function(){var o,s,c,u,l,f,h,d,p,y,g,v,m,S,b,E,A,w,T,I,x,C;return O(this,function(_){switch(_.label){case 0:return[4,this.checkPrivate()];case 1:return _.sent(),o=this.saveMetadata(r),s=o.storeName,c=o.set,u=o.connectionStoreNames,l=o.modelKeyValues,f=this.db.transaction(ie([s],Array.from(c.values())),"readwrite"),h=f.objectStore(s),[4,this._get(h,l)];case 2:d=_.sent(),this.validateSaveCondition(n,d),p=[],_.label=3;case 3:_.trys.push([3,11,12,17]),y=nt(u),_.label=4;case 4:return[4,y.next()];case 5:return g=_.sent(),!g.done?(v=g.value,m=v.storeName,S=v.item,b=v.instance,E=v.keys,A=f.objectStore(m),w=E.map(function(P){return S[P]}),[4,this._get(A,w)]):[3,10];case 6:return T=_.sent(),I=T?X.UPDATE:X.INSERT,En(w,l)||I===X.INSERT?[4,A.index("byPk").getKey(this.canonicalKeyPath(w))]:[3,9];case 7:return x=_.sent(),[4,A.put(S,x)];case 8:_.sent(),p.push([b,I]),_.label=9;case 9:return[3,4];case 10:return[3,17];case 11:return C=_.sent(),i={error:C},[3,17];case 12:return _.trys.push([12,,15,16]),g&&!g.done&&(a=y.return)?[4,a.call(y)]:[3,14];case 13:_.sent(),_.label=14;case 14:return[3,16];case 15:if(i)throw i.error;return[7];case 16:return[7];case 17:return[4,f.done];case 18:return _.sent(),[2,p]}})})},e.prototype.query=function(r,n,i){return N(this,void 0,void 0,function(){var a,o,s,c,u,l,f,h,d=this;return O(this,function(p){switch(p.label){case 0:return[4,this.checkPrivate()];case 1:return p.sent(),a=this.queryMetadata(r,n,i),o=a.storeName,s=a.namespaceName,c=a.queryByKey,u=a.predicates,l=a.hasSort,f=a.hasPagination,[4,function(){return N(d,void 0,void 0,function(){var y,g,v;return O(this,function(m){switch(m.label){case 0:return c?[4,this.getByKey(o,c)]:[3,2];case 1:return y=m.sent(),[2,y?[y]:[]];case 2:return u?[4,this.filterOnPredicate(o,u)]:[3,4];case 3:return g=m.sent(),[2,this.inMemoryPagination(g,i)];case 4:return l?[4,this.getAll(o)]:[3,6];case 5:return v=m.sent(),[2,this.inMemoryPagination(v,i)];case 6:return f?[2,this.enginePagination(o,i)]:[2,this.getAll(o)]}})})}()];case 2:return h=p.sent(),[4,this.load(s,r.name,h)];case 3:return[2,p.sent()]}})})},e.prototype.queryOne=function(r,n){return n===void 0&&(n=ht.FIRST),N(this,void 0,void 0,function(){var i,a,o;return O(this,function(s){switch(s.label){case 0:return[4,this.checkPrivate()];case 1:return s.sent(),i=this.getStorenameForModel(r),[4,this.db.transaction([i],"readonly").objectStore(i).openCursor(void 0,n===ht.FIRST?"next":"prev")];case 2:return a=s.sent(),o=a?a.value:void 0,[2,o&&this.modelInstanceCreator(r,o)]}})})},e.prototype.batchSave=function(r,n){return N(this,void 0,void 0,function(){var i,a,o,s,c,u,l,f,h,d,p,y,g,v,m=this;return O(this,function(S){switch(S.label){case 0:return[4,this.checkPrivate()];case 1:if(S.sent(),n.length===0)return[2,[]];i=r.name,a=this.namespaceResolver(r),o=this.getStorenameForModel(r),s=[],c=this.db.transaction(o,"readwrite"),u=c.store,l=function(b){var E,A,w,T,I,x,C;return O(this,function(_){switch(_.label){case 0:return E=f.modelInstanceCreator(r,b),A=Aa(i,E,f.schema.namespaces[a],f.modelInstanceCreator,f.getModelConstructorByModelName),w=f.getIndexKeyValuesFromModel(E),T=b._deleted,I=u.index("byPk"),[4,I.getKey(f.canonicalKeyPath(w))];case 1:return x=_.sent(),T?[3,3]:(C=A.find(function(P){var D=P.instance,R=m.getIndexKeyValuesFromModel(D);return En(R,w)}).instance,s.push([C,x?X.UPDATE:X.INSERT]),[4,u.put(C,x)]);case 2:return _.sent(),[3,5];case 3:return s.push([b,X.DELETE]),x?[4,u.delete(x)]:[3,5];case 4:_.sent(),_.label=5;case 5:return[2]}})},f=this,S.label=2;case 2:S.trys.push([2,7,8,9]),h=j(n),d=h.next(),S.label=3;case 3:return d.done?[3,6]:(p=d.value,[5,l(p)]);case 4:S.sent(),S.label=5;case 5:return d=h.next(),[3,3];case 6:return[3,9];case 7:return y=S.sent(),g={error:y},[3,9];case 8:try{d&&!d.done&&(v=h.return)&&v.call(h)}finally{if(g)throw g.error}return[7];case 9:return[4,c.done];case 10:return S.sent(),[2,s]}})})},e.prototype.deleteItem=function(r){var n,i,a,o;return N(this,void 0,void 0,function(){var s,c,u,l,f,h,d,p,y,g,v,m,S,b,E,A;return O(this,function(w){switch(w.label){case 0:s=r.map(function(T){var I=T.storeName;return I}),c=this.db.transaction(ie(s),"readwrite"),w.label=1;case 1:w.trys.push([1,22,23,28]),u=nt(r),w.label=2;case 2:return[4,u.next()];case 3:if(l=w.sent(),!!l.done)return[3,21];f=l.value,h=f.storeName,d=f.items,p=c.objectStore(h),w.label=4;case 4:w.trys.push([4,14,15,20]),y=nt(d),w.label=5;case 5:return[4,y.next()];case 6:return g=w.sent(),!g.done?(v=g.value,v?(m=void 0,typeof v!="object"?[3,8]:(S=this.getIndexKeyValuesFromModel(v),[4,p.index("byPk").getKey(this.canonicalKeyPath(S))])):[3,12]):[3,13];case 7:return m=w.sent(),[3,10];case 8:return b=v.toString(),[4,p.index("byPk").getKey(b)];case 9:m=w.sent(),w.label=10;case 10:return m===void 0?[3,12]:[4,p.delete(m)];case 11:w.sent(),w.label=12;case 12:return[3,5];case 13:return[3,20];case 14:return E=w.sent(),a={error:E},[3,20];case 15:return w.trys.push([15,,18,19]),g&&!g.done&&(o=y.return)?[4,o.call(y)]:[3,17];case 16:w.sent(),w.label=17;case 17:return[3,19];case 18:if(a)throw a.error;return[7];case 19:return[7];case 20:return[3,2];case 21:return[3,28];case 22:return A=w.sent(),n={error:A},[3,28];case 23:return w.trys.push([23,,26,27]),l&&!l.done&&(i=u.return)?[4,i.call(u)]:[3,25];case 24:w.sent(),w.label=25;case 25:return[3,27];case 26:if(n)throw n.error;return[7];case 27:return[7];case 28:return[2]}})})},e.prototype.checkPrivate=function(){return N(this,void 0,void 0,function(){var r;return O(this,function(n){switch(n.label){case 0:return[4,Qf().then(function(i){return i})];case 1:return r=n.sent(),r?(Gr.error("IndexedDB not supported in this browser's private mode"),[2,Promise.reject("IndexedDB not supported in this browser's private mode")]):[2,Promise.resolve()]}})})},e.prototype.setSafariCompatabilityMode=function(){return N(this,void 0,void 0,function(){var r;return O(this,function(n){switch(n.label){case 0:return r=this,[4,Xf()];case 1:return r.safariCompatabilityMode=n.sent(),this.safariCompatabilityMode===!0&&Gr.debug("IndexedDB Adapter is running in Safari Compatability Mode"),[2]}})})},e.prototype.getNamespaceAndModelFromStorename=function(r){var n=M(r.split("_")),i=n[0],a=n.slice(1);return{namespaceName:i,modelName:a.join("_")}},e.prototype.createObjectStoreForModel=function(r,n,i,a){var o=r.createObjectStore(i,{autoIncrement:!0}),s=this.schema.namespaces[n].relationships[a].indexes;return s.forEach(function(c){var u=M(c,3),l=u[0],f=u[1],h=u[2];o.createIndex(l,f,h)}),o},e.prototype.getByKey=function(r,n){return N(this,void 0,void 0,function(){return O(this,function(i){switch(i.label){case 0:return[4,this._get(r,n)];case 1:return[2,i.sent()]}})})},e.prototype.getAll=function(r){return N(this,void 0,void 0,function(){return O(this,function(n){switch(n.label){case 0:return[4,this.db.getAll(r)];case 1:return[2,n.sent()]}})})},e.prototype.matchingIndexQueries=function(r,n,i){var a,o,s,c,u=this,l=[],f=new Map;try{for(var h=j(n),d=h.next();!d.done;d=h.next()){var p=d.value;f.set(String(p.field),p)}}catch(b){a={error:b}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(a)throw a.error}}var y=i.objectStore(r),g=function(b){var E,A,w=y.index(b),T=Array.isArray(w.keyPath)?w.keyPath:[w.keyPath],I=[];try{for(var x=(E=void 0,j(T)),C=x.next();!C.done;C=x.next()){var _=C.value,P=f.get(_);if(P&&P.operand!==null&&P.operand!==void 0)I.push(P.operand);else break}}catch(D){E={error:D}}finally{try{C&&!C.done&&(A=x.return)&&A.call(x)}finally{if(E)throw E.error}}I.length===T.length&&l.push(function(){return u.db.transaction(r).objectStore(r).index(b).getAll(u.canonicalKeyPath(I))})};try{for(var v=j(y.indexNames),m=v.next();!m.done;m=v.next()){var S=m.value;g(S)}}catch(b){s={error:b}}finally{try{m&&!m.done&&(c=v.return)&&c.call(v)}finally{if(s)throw s.error}}return l},e.prototype.baseQueryIndex=function(r,n,i){return N(this,void 0,void 0,function(){var a,o,s,c,u,l,f,h,d=this;return O(this,function(p){switch(p.label){case 0:for(a=n.predicates,o=n.type;a.length===1&&Cr(a[0])&&a[0].type!=="not";)o=a[0].type,a=a[0].predicates;return s=a.filter(function(y){return dr(y)&&y.operator==="eq"}),c=i||this.db.transaction(r),u={},o!=="or"?[3,2]:[4,Promise.all(a.filter(function(y){return Cr(y)&&y.type==="and"}).map(function(y){return d.baseQueryIndex(r,y,c)})).then(function(y){return y.filter(function(g){return g.indexedQueries.length===1}).map(function(g){return g.indexedQueries})})];case 1:return l=p.sent(),f=a.filter(function(y){return dr(y)}).map(function(y){return d.matchingIndexQueries(r,[y],c)}),h=ie(l,f).map(function(y){return y[0]}).filter(function(y){return y}),a.length>h.length?u={groupType:null,indexedQueries:[]}:u={groupType:"or",indexedQueries:h},[3,3];case 2:o==="and"?u={groupType:o,indexedQueries:this.matchingIndexQueries(r,s,c)}:u={groupType:null,indexedQueries:[]},p.label=3;case 3:return i?[3,5]:[4,c.done];case 4:p.sent(),p.label=5;case 5:return[2,u]}})})},e.prototype.filterOnPredicate=function(r,n){return N(this,void 0,void 0,function(){var i,a,o,s,c,u,l,f,h,d,p,y,g,v,m,S,b,E,A,w,T;return O(this,function(I){switch(I.label){case 0:return i=n.predicates,a=n.type,[4,this.baseQueryIndex(r,n)];case 1:return o=I.sent(),s=o.groupType,c=o.indexedQueries,s==="and"&&c.length>0?[4,c[0]()]:[3,3];case 2:return u=I.sent(),[3,14];case 3:if(!(s==="or"&&c.length>0&&c.length<=sh))return[3,12];l=new Map,I.label=4;case 4:I.trys.push([4,9,10,11]),f=j(c),h=f.next(),I.label=5;case 5:return h.done?[3,8]:(d=h.value,[4,d()]);case 6:p=I.sent();try{for(y=(w=void 0,j(p)),g=y.next();!g.done;g=y.next())v=g.value,m=JSON.stringify(v),l.set(m,v)}catch(x){w={error:x}}finally{try{g&&!g.done&&(T=y.return)&&T.call(y)}finally{if(w)throw w.error}}I.label=7;case 7:return h=f.next(),[3,5];case 8:return[3,11];case 9:return S=I.sent(),E={error:S},[3,11];case 10:try{h&&!h.done&&(A=f.return)&&A.call(f)}finally{if(E)throw E.error}return[7];case 11:return u=Array.from(l.values()),[3,14];case 12:return[4,this.getAll(r)];case 13:u=I.sent(),I.label=14;case 14:return b=i?u.filter(function(x){return qt(x,a,i)}):u,[2,b]}})})},e.prototype.inMemoryPagination=function(r,n){return Ta(r,n)},e.prototype.enginePagination=function(r,n){return N(this,void 0,void 0,function(){var i,a,o,s,c,u,l,f,h;return O(this,function(d){switch(d.label){case 0:return n?(a=n.page,o=a===void 0?0:a,s=n.limit,c=s===void 0?0:s,u=Math.max(0,o*c)||0,[4,this.db.transaction(r).objectStore(r).openCursor()]):[3,7];case 1:return l=d.sent(),l&&u>0?[4,l.advance(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:f=[],h=typeof c=="number"&&c>0,d.label=4;case 4:return l&&l.value?(f.push(l.value),h&&f.length===c?[3,6]:[4,l.continue()]):[3,6];case 5:return l=d.sent(),[3,4];case 6:return i=f,[3,9];case 7:return[4,this.db.getAll(r)];case 8:i=d.sent(),d.label=9;case 9:return[2,i]}})})},e}(Ou);const lh=new ch;var fh=function(){function t(){var e=this;this.db=new Map,this.getAllKeys=function(){return N(e,void 0,void 0,function(){return O(this,function(r){return[2,Array.from(this.db.keys())]})})},this.multiGet=function(r){return N(e,void 0,void 0,function(){var n=this;return O(this,function(i){return[2,r.reduce(function(a,o){return a.push([o,n.db.get(o)]),a},[])]})})},this.multiRemove=function(r,n){return N(e,void 0,void 0,function(){var i=this;return O(this,function(a){return r.forEach(function(o){return i.db.delete(o)}),typeof n=="function"&&n(),[2]})})},this.multiSet=function(r,n){return N(e,void 0,void 0,function(){var i=this;return O(this,function(a){return r.forEach(function(o){var s=M(o,2),c=s[0],u=s[1];i.setItem(c,u)}),typeof n=="function"&&n(),[2]})})},this.setItem=function(r,n){return N(e,void 0,void 0,function(){return O(this,function(i){return[2,this.db.set(r,n)]})})},this.removeItem=function(r){return N(e,void 0,void 0,function(){return O(this,function(n){return[2,this.db.delete(r)]})})},this.getItem=function(r){return N(e,void 0,void 0,function(){return O(this,function(n){return[2,this.db.get(r)]})})}}return t}();function dh(){return new fh}var Ti="@AmplifyDatastore",hh="Collection",Xo="Data",Ii=new Map,ph=function(){function t(){this._collectionInMemoryIndex=new Map,this.storage=dh()}return t.prototype.getCollectionIndex=function(e){return this._collectionInMemoryIndex.has(e)||this._collectionInMemoryIndex.set(e,new Map),this._collectionInMemoryIndex.get(e)},t.prototype.getMonotonicFactory=function(e){return Ii.has(e)||Ii.set(e,fu()),Ii.get(e)},t.prototype.init=function(){return N(this,void 0,void 0,function(){var e,r,n,i,a,o,s,c,u,l,f,h,d,p,y,g,v,m,S,b;return O(this,function(E){switch(E.label){case 0:return this._collectionInMemoryIndex.clear(),[4,this.storage.getAllKeys()];case 1:e=E.sent(),r=[],E.label=2;case 2:E.trys.push([2,12,13,14]),n=j(e),i=n.next(),E.label=3;case 3:return i.done?[3,11]:(a=i.value,o=M(a.split("::"),5),s=o[0],c=o[1],u=o[2],l=o[3],f=o[4],s!==Ti?[3,10]:u!==Xo?[3,9]:(h=void 0,f!==void 0?[3,7]:(d=l,p=this.getMonotonicFactory(c)(),y=this.getLegacyKeyForItem(c,d),g=this.getKeyForItem(c,d,p),[4,this.storage.getItem(y)])));case 4:return v=E.sent(),[4,this.storage.setItem(g,v)];case 5:return E.sent(),[4,this.storage.removeItem(y)];case 6:return E.sent(),h=p,[3,8];case 7:h=l,E.label=8;case 8:return this.getCollectionIndex(c).set(f,h),[3,10];case 9:u===hh&&r.push(a),E.label=10;case 10:return i=n.next(),[3,3];case 11:return[3,14];case 12:return m=E.sent(),S={error:m},[3,14];case 13:try{i&&!i.done&&(b=n.return)&&b.call(n)}finally{if(S)throw S.error}return[7];case 14:return r.length>0?[4,this.storage.multiRemove(r)]:[3,16];case 15:E.sent(),E.label=16;case 16:return[2]}})})},t.prototype.save=function(e,r,n,i){var a,o;return N(this,void 0,void 0,function(){var s,c,u;return O(this,function(l){switch(l.label){case 0:return s=Gi(n),c=((a=this.getCollectionIndex(r))===null||a===void 0?void 0:a.get(s))||this.getMonotonicFactory(r)(),u=this.getKeyForItem(r,i,c),(o=this.getCollectionIndex(r))===null||o===void 0||o.set(i,c),[4,this.storage.setItem(u,JSON.stringify(e))];case 1:return l.sent(),[2]}})})},t.prototype.batchSave=function(e,r,n){return N(this,void 0,void 0,function(){var i,a,o,s,c,u,l,f,h,d,p,y,g,v,m,S,b,E,A,w,T=this;return O(this,function(I){switch(I.label){case 0:if(r.length===0)return[2,[]];i=[],a=this.getCollectionIndex(e),o=new Set,s=new Set,c=[],u={},l=function(x){var C=n.map(function(R){return x[R]}),_=x._deleted,P=a.get(C.join(gt))||f.getMonotonicFactory(e)(),D=f.getKeyForItem(e,C.join(gt),P);c.push(D),u[D]={ulid:P,model:x},_?o.add(D):s.add(D)},f=this;try{for(h=j(r),d=h.next();!d.done;d=h.next())p=d.value,l(p)}catch(x){b={error:x}}finally{try{d&&!d.done&&(E=h.return)&&E.call(h)}finally{if(b)throw b.error}}return[4,this.storage.multiGet(c)];case 1:return y=I.sent(),g=y.filter(function(x){var C=M(x,2),_=C[1];return!!_}).reduce(function(x,C){var _=M(C,1),P=_[0];return x.add(P)},new Set),[4,new Promise(function(x,C){if(o.size===0){x();return}var _=Array.from(o);_.forEach(function(P){var D=n.map(function(R){return u[P].model[R]}).join(gt);a.delete(D)}),T.storage.multiRemove(_,function(P){P&&P.length>0?C(P):x()})})];case 2:return I.sent(),[4,new Promise(function(x,C){if(s.size===0){x();return}var _=Array.from(s).map(function(P){return[P,JSON.stringify(u[P].model)]});s.forEach(function(P){var D=u[P],R=D.model,q=D.ulid,L=n.map(function(z){return R[z]}).join(gt);a.set(L,q)}),T.storage.multiSet(_,function(P){P&&P.length>0?C(P):x()})})];case 3:I.sent();try{for(v=j(c),m=v.next();!m.done;m=v.next())S=m.value,o.has(S)&&g.has(S)?i.push([u[S].model,X.DELETE]):s.has(S)&&i.push([u[S].model,g.has(S)?X.UPDATE:X.INSERT])}catch(x){A={error:x}}finally{try{m&&!m.done&&(w=v.return)&&w.call(v)}finally{if(A)throw A.error}}return[2,i]}})})},t.prototype.get=function(e,r){return N(this,void 0,void 0,function(){var n,i,a,o;return O(this,function(s){switch(s.label){case 0:return n=this.getCollectionIndex(r).get(e),i=this.getKeyForItem(r,e,n),[4,this.storage.getItem(i)];case 1:return a=s.sent(),o=a&&JSON.parse(a),[2,o]}})})},t.prototype.getOne=function(e,r){return N(this,void 0,void 0,function(){var n,i,a,o,s,c,u,l;return O(this,function(f){switch(f.label){case 0:return n=this.getCollectionIndex(r),i=M(e===ht.FIRST?function(){var h,d,p,y,g;try{for(var v=j(n),m=v.next();!m.done;m=v.next()){p=M(m.value,2),y=p[0],g=p[1];break}}catch(S){h={error:S}}finally{try{m&&!m.done&&(d=v.return)&&d.call(v)}finally{if(h)throw h.error}}return[y,g]}():function(){var h,d,p,y,g;try{for(var v=j(n),m=v.next();!m.done;m=v.next())p=M(m.value,2),y=p[0],g=p[1]}catch(S){h={error:S}}finally{try{m&&!m.done&&(d=v.return)&&d.call(v)}finally{if(h)throw h.error}}return[y,g]}(),2),a=i[0],o=i[1],s=this.getKeyForItem(r,a,o),u=s,u?[4,this.storage.getItem(s)]:[3,2];case 1:u=f.sent(),f.label=2;case 2:return c=u,l=c&&JSON.parse(c)||void 0,[2,l]}})})},t.prototype.getAll=function(e,r){return N(this,void 0,void 0,function(){var n,i,a,o,s,c,u,l,f,h,d,p,y,g,v,m,S,b,E;return O(this,function(A){switch(A.label){case 0:n=this.getCollectionIndex(e),i=r||{},a=i.page,o=a===void 0?0:a,s=i.limit,c=s===void 0?0:s,u=Math.max(0,o*c)||0,l=c>0?u+c:void 0,f=[],h=0;try{for(d=j(n),p=d.next();!p.done&&(y=M(p.value,2),g=y[0],v=y[1],h++,!(!(h<=u)&&(f.push(this.getKeyForItem(e,g,v)),h===l)));p=d.next());}catch(w){b={error:w}}finally{try{p&&!p.done&&(E=d.return)&&E.call(d)}finally{if(b)throw b.error}}return[4,this.storage.multiGet(f)];case 1:return m=A.sent(),S=m.filter(function(w){var T=M(w,2),I=T[1];return I}).map(function(w){var T=M(w,2),I=T[1];return JSON.parse(I)}),[2,S]}})})},t.prototype.delete=function(e,r){return N(this,void 0,void 0,function(){var n,i;return O(this,function(a){switch(a.label){case 0:return n=this.getCollectionIndex(r).get(e),i=this.getKeyForItem(r,e,n),this.getCollectionIndex(r).delete(e),[4,this.storage.removeItem(i)];case 1:return a.sent(),[2]}})})},t.prototype.clear=function(){return N(this,void 0,void 0,function(){var e,r;return O(this,function(n){switch(n.label){case 0:return[4,this.storage.getAllKeys()];case 1:return e=n.sent(),r=e.filter(function(i){return i.startsWith(Ti)}),[4,this.storage.multiRemove(r)];case 2:return n.sent(),this._collectionInMemoryIndex.clear(),[2]}})})},t.prototype.getKeyForItem=function(e,r,n){return this.getKeyPrefixForStoreItems(e)+"::"+n+"::"+r},t.prototype.getLegacyKeyForItem=function(e,r){return this.getKeyPrefixForStoreItems(e)+"::"+r},t.prototype.getKeyPrefixForStoreItems=function(e){return Ti+"::"+e+"::"+Xo},t}();const vh=ph;var yh=function(t){oa(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.preSetUpChecks=function(){return N(this,void 0,void 0,function(){return O(this,function(r){return[2]})})},e.prototype.preOpCheck=function(){return N(this,void 0,void 0,function(){return O(this,function(r){return[2]})})},e.prototype.initDb=function(){return N(this,void 0,void 0,function(){var r;return O(this,function(n){switch(n.label){case 0:return r=new vh,[4,r.init()];case 1:return n.sent(),[2,r]}})})},e.prototype.clear=function(){return N(this,void 0,void 0,function(){return O(this,function(r){switch(r.label){case 0:return[4,this.db.clear()];case 1:return r.sent(),this.db=void 0,this.initPromise=void 0,[2]}})})},e.prototype.batchSave=function(r,n){return N(this,void 0,void 0,function(){var i,a,o,s,c,u,l,f,h,d,p,y,g=this;return O(this,function(v){switch(v.label){case 0:if(n.length===0)return[2,[]];i=r.name,a=this.namespaceResolver(r),o=Ct(a,i),s=dn(this.schema.namespaces[a],i),c=[],u=function(m){var S=l.modelInstanceCreator(r,m),b=Aa(i,S,l.schema.namespaces[a],l.modelInstanceCreator,l.getModelConstructorByModelName),E=l.getIndexKeyValuesPath(S),A=b.find(function(w){var T=w.instance,I=g.getIndexKeyValuesPath(T);return En([I],[E])}).instance;c.push(A)},l=this;try{for(f=j(n),h=f.next();!h.done;h=f.next())d=h.value,u(d)}catch(m){p={error:m}}finally{try{h&&!h.done&&(y=f.return)&&y.call(f)}finally{if(p)throw p.error}}return[4,this.db.batchSave(o,c,s)];case 1:return[2,v.sent()]}})})},e.prototype._get=function(r,n){return N(this,void 0,void 0,function(){var i;return O(this,function(a){switch(a.label){case 0:return i=n.join(gt),[4,this.db.get(i,r)];case 1:return[2,a.sent()]}})})},e.prototype.save=function(r,n){var i,a;return N(this,void 0,void 0,function(){var o,s,c,u,l,f,h,d,p,y,g,v,m,S,b,E,A;return O(this,function(w){switch(w.label){case 0:return o=this.saveMetadata(r),s=o.storeName,c=o.connectionStoreNames,u=o.modelKeyValues,[4,this._get(s,u)];case 1:l=w.sent(),this.validateSaveCondition(n,l),f=[],w.label=2;case 2:w.trys.push([2,9,10,15]),h=nt(c),w.label=3;case 3:return[4,h.next()];case 4:return d=w.sent(),!d.done?(p=d.value,y=p.storeName,g=p.item,v=p.instance,m=p.keys,S=m.map(function(T){return g[T]}),[4,this._get(y,S)]):[3,8];case 5:return b=w.sent(),E=b?X.UPDATE:X.INSERT,En(S,u)||E===X.INSERT?[4,this.db.save(g,y,m,S.join(gt))]:[3,7];case 6:w.sent(),f.push([v,E]),w.label=7;case 7:return[3,3];case 8:return[3,15];case 9:return A=w.sent(),i={error:A},[3,15];case 10:return w.trys.push([10,,13,14]),d&&!d.done&&(a=h.return)?[4,a.call(h)]:[3,12];case 11:w.sent(),w.label=12;case 12:return[3,14];case 13:if(i)throw i.error;return[7];case 14:return[7];case 15:return[2,f]}})})},e.prototype.query=function(r,n,i){return N(this,void 0,void 0,function(){var a,o,s,c,u,l,f,h,d=this;return O(this,function(p){switch(p.label){case 0:return a=this.queryMetadata(r,n,i),o=a.storeName,s=a.namespaceName,c=a.queryByKey,u=a.predicates,l=a.hasSort,f=a.hasPagination,[4,function(){return N(d,void 0,void 0,function(){var y,g,v,m;return O(this,function(S){switch(S.label){case 0:return c?(y=c.join(gt),[4,this.getByKey(o,y)]):[3,2];case 1:return g=S.sent(),[2,g?[g]:[]];case 2:return u?[4,this.filterOnPredicate(o,u)]:[3,4];case 3:return v=S.sent(),[2,this.inMemoryPagination(v,i)];case 4:return l||f?[4,this.getAll(o)]:[3,6];case 5:return m=S.sent(),[2,this.inMemoryPagination(m,i)];case 6:return[2,this.getAll(o)]}})})}()];case 1:return h=p.sent(),[4,this.load(s,r.name,h)];case 2:return[2,p.sent()]}})})},e.prototype.getByKey=function(r,n){return N(this,void 0,void 0,function(){return O(this,function(i){switch(i.label){case 0:return[4,this.db.get(n,r)];case 1:return[2,i.sent()]}})})},e.prototype.getAll=function(r){return N(this,void 0,void 0,function(){return O(this,function(n){switch(n.label){case 0:return[4,this.db.getAll(r)];case 1:return[2,n.sent()]}})})},e.prototype.filterOnPredicate=function(r,n){return N(this,void 0,void 0,function(){var i,a,o,s;return O(this,function(c){switch(c.label){case 0:return i=n.predicates,a=n.type,[4,this.getAll(r)];case 1:return o=c.sent(),s=i?o.filter(function(u){return qt(u,a,i)}):o,[2,s]}})})},e.prototype.inMemoryPagination=function(r,n){return Ta(r,n)},e.prototype.queryOne=function(r,n){return n===void 0&&(n=ht.FIRST),N(this,void 0,void 0,function(){var i,a;return O(this,function(o){switch(o.label){case 0:return i=this.getStorenameForModel(r),[4,this.db.getOne(n,i)];case 1:return a=o.sent(),[2,a&&this.modelInstanceCreator(r,a)]}})})},e.prototype.deleteItem=function(r){var n,i,a,o;return N(this,void 0,void 0,function(){var s,c,u,l,f,h,d,p,y,g,v;return O(this,function(m){switch(m.label){case 0:m.trys.push([0,17,18,23]),s=nt(r),m.label=1;case 1:return[4,s.next()];case 2:if(c=m.sent(),!!c.done)return[3,16];u=c.value,l=u.storeName,f=u.items,m.label=3;case 3:m.trys.push([3,9,10,15]),h=nt(f),m.label=4;case 4:return[4,h.next()];case 5:return d=m.sent(),!d.done?(p=d.value,p?typeof p!="object"?[3,7]:(y=this.getIndexKeyValuesPath(p),[4,this.db.delete(y,l)]):[3,7]):[3,8];case 6:m.sent(),m.label=7;case 7:return[3,4];case 8:return[3,15];case 9:return g=m.sent(),a={error:g},[3,15];case 10:return m.trys.push([10,,13,14]),d&&!d.done&&(o=h.return)?[4,o.call(h)]:[3,12];case 11:m.sent(),m.label=12;case 12:return[3,14];case 13:if(a)throw a.error;return[7];case 14:return[7];case 15:return[3,1];case 16:return[3,23];case 17:return v=m.sent(),n={error:v},[3,23];case 18:return m.trys.push([18,,21,22]),c&&!c.done&&(i=s.return)?[4,i.call(s)]:[3,20];case 19:m.sent(),m.label=20;case 20:return[3,22];case 21:if(n)throw n.error;return[7];case 22:return[7];case 23:return[2]}})})},e.prototype.getIndexKeyValuesPath=function(r){return this.getIndexKeyValuesFromModel(r).join(gt)},e}(Ou);const mh=new yh;var gh=function(){var t=Pr().isBrowser;return t&&window.indexedDB||hs()&&self.indexedDB?lh:mh};const bh=gh;var Sh=new he("DataStore"),Zo=function(){function t(e,r,n,i,a,o){this.schema=e,this.namespaceResolver=r,this.getModelConstructorByModelName=n,this.modelInstanceCreator=i,this.adapter=a,this.sessionId=o,this.adapter=this.adapter||bh(),this.pushStream=new Dd}return t.getNamespace=function(){var e={name:lu,relationships:{},enums:{},models:{},nonModels:{}};return e},t.prototype.init=function(){return N(this,void 0,void 0,function(){var e,r;return O(this,function(n){switch(n.label){case 0:return this.initialized===void 0?[3,2]:[4,this.initialized];case 1:return n.sent(),[2];case 2:return Sh.debug("Starting Storage"),this.initialized=new Promise(function(i,a){e=i,r=a}),this.adapter.setUp(this.schema,this.namespaceResolver,this.modelInstanceCreator,this.getModelConstructorByModelName,this.sessionId).then(e,r),[4,this.initialized];case 3:return n.sent(),[2]}})})},t.prototype.save=function(e,r,n,i){return N(this,void 0,void 0,function(){var a,o=this;return O(this,function(s){switch(s.label){case 0:return[4,this.init()];case 1:if(s.sent(),!this.adapter)throw new Error("Storage adapter is missing");return[4,this.adapter.save(e,r)];case 2:return a=s.sent(),a.forEach(function(c){var u=M(c,2),l=u[0],f=u[1],h=!!n,d;if((f===X.UPDATE||f===X.INSERT)&&!h&&(d=o.getChangedFieldsInput(e,l,i),d===null))return a;var p=d||l,y=Object.getPrototypeOf(l).constructor;o.pushStream.next({model:y,opType:f,element:p,mutator:n,condition:r&&ne.getPredicates(r,!1)||null,savedElement:l})}),[2,a]}})})},t.prototype.delete=function(e,r,n){return N(this,void 0,void 0,function(){var i,a,o,s,c,u,l,f=this;return O(this,function(h){switch(h.label){case 0:return[4,this.init()];case 1:if(h.sent(),!this.adapter)throw new Error("Storage adapter is missing");return[4,this.adapter.delete(e,r)];case 2:return l=M.apply(void 0,[h.sent(),2]),i=l[0],a=l[1],o=Rt(e)?e:Object.getPrototypeOf(e||{}).constructor,s=this.namespaceResolver(o),c=this.schema.namespaces[s].models[o.name],u=new Set(i.map(function(d){var p=it(c,d);return p})),!Rt(e)&&!Array.isArray(a)&&(a=[a]),a.forEach(function(d){var p=Object.getPrototypeOf(d).constructor,y;if(!Rt(e)){var g=it(c,d);y=u.has(g)?ne.getPredicates(r,!1):void 0}f.pushStream.next({model:p,opType:X.DELETE,element:d,mutator:n,condition:y||null})}),[2,[i,a]]}})})},t.prototype.query=function(e,r,n){return N(this,void 0,void 0,function(){return O(this,function(i){switch(i.label){case 0:return[4,this.init()];case 1:if(i.sent(),!this.adapter)throw new Error("Storage adapter is missing");return[4,this.adapter.query(e,r,n)];case 2:return[2,i.sent()]}})})},t.prototype.queryOne=function(e,r){return r===void 0&&(r=ht.FIRST),N(this,void 0,void 0,function(){return O(this,function(n){switch(n.label){case 0:return[4,this.init()];case 1:if(n.sent(),!this.adapter)throw new Error("Storage adapter is missing");return[4,this.adapter.queryOne(e,r)];case 2:return[2,n.sent()]}})})},t.prototype.observe=function(e,r,n){var i=!e,a=r&&ne.getPredicates(r,!1)||{},o=a.predicates,s=a.type,c=this.pushStream.observable.filter(function(u){var l=u.mutator;return!n||l!==n}).map(function(u){u.mutator;var l=_t(u,["mutator"]);return l});return i||(c=c.filter(function(u){var l=u.model,f=u.element;return e!==l?!1:o&&s?qt(f,s,o):!0})),c},t.prototype.clear=function(e){return e===void 0&&(e=!0),N(this,void 0,void 0,function(){return O(this,function(r){switch(r.label){case 0:if(this.initialized=void 0,!this.adapter)throw new Error("Storage adapter is missing");return[4,this.adapter.clear()];case 1:return r.sent(),e&&this.pushStream.complete(),[2]}})})},t.prototype.batchSave=function(e,r,n){return N(this,void 0,void 0,function(){var i,a=this;return O(this,function(o){switch(o.label){case 0:return[4,this.init()];case 1:if(o.sent(),!this.adapter)throw new Error("Storage adapter is missing");return[4,this.adapter.batchSave(e,r)];case 2:return i=o.sent(),i.forEach(function(s){var c=M(s,2),u=c[0],l=c[1];a.pushStream.next({model:e,opType:l,element:u,mutator:n,condition:null})}),[2,i]}})})},t.prototype.getChangedFieldsInput=function(e,r,n){var i,a,o,s=n&&n.length;if(!s)return null;var c=M(n,2),u=c[0],l=c[1],f={},h=u.map(function(C){return C.path&&C.path[0]}),d=Object.getPrototypeOf(e).constructor,p=this.namespaceResolver(d),y=this.schema.namespaces[p].models[d.name].fields,g=((o=this.schema.namespaces[p].keys)===null||o===void 0?void 0:o[d.name])||{},v=g.primaryKey,m=g.compositeKeys,S=m===void 0?[]:m;if(h.forEach(function(C){var _,P,D,R,q,L,z,pe,U,H,Y,$=Oa((Y=y[C])===null||Y===void 0?void 0:Y.association);if(Array.isArray($))try{for(var Z=j($),ae=Z.next();!ae.done;ae=Z.next()){var oe=ae.value;if(!Sn(l[oe],r[oe])){f[oe]=r[oe]===void 0?null:r[oe];try{for(var se=(D=void 0,j(S)),ue=se.next();!ue.done;ue=se.next()){var W=ue.value;if(W.has(oe))try{for(var me=(q=void 0,j(W)),ce=me.next();!ce.done;ce=me.next()){var Q=ce.value;f[Q]=r[Q]}}catch(re){q={error:re}}finally{try{ce&&!ce.done&&(L=me.return)&&L.call(me)}finally{if(q)throw q.error}}}}catch(re){D={error:re}}finally{try{ue&&!ue.done&&(R=se.return)&&R.call(se)}finally{if(D)throw D.error}}}}}catch(re){_={error:re}}finally{try{ae&&!ae.done&&(P=Z.return)&&P.call(Z)}finally{if(_)throw _.error}}else{var ge=$||C;if(!Sn(l[ge],r[ge])){f[ge]=r[ge]===void 0?null:r[ge];try{for(var Te=j(S),ve=Te.next();!ve.done;ve=Te.next()){var W=ve.value;if(W.has(ge))try{for(var Le=(U=void 0,j(W)),V=Le.next();!V.done;V=Le.next()){var Q=V.value;f[Q]=r[Q]}}catch(Ee){U={error:Ee}}finally{try{V&&!V.done&&(H=Le.return)&&H.call(Le)}finally{if(U)throw U.error}}}}catch(re){z={error:re}}finally{try{ve&&!ve.done&&(pe=Te.return)&&pe.call(Te)}finally{if(z)throw z.error}}}}}),Object.keys(f).length===0)return null;if(v&&v.length)try{for(var b=j(v),E=b.next();!E.done;E=b.next()){var A=E.value;f[A]=r[A]}}catch(C){i={error:C}}finally{try{E&&!E.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}var w=r.id,T=r._version,I=r._lastChangedAt,x=r._deleted;return K(K({},f),{id:w,_version:T,_lastChangedAt:I,_deleted:x})},t}(),ea=function(){function t(e,r,n,i,a,o){this.mutex=new Gu,this.storage=new Zo(e,r,n,i,a,o)}return t.prototype.runExclusive=function(e){return this.mutex.runExclusive(e.bind(this,this.storage))},t.prototype.save=function(e,r,n,i){return N(this,void 0,void 0,function(){return O(this,function(a){return[2,this.runExclusive(function(o){return o.save(e,r,n,i)})]})})},t.prototype.delete=function(e,r,n){return N(this,void 0,void 0,function(){return O(this,function(i){return[2,this.runExclusive(function(a){if(Rt(e)){var o=e;return a.delete(o,r,n)}else{var s=e;return a.delete(s,r,n)}})]})})},t.prototype.query=function(e,r,n){return N(this,void 0,void 0,function(){return O(this,function(i){return[2,this.runExclusive(function(a){return a.query(e,r,n)})]})})},t.prototype.queryOne=function(e,r){return r===void 0&&(r=ht.FIRST),N(this,void 0,void 0,function(){return O(this,function(n){return[2,this.runExclusive(function(i){return i.queryOne(e,r)})]})})},t.getNamespace=function(){return Zo.getNamespace()},t.prototype.observe=function(e,r,n){return this.storage.observe(e,r,n)},t.prototype.clear=function(){return N(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return[4,this.runExclusive(function(r){return r.clear()})];case 1:return e.sent(),[2]}})})},t.prototype.batchSave=function(e,r){return this.storage.batchSave(e,r)},t.prototype.init=function(){return N(this,void 0,void 0,function(){return O(this,function(e){return[2,this.storage.init()]})})},t}(),Eh=new Es().networkMonitor();new he("DataStore");var wh=5e3,Ah=function(){function t(){this.connectionStatus={online:!1}}return t.prototype.status=function(){var e=this;if(this.observer)throw new Error("Subscriber already exists");return new xe(function(r){return e.observer=r,e.subscription=Eh.subscribe(function(n){var i=n.online;e.connectionStatus.online=i;var a=K({},e.connectionStatus);r.next(a)}),function(){clearTimeout(e.timeout),e.unsubscribe()}})},t.prototype.unsubscribe=function(){this.subscription&&(clearTimeout(this.timeout),this.subscription.unsubscribe())},t.prototype.stop=function(){return N(this,void 0,void 0,function(){return O(this,function(e){return this.unsubscribe(),[2]})})},t.prototype.socketDisconnected=function(){var e=this;this.observer&&typeof this.observer.next=="function"&&(this.observer.next({online:!1}),this.timeout=setTimeout(function(){var r=K({},e.connectionStatus);e.observer.next(r)},wh))},t}();const Th=Ah;var Ih=function(){function t(e,r){this.outbox=e,this.ownSymbol=r}return t.prototype.merge=function(e,r,n){return N(this,void 0,void 0,function(){var i,a,o,s,c;return O(this,function(u){switch(u.label){case 0:return[4,this.outbox.getForModel(e,r,n)];case 1:return a=u.sent(),o=r._deleted,a.length!==0?[3,5]:o?(i=X.DELETE,[4,e.delete(r,void 0,this.ownSymbol)]):[3,3];case 2:return u.sent(),[3,5];case 3:return[4,e.save(r,void 0,this.ownSymbol)];case 4:s=M.apply(void 0,[u.sent(),1]),c=M(s[0],2),i=c[1],u.label=5;case 5:return[2,i]}})})},t.prototype.mergePage=function(e,r,n,i){return N(this,void 0,void 0,function(){var a,o,s,c,u,l,f,h;return O(this,function(d){switch(d.label){case 0:a=new Map;try{for(o=j(n),s=o.next();!s.done;s=o.next())c=s.value,u=it(i,c),a.set(u,c)}catch(p){f={error:p}}finally{try{s&&!s.done&&(h=o.return)&&h.call(o)}finally{if(f)throw f.error}}return l=ie(a.values()),[4,e.batchSave(r,l,this.ownSymbol)];case 1:return[2,d.sent()]}})})},t}(),Oh=function(){function t(e,r,n,i){this.schema=e,this.MutationEvent=r,this.modelInstanceCreator=n,this.ownSymbol=i}return t.prototype.enqueue=function(e,r){return N(this,void 0,void 0,function(){var n=this;return O(this,function(i){switch(i.label){case 0:return[4,e.runExclusive(function(a){return N(n,void 0,void 0,function(){var o,s,c,u,l,f,h,d,p;return O(this,function(y){switch(y.label){case 0:return o=this.schema.namespaces[ar].models.MutationEvent,s=ne.createFromAST(o,{and:[{modelId:{eq:r.modelId}},{id:{ne:this.inProgressMutationEventId}}]}),[4,a.query(this.MutationEvent,s)];case 1:return c=M.apply(void 0,[y.sent(),1]),u=c[0],u!==void 0?[3,3]:[4,a.save(r,void 0,this.ownSymbol)];case 2:return y.sent(),[2];case 3:return l=r.operation,u.operation!==J.CREATE?[3,8]:l!==J.DELETE?[3,5]:[4,a.delete(this.MutationEvent,s)];case 4:return y.sent(),[3,7];case 5:return f=this.mergeUserFields(u,r),[4,a.save(this.MutationEvent.copyOf(u,function(g){g.data=f.data}),void 0,this.ownSymbol)];case 6:y.sent(),y.label=7;case 7:return[3,12];case 8:return h=r.condition,d=JSON.parse(h),p=void 0,Object.keys(d).length!==0?[3,10]:(p=this.mergeUserFields(u,r),[4,a.delete(this.MutationEvent,s)]);case 9:y.sent(),y.label=10;case 10:return p=p||r,[4,a.save(p,void 0,this.ownSymbol)];case 11:y.sent(),y.label=12;case 12:return[2]}})})})];case 1:return i.sent(),[2]}})})},t.prototype.dequeue=function(e,r,n){return N(this,void 0,void 0,function(){var i;return O(this,function(a){switch(a.label){case 0:return[4,this.peek(e)];case 1:return i=a.sent(),r?[4,this.syncOutboxVersionsOnDequeue(e,r,i,n)]:[3,3];case 2:a.sent(),a.label=3;case 3:return[4,e.delete(i)];case 4:return a.sent(),this.inProgressMutationEventId=void 0,[2,i]}})})},t.prototype.peek=function(e){return N(this,void 0,void 0,function(){var r;return O(this,function(n){switch(n.label){case 0:return[4,e.queryOne(this.MutationEvent,ht.FIRST)];case 1:return r=n.sent(),this.inProgressMutationEventId=r?r.id:void 0,[2,r]}})})},t.prototype.getForModel=function(e,r,n){return N(this,void 0,void 0,function(){var i,a,o;return O(this,function(s){switch(s.label){case 0:return i=this.schema.namespaces[ar].models.MutationEvent,a=it(n,r),[4,e.query(this.MutationEvent,ne.createFromAST(i,{and:{modelId:{eq:a}}}))];case 1:return o=s.sent(),[2,o]}})})},t.prototype.getModelIds=function(e){return N(this,void 0,void 0,function(){var r,n;return O(this,function(i){switch(i.label){case 0:return[4,e.query(this.MutationEvent)];case 1:return r=i.sent(),n=new Set,r.forEach(function(a){var o=a.modelId;return n.add(o)}),[2,n]}})})},t.prototype.syncOutboxVersionsOnDequeue=function(e,r,n,i){return N(this,void 0,void 0,function(){var a,o,s,c,u,l,f,h,d,p,y,g,v,m=this;return O(this,function(S){switch(S.label){case 0:return n.operation!==i?[2]:(a=r._version,o=r._lastChangedAt,r._deleted,s=_t(r,["_version","_lastChangedAt","_deleted"]),c=this.removeTimestampFields(n.model,s),u=JSON.parse(n.data),u?(u._version,u._lastChangedAt,u._deleted,l=_t(u,["_version","_lastChangedAt","_deleted"]),f=this.removeTimestampFields(n.model,l),Sn(c,f,!0)?(h=this.schema.namespaces[ar].models.MutationEvent,d=this.schema.namespaces.user.models[n.model],p=it(d,r),y=ne.createFromAST(h,{and:[{modelId:{eq:p}},{id:{ne:this.inProgressMutationEventId}}]}),[4,e.query(this.MutationEvent,y)]):[2]):[2]);case 1:return g=S.sent(),g.length?(v=g.map(function(b){var E=JSON.parse(b.data),A=K(K({},E),{_version:a,_lastChangedAt:o});return m.MutationEvent.copyOf(b,function(w){w.data=JSON.stringify(A)})}),[4,e.delete(this.MutationEvent,y)]):[2];case 2:return S.sent(),[4,Promise.all(v.map(function(b){return N(m,void 0,void 0,function(){return O(this,function(E){switch(E.label){case 0:return[4,e.save(b,void 0,this.ownSymbol)];case 1:return[2,E.sent()]}})})}))];case 3:return S.sent(),[2]}})})},t.prototype.mergeUserFields=function(e,r){var n=JSON.parse(e.data),i=n._version,a=n._lastChangedAt,o=n._deleted,s=_t(n,["_version","_lastChangedAt","_deleted"]),c=JSON.parse(r.data);c._version,c._lastChangedAt,c._deleted;var u=_t(c,["_version","_lastChangedAt","_deleted"]),l=JSON.stringify(K(K({_version:i,_lastChangedAt:a,_deleted:o},s),u));return this.modelInstanceCreator(this.MutationEvent,K(K({},r),{data:l}))},t.prototype.removeTimestampFields=function(e,r){var n,i,a="createdAt",o="updatedAt",s=a,c=o,u=(n=this.schema.namespaces[hr].models[e].attributes)===null||n===void 0?void 0:n.find(function(f){return f.type==="model"}),l=(i=u==null?void 0:u.properties)===null||i===void 0?void 0:i.timestamps;return l&&(s=l[a],c=l[o]),delete r[s],delete r[c],r},t}(),Pa=function(t){return/^Connection failed: Connection Timeout/.test(t.message)},ka=function(t){return/^Error: Request failed with status code 5\d\d/.test(t.message)},Nh={BadModel:function(){return!1},BadRecord:function(t){var e=t.message;return/^Cannot return \w+ for [\w-_]+ type/.test(e)||/^Variable '.+' has coerced Null value for NonNull type/.test(e)},ConfigError:function(){return!1},Transient:function(t){return Pa(t)||ka(t)},Unauthorized:function(t){return/^Request failed with status code 401/.test(t.message)}},_h={BadModel:function(){return!1},BadRecord:function(){return!1},ConfigError:function(){return!1},Transient:function(t){var e=es(t);return Pa(e)||ka(e)},Unauthorized:function(t){var e=es(t);return/Connection failed.+Unauthorized/.test(e.message)}},Ch={BadModel:function(){return!1},BadRecord:function(t){return/^Cannot return \w+ for [\w-_]+ type/.test(t.message)},ConfigError:function(){return!1},Transient:function(t){return Pa(t)||ka(t)},Unauthorized:function(){return!1}};function es(t){var e=t.error,r=M((e===void 0?{errors:[]}:e).errors,1),n=r[0];return n}function xh(t){return Da(Nh,t)}function Ph(t){return Da(_h,t)}function kh(t){return Da(Ch,t)}function Da(t,e){var r,n,i=ie(Object.keys(t));try{for(var a=j(i),o=a.next();!o.done;o=a.next()){var s=o.value,c=t[s];if(c!=null&&c(e))return s}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return"Unknown"}var Dh=10,vt=new he("DataStore"),Rh=function(){function t(e,r,n,i,a,o,s,c,u,l,f){s===void 0&&(s={}),this.schema=e,this.storage=r,this.userClasses=n,this.outbox=i,this.modelInstanceCreator=a,this.MutationEvent=o,this.amplifyConfig=s,this.authModeStrategy=c,this.errorHandler=u,this.conflictHandler=l,this.amplifyContext=f,this.typeQuery=new WeakMap,this.processing=!1,this.runningProcesses=new Mt,this.amplifyContext.API=this.amplifyContext.API||Dr,this.generateQueries()}return t.prototype.generateQueries=function(){var e=this;Object.values(this.schema.namespaces).forEach(function(r){Object.values(r.models).filter(function(n){var i=n.syncable;return i}).forEach(function(n){var i=M(Sr(r,n,"CREATE"),1),a=i[0],o=M(Sr(r,n,"UPDATE"),1),s=o[0],c=M(Sr(r,n,"DELETE"),1),u=c[0];e.typeQuery.set(n,[a,s,u])})})},t.prototype.isReady=function(){return this.observer!==void 0},t.prototype.start=function(){var e=this;this.runningProcesses=new Mt;var r=new xe(function(n){e.observer=n;try{e.resume()}catch(i){throw vt.error("mutations processor start error",i),i}return e.runningProcesses.addCleaner(function(){return N(e,void 0,void 0,function(){return O(this,function(i){return this.removeObserver(),this.pause(),[2]})})})});return r},t.prototype.stop=function(){return N(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return this.removeObserver(),[4,this.runningProcesses.close()];case 1:return e.sent(),[4,this.runningProcesses.open()];case 2:return e.sent(),[2]}})})},t.prototype.removeObserver=function(){var e,r;(r=(e=this.observer)===null||e===void 0?void 0:e.complete)===null||r===void 0||r.call(e),this.observer=void 0},t.prototype.resume=function(){return N(this,void 0,void 0,function(){var e=this;return O(this,function(r){switch(r.label){case 0:return[4,this.runningProcesses.isOpen&&this.runningProcesses.add(function(n){return N(e,void 0,void 0,function(){var i,a,o,s,c,u=this,l;return O(this,function(f){switch(f.label){case 0:if(this.processing||!this.isReady()||!this.runningProcesses.isOpen)return[2];this.processing=!0,a=hr,o=function(){var h,d,p,y,g,v,m,S,b,E,A,w,T,I,x,C;return O(this,function(_){switch(_.label){case 0:h=i.model,d=i.operation,p=i.data,y=i.condition,g=s.userClasses[h],v=void 0,m=void 0,S=void 0,_.label=1;case 1:return _.trys.push([1,4,,5]),[4,Ca({authModeStrategy:s.authModeStrategy,defaultAuthMode:s.amplifyConfig.aws_appsync_authenticationType,modelName:h,schema:s.schema})];case 2:return b=_.sent(),E=b[d.toUpperCase()],A=0,w=function(){return N(u,void 0,void 0,function(){var P,D;return O(this,function(R){switch(R.label){case 0:return R.trys.push([0,2,,4]),vt.debug("Attempting mutation with authMode: "+E[A]),[4,this.jitteredRetry(a,h,d,p,y,g,this.MutationEvent,i,E[A],n)];case 1:return P=R.sent(),vt.debug("Mutation sent successfully with authMode: "+E[A]),[2,P];case 2:if(D=R.sent(),A++,A>=E.length)throw vt.debug("Mutation failed with authMode: "+E[A-1]),D;return vt.debug("Mutation failed with authMode: "+E[A-1]+". Retrying with authMode: "+E[A]),[4,w()];case 3:return[2,R.sent()];case 4:return[2]}})})},[4,w()];case 3:return C=M.apply(void 0,[_.sent(),3]),v=C[0],m=C[1],S=C[2],[3,5];case 4:return T=_.sent(),T.message==="Offline"||T.message==="RetryMutation"?[2,"continue"]:[3,5];case 5:return v!==void 0?[3,7]:(vt.debug("done retrying"),[4,s.storage.runExclusive(function(P){return N(u,void 0,void 0,function(){return O(this,function(D){switch(D.label){case 0:return[4,this.outbox.dequeue(P)];case 1:return D.sent(),[2]}})})})]);case 6:return _.sent(),[2,"continue"];case 7:return I=v.data[m],x=!1,[4,s.storage.runExclusive(function(P){return N(u,void 0,void 0,function(){return O(this,function(D){switch(D.label){case 0:return[4,this.outbox.dequeue(P,I,d)];case 1:return D.sent(),[4,this.outbox.peek(P)];case 2:return x=D.sent()!==void 0,[2]}})})})];case 8:return _.sent(),(l=(_=s.observer)===null||_===void 0?void 0:_.next)===null||l===void 0||l.call(_,{operation:d,modelDefinition:S,model:I,hasMore:x}),[2]}})},s=this,f.label=1;case 1:return c=this.processing&&this.runningProcesses.isOpen,c?[4,this.outbox.peek(this.storage)]:[3,3];case 2:c=(i=f.sent())!==void 0,f.label=3;case 3:return c?[5,o()]:[3,5];case 4:return f.sent(),[3,1];case 5:return this.pause(),[2]}})})},"mutation resume loop")];case 1:return r.sent(),[2]}})})},t.prototype.jitteredRetry=function(e,r,n,i,a,o,s,c,u,l){return N(this,void 0,void 0,function(){var f=this;return O(this,function(h){switch(h.label){case 0:return[4,ju(function(d,p,y,g,v,m,S){return N(f,void 0,void 0,function(){var b,E,A,w,T,I,x,C,_,P,D,R,q,L,z,pe,U,H,Y,$,Z,ae,oe,se,ue,W,me,ce;return O(this,function(Q){switch(Q.label){case 0:return b=M(this.createQueryVariables(e,d,p,y,g),5),E=b[0],A=b[1],w=b[2],T=b[3],I=b[4],[4,Tn(u,this.amplifyConfig)];case 1:x=Q.sent(),C={query:E,variables:A,authMode:u,authToken:x,userAgentSuffix:bn},_=0,P=this.opTypeFromTransformerOperation(p),Q.label=2;case 2:return Q.trys.push([2,4,,17]),[4,this.amplifyContext.API.graphql(C)];case 3:return D=Q.sent(),[2,[D,T,I]];case 4:if(R=Q.sent(),!(R.errors&&R.errors.length>0))return[3,15];if(q=M(R.errors,1),L=q[0],z=L.originalError,pe=(z===void 0?{}:z).code,U=pe===void 0?null:pe,L.errorType==="Unauthorized")throw new Yt("Unauthorized");if(L.message==="Network Error"||U==="ECONNABORTED")throw this.processing?new Error("Network Error"):new Yt("Offline");return L.errorType!=="ConflictUnhandled"?[3,13]:(_++,H=void 0,_>Dh?(H=Ko,[3,8]):[3,5]);case 5:return Q.trys.push([5,7,,8]),[4,this.conflictHandler({modelConstructor:v,localModel:this.modelInstanceCreator(v,A.input),remoteModel:this.modelInstanceCreator(v,L.data),operation:P,attempts:_})];case 6:return H=Q.sent(),[3,8];case 7:return Y=Q.sent(),vt.warn("conflict trycatch",Y),[3,17];case 8:return H!==Ko?[3,11]:($=M(Sr(this.schema.namespaces[e],I,"GET"),1),Z=M($[0],3),ae=Z[1],oe=Z[2],[4,Tn(u,this.amplifyConfig)]);case 9:return se=Q.sent(),[4,this.amplifyContext.API.graphql({query:oe,variables:{id:A.input.id},authMode:u,authToken:se,userAgentSuffix:bn})];case 10:return ue=Q.sent(),[2,[ue,ae,I]];case 11:return W=this.schema.namespaces[e],me=Au(W.relationships,I,P,v,H,w,m,this.modelInstanceCreator,S.id),[4,this.storage.save(me)];case 12:throw Q.sent(),new Yt("RetryMutation");case 13:try{this.errorHandler({recoverySuggestion:"Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues",localModel:A.input,message:L.message,operation:p,errorType:xh(L),errorInfo:L.errorInfo,process:xr.mutate,cause:L,remoteModel:L.data?this.modelInstanceCreator(v,L.data):null})}catch(ge){vt.warn("Mutation error handler failed with:",ge)}finally{return[2,L.data?[{data:(ce={},ce[T]=L.data,ce)},T,I]:[]]}case 14:return[3,16];case 15:throw new Yt(R);case 16:return[3,17];case 17:if(C)return[3,2];Q.label=18;case 18:return[2]}})})},[r,n,i,a,o,s,c],Fh,l)];case 1:return[2,h.sent()]}})})},t.prototype.createQueryVariables=function(e,r,n,i,a){var o,s,c,u,l,f,h,d,p=this.schema.namespaces[e].models[r],y=this.schema.namespaces[e].keys[r].primaryKey,g=(h=p.attributes)===null||h===void 0?void 0:h.find(function(W){return W.type==="auth"}),v=((d=g==null?void 0:g.properties)===null||d===void 0?void 0:d.rules.map(function(W){return W.ownerField}).filter(function(W){return W}))||["owner"],m=this.typeQuery.get(p),S=M(m.find(function(W){var me=M(W,1),ce=me[0];return ce===n}),3),b=S[1],E=S[2],A=JSON.parse(i),w=A._version,T=_t(A,["_version"]),I={};if(y!=null&&y.length)try{for(var x=j(y),C=x.next();!C.done;C=x.next()){var _=C.value;I[_]=T[_]}}catch(W){o={error:W}}finally{try{C&&!C.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}else I[Rr]=T.id;var P;if(n===J.DELETE)P=I;else{P={};var D=Object.values(p.fields);try{for(var R=j(D),q=R.next();!q.done;q=R.next()){var L=q.value,z=L.name,pe=L.type,U=L.association,H=L.isReadOnly;if(!H&&!(v.includes(z)&&T[z]===null)){if(bu(pe)){if(Oa(U)&&U.connectionType==="BELONGS_TO"){var Y=yu(U);if(Y)try{for(var $=(l=void 0,j(Y)),Z=$.next();!Z.done;Z=$.next()){var ae=Z.value;P[ae]=T[ae]}}catch(W){l={error:W}}finally{try{Z&&!Z.done&&(f=$.return)&&f.call($)}finally{if(l)throw l.error}}}continue}n===J.UPDATE&&!T.hasOwnProperty(z)||(P[z]=T[z])}}}catch(W){c={error:W}}finally{try{q&&!q.done&&(u=R.return)&&u.call(R)}finally{if(c)throw c.error}}}var oe=K(K({},P),{_version:w}),se=JSON.parse(a),ue=K({input:oe},n===J.CREATE?{}:{condition:Object.keys(se).length>0?se:null});return[E,ue,se,b,p]},t.prototype.opTypeFromTransformerOperation=function(e){switch(e){case J.CREATE:return X.INSERT;case J.DELETE:return X.DELETE;case J.UPDATE:return X.UPDATE;case J.GET:break;default:throw new Error("Invalid operation "+e)}},t.prototype.pause=function(){this.processing=!1},t}(),Nu=5*60*1e3,Mh=qu(Nu),Fh=function(t,e,r){var n=Mh(t);return n===!1&&(r==null?void 0:r.message)==="Network Error"?Nu:n},yt=new he("DataStore"),In;(function(t){t.CONNECTED="CONNECTED"})(In||(In={}));var Xt;(function(t){t[t.none=0]="none",t[t.unauth=1]="unauth",t[t.auth=2]="auth"})(Xt||(Xt={}));var Lh=function(){function t(e,r,n,i,a,o){n===void 0&&(n={}),o===void 0&&(o={Auth:St,API:Dr,Cache:Ft}),this.schema=e,this.syncPredicates=r,this.amplifyConfig=n,this.authModeStrategy=i,this.errorHandler=a,this.amplifyContext=o,this.typeQuery=new WeakMap,this.buffer=[],this.runningProcesses=new Mt}return t.prototype.buildSubscription=function(e,r,n,i,a,o,s,c){c===void 0&&(c=!1);var u=this.amplifyConfig.aws_appsync_authenticationType,l=this.getAuthorizationInfo(r,i,u,a,o,s)||{},f=l.isOwner,h=l.ownerField,d=l.ownerValue,p=M(Kd(e,r,n,f,h,c),3),y=p[0],g=p[1],v=p[2];return{authMode:s,opType:y,opName:g,query:v,isOwner:f,ownerField:h,ownerValue:d}},t.prototype.getAuthorizationInfo=function(e,r,n,i,a,o){i===void 0&&(i={}),a===void 0&&(a={});var s=wu(e),c=o===Ne.AWS_IAM&&s.find(function(p){return p.authStrategy==="private"&&p.provider==="iam"});if(c&&r===Xt.unauth)return null;var u=s.filter(function(p){return p.authStrategy==="groups"&&["userPools","oidc"].includes(p.provider)}),l=(o===Ne.AMAZON_COGNITO_USER_POOLS||o===Ne.OPENID_CONNECT)&&u.find(function(p){var y=Vo(i,p),g=Vo(a,p);return ie(y,g).find(function(v){return p.groups.find(function(m){return m===v})})});if(l)return{authMode:o,isOwner:!1};var f=o===Ne.AMAZON_COGNITO_USER_POOLS?s.filter(function(p){return p.authStrategy==="owner"&&p.provider==="userPools"}):[],h;if(f.forEach(function(p){var y,g=i[p.identityClaim],v=((y=e.fields[p.ownerField])===null||y===void 0?void 0:y.isArray)!==!0,m=v&&!p.areSubscriptionsPublic;g&&(h={authMode:Ne.AMAZON_COGNITO_USER_POOLS,isOwner:m,ownerField:p.ownerField,ownerValue:g})}),h)return h;var d=o===Ne.OPENID_CONNECT?s.filter(function(p){return p.authStrategy==="owner"&&p.provider==="oidc"}):[];return d.forEach(function(p){var y,g=a[p.identityClaim],v=((y=e.fields[p.ownerField])===null||y===void 0?void 0:y.isArray)!==!0,m=v&&!p.areSubscriptionsPublic;g&&(h={authMode:Ne.OPENID_CONNECT,isOwner:m,ownerField:p.ownerField,ownerValue:g})}),h||{authMode:o||n,isOwner:!1}},t.prototype.hubQueryCompletionListener=function(e,r){var n=r.payload.event;n===Oe.SUBSCRIPTION_ACK&&e()},t.prototype.start=function(){var e=this;this.runningProcesses=this.runningProcesses||new Mt;var r=new xe(function(i){var a=[],o={},s,c,u=Xt.none;return e.runningProcesses.add(function(){return N(e,void 0,void 0,function(){var l,f,h,d,p,y,g,v,m,S,b=this;return O(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,this.amplifyContext.Auth.currentCredentials()];case 1:return l=E.sent(),u=l.authenticated?Xt.auth:Xt.unauth,[3,3];case 2:return E.sent(),[3,3];case 3:return E.trys.push([3,5,,6]),[4,this.amplifyContext.Auth.currentSession()];case 4:return f=E.sent(),s=f.getIdToken().decodePayload(),[3,6];case 5:return E.sent(),[3,6];case 6:if(E.trys.push([6,11,,12]),h=this.amplifyConfig,d=h.aws_cognito_region,p=h.Auth,!d||p&&!p.region)throw"Auth is not configured";return y=void 0,[4,this.amplifyContext.Cache.getItem("federatedInfo")];case 7:return g=E.sent(),g?(y=g.token,[3,10]):[3,8];case 8:return[4,this.amplifyContext.Auth.currentAuthenticatedUser()];case 9:v=E.sent(),v&&(y=v.token),E.label=10;case 10:return y&&(m=y.split(".")[1],c=JSON.parse(Buffer.from(m,"base64").toString("utf8"))),[3,12];case 11:return S=E.sent(),yt.debug("error getting OIDC JWT",S),[3,12];case 12:return Object.values(this.schema.namespaces).forEach(function(A){Object.values(A.models).filter(function(w){var T=w.syncable;return T}).forEach(function(w){return b.runningProcesses.isOpen&&b.runningProcesses.add(function(){return N(b,void 0,void 0,function(){var T,I,x,C,_,P,D,R,q,L,z=this;return O(this,function(pe){switch(pe.label){case 0:return[4,Ca({authModeStrategy:this.authModeStrategy,defaultAuthMode:this.amplifyConfig.aws_appsync_authenticationType,modelName:w.name,schema:this.schema})];case 1:return T=pe.sent(),I=T.READ,o=K(K({},o),(R={},R[w.name]=(q={},q[J.CREATE]=[],q[J.UPDATE]=[],q[J.DELETE]=[],q),R)),x=[J.CREATE,J.UPDATE,J.DELETE],C=(L={},L[J.CREATE]=0,L[J.UPDATE]=0,L[J.DELETE]=0,L),_=ne.getPredicates(this.syncPredicates.get(w),!1),P=_!==void 0,D=function(U,H){return H===void 0&&(H=P),N(z,void 0,void 0,function(){var Y,$,Z,ae,oe,se,ue,W,me,ce,Q,ge,Te,ve=this;return O(this,function(Le){switch(Le.label){case 0:return Y=this.buildSubscription(A,w,U,u,s,c,I[C[U]],H),$=Y.opType,Z=Y.opName,ae=Y.query,oe=Y.isOwner,se=Y.ownerField,ue=Y.ownerValue,W=Y.authMode,[4,Tn(W,this.amplifyConfig)];case 1:if(me=Le.sent(),ce={},H&&_&&(ce.filter=Mr(_)),oe){if(!ue)return i.error("Owner field required, sign in is needed in order to perform this operation"),[2];ce[se]=ue}return yt.debug("Attempting "+U+" subscription with authMode: "+I[C[U]]),Q=bn,ge=this.amplifyContext.API.graphql(K(K({query:ae,variables:ce},{authMode:W}),{authToken:me,userAgentSuffix:Q})),o[w.name][$].push(ge.map(function(V){var re=V.value;return re}).subscribe({next:function(V){var re=V.data,Ee=V.errors;if(Array.isArray(Ee)&&Ee.length>0){var le=Ee.map(function(Tt){var vr=Tt.message;return vr});yt.warn("Skipping incoming subscription. Messages: "+le.join(`
`)),ve.drainBuffer();return}var ee=ne.getPredicates(ve.syncPredicates.get(w),!1),je=re,Fr=Z,pr=je[Fr];ve.passesPredicateValidation(pr,ee)&&ve.pushToBuffer($,w,pr),ve.drainBuffer()},error:function(V){return N(ve,void 0,void 0,function(){var re,Ee,le,ee,je,Fr,pr;return O(this,function(Tt){switch(Tt.label){case 0:if(re=V.error,Ee=M((re===void 0?{errors:[]}:re).errors,1),le=Ee[0],ee=(le===void 0?{}:le).message,je=ee===void 0?"":ee,Fr=H&&this.catchRTFError(je,w,_),Fr)return o[w.name][$].forEach(function(vr){return vr.unsubscribe()}),o[w.name][$]=[],D(U,!1),[2];if(je.includes(Oe.REALTIME_SUBSCRIPTION_INIT_ERROR)||je.includes(Oe.CONNECTION_FAILED))if(o[w.name][$].forEach(function(vr){return vr.unsubscribe()}),o[w.name][$]=[],C[U]++,C[U]>=I.length)yt.debug(U+" subscription failed with authMode: "+I[C[U]-1]);else return yt.debug(U+" subscription failed with authMode: "+I[C[U]-1]+". Retrying with authMode: "+I[C[U]]),D(U),[2];yt.warn("subscriptionError",je),Tt.label=1;case 1:return Tt.trys.push([1,3,,4]),[4,this.errorHandler({recoverySuggestion:"Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues",localModel:null,message:je,model:w.name,operation:U,errorType:Ph(V),process:xr.subscribe,remoteModel:null,cause:V})];case 2:return Tt.sent(),[3,4];case 3:return pr=Tt.sent(),yt.error("Subscription error handler failed with:",pr),[3,4];case 4:return typeof Te=="function"&&Te(),je.includes('"errorType":"Unauthorized"')||je.includes('"errorType":"OperationDisabled"')?[2]:(i.error(je),[2])}})})}})),a.push(function(){return N(ve,void 0,void 0,function(){var V,re=this;return O(this,function(Ee){switch(Ee.label){case 0:return[4,new Promise(function(le){Te=le,V=re.hubQueryCompletionListener.bind(re,le),bt.listen("api",V)})];case 1:return Ee.sent(),bt.remove("api",V),[2]}})})}()),[2]}})})},x.forEach(function(U){return D(U)}),[2]}})})})})}),this.runningProcesses.isOpen&&this.runningProcesses.add(function(){return Promise.all(a).then(function(){i.next(In.CONNECTED)})}),[2]}})})},"subscription processor new subscriber"),e.runningProcesses.addCleaner(function(){return N(e,void 0,void 0,function(){return O(this,function(l){return Object.keys(o).forEach(function(f){o[f][J.CREATE].forEach(function(h){return h.unsubscribe()}),o[f][J.UPDATE].forEach(function(h){return h.unsubscribe()}),o[f][J.DELETE].forEach(function(h){return h.unsubscribe()})}),[2]})})})}),n=new xe(function(i){return e.dataObserver=i,e.drainBuffer(),e.runningProcesses.addCleaner(function(){return N(e,void 0,void 0,function(){return O(this,function(a){return this.dataObserver=null,[2]})})})});return[r,n]},t.prototype.stop=function(){return N(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return[4,this.runningProcesses.close()];case 1:return e.sent(),[4,this.runningProcesses.open()];case 2:return e.sent(),[2]}})})},t.prototype.passesPredicateValidation=function(e,r){if(!r)return!0;var n=r.predicates,i=r.type;return qt(e,i,n)},t.prototype.pushToBuffer=function(e,r,n){this.buffer.push([e,r,n])},t.prototype.drainBuffer=function(){var e=this;this.dataObserver&&(this.buffer.forEach(function(r){return e.dataObserver.next(r)}),this.buffer=[])},t.prototype.catchRTFError=function(e,r,n){var i=`Backend subscriptions filtering error.
Subscriptions filtering will be applied clientside.
`,a={"UnknownArgument: Unknown field argument filter":Me.UnknownField,"Filters exceed maximum attributes limit":Me.MaxAttributes,"Filters combination exceed maximum limit":Me.MaxCombinations,"filter uses same fieldName multiple time":Me.RepeatedFieldname,"The variables input contains a field name 'not'":Me.NotGroup,"The variables input contains a field that is not defined for input object type":Me.FieldNotInType},o=M(Object.entries(a).find(function(u){var l=M(u,1),f=l[0];return e.includes(f)})||[],2);o[0];var s=o[1];if(s!==void 0){var c=Jd(s,r,n);return yt.warn(i+`
`+e+`
`+c),!0}return!1},t}(),ts={items:[],nextToken:null,startedAt:null},et=new he("DataStore"),jh=function(){function t(e,r,n,i,a,o){n===void 0&&(n={}),this.schema=e,this.syncPredicates=r,this.amplifyConfig=n,this.authModeStrategy=i,this.errorHandler=a,this.amplifyContext=o,this.typeQuery=new WeakMap,this.runningProcesses=new Mt,o.API=o.API||Dr,this.generateQueries()}return t.prototype.generateQueries=function(){var e=this;Object.values(this.schema.namespaces).forEach(function(r){Object.values(r.models).filter(function(n){var i=n.syncable;return i}).forEach(function(n){var i=M(Sr(r,n,"LIST"),1),a=M(i[0]),o=a.slice(1);e.typeQuery.set(n,o)})})},t.prototype.graphqlFilterFromPredicate=function(e){if(!this.syncPredicates)return null;var r=ne.getPredicates(this.syncPredicates.get(e),!1);return r?Mr(r):null},t.prototype.retrievePage=function(e,r,n,i,a,o){return i===void 0&&(i=null),N(this,void 0,void 0,function(){var s,c,u,l,f,h,d,p,y,g,v,m,S,b,E,A=this;return O(this,function(w){switch(w.label){case 0:return s=M(this.typeQuery.get(e),2),c=s[0],u=s[1],l={limit:i,nextToken:n,lastSync:r,filter:a},[4,Ca({authModeStrategy:this.authModeStrategy,defaultAuthMode:this.amplifyConfig.aws_appsync_authenticationType,modelName:e.name,schema:this.schema})];case 1:return f=w.sent(),h=f.READ,d=0,p=function(){return N(A,void 0,void 0,function(){var T,I,x,C;return O(this,function(_){switch(_.label){case 0:if(!this.runningProcesses.isOpen)throw new Error("sync.retreievePage termination was requested. Exiting.");_.label=1;case 1:return _.trys.push([1,3,,5]),et.debug("Attempting sync with authMode: "+h[d]),[4,this.jitteredRetry({query:u,variables:l,opName:c,modelDefinition:e,authMode:h[d],onTerminate:o})];case 2:return T=_.sent(),et.debug("Sync successful with authMode: "+h[d]),[2,T];case 3:if(I=_.sent(),d++,d>=h.length){if(x=h[d-1],et.debug("Sync failed with authMode: "+x,I),Ho(I)||Go(I))return et.warn("User is unauthorized to query "+c+" with auth mode "+x+". No data could be returned."),[2,{data:(C={},C[c]=ts,C)}];throw I}return et.debug("Sync failed with authMode: "+h[d-1]+". Retrying with authMode: "+h[d]),[4,p()];case 4:return[2,_.sent()];case 5:return[2]}})})},[4,p()];case 2:return y=w.sent().data,g=y,v=c,m=g[v],S=m.items,b=m.nextToken,E=m.startedAt,[2,{nextToken:b,startedAt:E,items:S}]}})})},t.prototype.jitteredRetry=function(e){var r=e.query,n=e.variables,i=e.opName,a=e.modelDefinition,o=e.authMode,s=e.onTerminate;return N(this,void 0,void 0,function(){var c=this;return O(this,function(u){switch(u.label){case 0:return[4,ys(function(l,f){return N(c,void 0,void 0,function(){var h,d,p,y,g,v,m,S=this,b,E,A,w;return O(this,function(T){switch(T.label){case 0:return T.trys.push([0,3,,6]),[4,Tn(o,this.amplifyConfig)];case 1:return h=T.sent(),[4,this.amplifyContext.API.graphql({query:l,variables:f,authMode:o,authToken:h,userAgentSuffix:bn})];case 2:return[2,T.sent()];case 3:if(d=T.sent(),p=Ho(d)||Go(d),p)throw et.error("Sync processor retry error:",d),new Yt(p);return y=!!(!((E=(b=d==null?void 0:d.data)===null||b===void 0?void 0:b[i])===null||E===void 0)&&E.items),g=(d==null?void 0:d.errors)&&d.errors.some(function(I){return I.errorType==="Unauthorized"}),v=(d==null?void 0:d.errors)&&d.errors.filter(function(I){return I.errorType!=="Unauthorized"}),m=d,y&&(m.data[i].items=m.data[i].items.filter(function(I){return I!==null})),y&&(v!=null&&v.length)?[4,Promise.all(v.map(function(I){return N(S,void 0,void 0,function(){var x;return O(this,function(C){switch(C.label){case 0:return C.trys.push([0,2,,3]),[4,this.errorHandler({recoverySuggestion:"Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues",localModel:null,message:I.message,model:a.name,operation:i,errorType:kh(I),process:xr.sync,remoteModel:null,cause:I})];case 1:return C.sent(),[3,3];case 2:return x=C.sent(),et.error("Sync error handler failed with:",x),[3,3];case 3:return[2]}})})}))]:[3,5];case 4:T.sent(),bt.dispatch("datastore",{event:"nonApplicableDataReceived",data:{errors:v,modelName:a.name}}),T.label=5;case 5:if(g)return et.warn("queryError","User is unauthorized to query "+i+", some items could not be returned."),m.data=m.data||{},m.data[i]=K(K({},ts),m.data[i]),[2,m];if(!((w=(A=m.data)===null||A===void 0?void 0:A[i].items)===null||w===void 0)&&w.length)return[2,m];throw d;case 6:return[2]}})})},[r,n],void 0,s)];case 1:return[2,u.sent()]}})})},t.prototype.start=function(e){var r=this,n=this.amplifyConfig,i=n.maxRecordsToSync,a=n.syncPageSize,o=new Map,s=new xe(function(c){var u=Object.values(r.schema.namespaces).reduce(function(f,h){var d,p;try{for(var y=j(Array.from(h.modelTopologicalOrdering.keys())),g=y.next();!g.done;g=y.next()){var v=g.value,m=e.get(h.models[v]);f.set(h.models[v],m)}}catch(S){d={error:S}}finally{try{g&&!g.done&&(p=y.return)&&p.call(y)}finally{if(d)throw d.error}}return f},new Map),l=Array.from(u.entries()).filter(function(f){var h=M(f,1),d=h[0].syncable;return d}).map(function(f){var h=M(f,2),d=h[0],p=M(h[1],2),y=p[0],g=p[1];return r.runningProcesses.isOpen&&r.runningProcesses.add(function(v){return N(r,void 0,void 0,function(){var m,S,b,E,A,w,T,I,x,C=this;return O(this,function(_){switch(_.label){case 0:return m=!1,S=null,b=null,E=null,A=0,w=this.graphqlFilterFromPredicate(d),T=this.schema.namespaces[y].modelTopologicalOrdering.get(d.name),I=T.map(function(P){return o.get(y+"_"+P)}),x=new Promise(function(P){return N(C,void 0,void 0,function(){var D,R;return O(this,function(q){switch(q.label){case 0:return[4,Promise.all(I)];case 1:q.sent(),q.label=2;case 2:return this.runningProcesses.isOpen?(D=Math.min(i-A,a),[4,this.retrievePage(d,g,S,D,w,v)]):[2];case 3:R=q.sent(),E=R.items,S=R.nextToken,b=R.startedAt,A+=E.length,m=S===null||A>=i,c.next({namespace:y,modelDefinition:d,items:E,done:m,startedAt:b,isFullSync:!g}),q.label=4;case 4:if(!m)return[3,2];q.label=5;case 5:return P(),[2]}})})}),o.set(y+"_"+d.name,x),[4,x];case 1:return _.sent(),[2]}})})},"adding model "+d.name)});Promise.all(l).then(function(){c.complete()})});return s},t.prototype.stop=function(){return N(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return et.debug("stopping sync processor"),[4,this.runningProcesses.close()];case 1:return e.sent(),[4,this.runningProcesses.open()];case 2:return e.sent(),et.debug("sync processor stopped"),[2]}})})},t}(),rs=Pr().isNode,Ht=new he("DataStore"),mr=Symbol("sync"),be;(function(t){t.SYNC_ENGINE_STORAGE_SUBSCRIBED="storageSubscribed",t.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED="subscriptionsEstablished",t.SYNC_ENGINE_SYNC_QUERIES_STARTED="syncQueriesStarted",t.SYNC_ENGINE_SYNC_QUERIES_READY="syncQueriesReady",t.SYNC_ENGINE_MODEL_SYNCED="modelSynced",t.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED="outboxMutationEnqueued",t.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED="outboxMutationProcessed",t.SYNC_ENGINE_OUTBOX_STATUS="outboxStatus",t.SYNC_ENGINE_NETWORK_STATUS="networkStatus",t.SYNC_ENGINE_READY="ready"})(be||(be={}));var _u=function(){function t(e,r,n,i,a,o,s,c,u,l,f,h,d){var p=this;l===void 0&&(l={}),this.schema=e,this.namespaceResolver=r,this.modelClasses=n,this.userModelClasses=i,this.storage=a,this.modelInstanceCreator=o,this.syncPredicates=u,this.amplifyConfig=l,this.authModeStrategy=f,this.amplifyContext=h,this.connectivityMonitor=d,this.online=!1,this.modelSyncedStatus=new WeakMap,this.connectionDisrupted=!1,this.runningProcesses=new Mt,this.waitForSleepState=new Promise(function(g){p.syncQueriesObservableStartSleeping=g});var y=this.modelClasses.MutationEvent;this.outbox=new Oh(this.schema,y,o,mr),this.modelMerger=new Ih(this.outbox,mr),this.syncQueriesProcessor=new jh(this.schema,this.syncPredicates,this.amplifyConfig,this.authModeStrategy,c,this.amplifyContext),this.subscriptionsProcessor=new Lh(this.schema,this.syncPredicates,this.amplifyConfig,this.authModeStrategy,c,this.amplifyContext),this.mutationsProcessor=new Rh(this.schema,this.storage,this.userModelClasses,this.outbox,this.modelInstanceCreator,y,this.amplifyConfig,this.authModeStrategy,c,s,this.amplifyContext),this.datastoreConnectivity=this.connectivityMonitor||new Th}return t.prototype.getModelSyncedStatus=function(e){return this.modelSyncedStatus.get(e)},t.prototype.start=function(e){var r=this;return new xe(function(n){Ht.log("starting sync engine...");var i=[];r.runningProcesses.add(function(){return N(r,void 0,void 0,function(){var a,o,s,c=this;return O(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.setupModels(e)];case 1:return u.sent(),[3,3];case 2:return a=u.sent(),n.error(a),[2];case 3:return o=new Promise(function(l,f){c.datastoreConnectivity.status().subscribe(function(h){var d=h.online;return N(c,void 0,void 0,function(){var p=this;return O(this,function(y){return[2,this.runningProcesses.isOpen&&this.runningProcesses.add(function(g){return N(p,void 0,void 0,function(){var v,m,S,b,E,A=this;return O(this,function(w){switch(w.label){case 0:return d&&!this.online?(this.online=d,n.next({type:be.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),m=void 0,rs?(Ht.warn("Realtime disabled when in a server-side environment"),[3,6]):[3,1]):[3,10];case 1:this.stopDisruptionListener=this.startDisruptionListener(),E=M(this.subscriptionsProcessor.start(),2),v=E[0],m=E[1],w.label=2;case 2:return w.trys.push([2,4,,5]),[4,new Promise(function(T,I){g.then(I);var x=v.subscribe({next:function(C){C===In.CONNECTED&&T()},error:function(C){I(C);var _=A.disconnectionHandler();_(C)}});i.push(x)})];case 3:return w.sent(),[3,5];case 4:return S=w.sent(),n.error(S),f(),[2];case 5:Ht.log("Realtime ready"),n.next({type:be.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED}),w.label=6;case 6:return w.trys.push([6,8,,9]),[4,new Promise(function(T,I){var x=A.syncQueriesObservable().subscribe({next:function(C){var _=C.type;_===be.SYNC_ENGINE_SYNC_QUERIES_READY&&T(),n.next(C)},complete:function(){T()},error:function(C){I(C)}});x&&i.push(x)})];case 7:return w.sent(),[3,9];case 8:return b=w.sent(),n.error(b),f(),[2];case 9:return i.push(this.mutationsProcessor.start().subscribe(function(T){var I=T.modelDefinition,x=T.model,C=T.hasMore;return A.runningProcesses.add(function(){return N(A,void 0,void 0,function(){var _,P,D=this;return O(this,function(R){switch(R.label){case 0:return _=this.userModelClasses[I.name],P=this.modelInstanceCreator(_,x),[4,this.storage.runExclusive(function(q){return D.modelMerger.merge(q,P,I)})];case 1:return R.sent(),n.next({type:be.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED,data:{model:_,element:P}}),n.next({type:be.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!C}}),[2]}})})},"mutation processor event")})),rs||i.push(m.subscribe(function(T){var I=M(T,3);I[0];var x=I[1],C=I[2];return A.runningProcesses.add(function(){return N(A,void 0,void 0,function(){var _,P,D=this;return O(this,function(R){switch(R.label){case 0:return _=this.userModelClasses[x.name],P=this.modelInstanceCreator(_,C),[4,this.storage.runExclusive(function(q){return D.modelMerger.merge(q,P,x)})];case 1:return R.sent(),[2]}})})},"subscription dataSubsObservable event")})),[3,11];case 10:d||(this.online=d,n.next({type:be.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),i.forEach(function(T){return T.unsubscribe()}),i=[]),w.label=11;case 11:return l(),[2]}})})},"datastore connectivity event")]})})})}),this.storage.observe(null,null,mr).filter(function(l){var f=l.model,h=c.getModelDefinition(f);return h.syncable===!0}).subscribe({next:function(l){var f=l.opType,h=l.model,d=l.element,p=l.condition;return N(c,void 0,void 0,function(){var y=this;return O(this,function(g){return[2,this.runningProcesses.add(function(){return N(y,void 0,void 0,function(){var v,m,S,b,E;return O(this,function(A){switch(A.label){case 0:return v=this.schema.namespaces[this.namespaceResolver(h)],m=this.modelClasses.MutationEvent,S=this.getModelDefinition(h),b=zd(p,S),E=Au(v.relationships,this.getModelDefinition(h),f,h,d,b,m,this.modelInstanceCreator),[4,this.outbox.enqueue(this.storage,E)];case 1:return A.sent(),n.next({type:be.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED,data:{model:h,element:d}}),n.next({type:be.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!1}}),[4,o];case 2:return A.sent(),this.online&&this.mutationsProcessor.resume(),[2]}})})},"storage event")]})})}}),n.next({type:be.SYNC_ENGINE_STORAGE_SUBSCRIBED}),[4,this.outbox.peek(this.storage)];case 4:return s=u.sent()===void 0,n.next({type:be.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:s}}),[4,o];case 5:return u.sent(),n.next({type:be.SYNC_ENGINE_READY}),[2]}})})},"sync start")})},t.prototype.getModelsMetadataWithNextFullSync=function(e){return N(this,void 0,void 0,function(){var r,n,i=this;return O(this,function(a){switch(a.label){case 0:return n=Map.bind,[4,this.runningProcesses.add(function(){return i.getModelsMetadata()},"sync/index getModelsMetadataWithNextFullSync")];case 1:return r=new(n.apply(Map,[void 0,a.sent().map(function(o){var s=o.namespace,c=o.model,u=o.lastSync,l=o.lastFullSync,f=o.fullSyncInterval;o.lastSyncPredicate;var h=l+f,d=!l||h<e?0:u;return[i.schema.namespaces[s].models[c],[s,d]]})])),[2,r]}})})},t.prototype.syncQueriesObservable=function(){var e=this;return this.online?new xe(function(r){var n;e.runningProcesses.isOpen&&e.runningProcesses.add(function(i){return N(e,void 0,void 0,function(){var a,o,s,c=this;return O(this,function(u){switch(u.label){case 0:a=!1,o=function(){var l,f,h,d,p,y,g,v,m;return O(this,function(S){switch(S.label){case 0:return l=new WeakMap,[4,s.getModelsMetadataWithNextFullSync(Date.now())];case 1:return f=S.sent(),h=new Set(f.keys()),[4,new Promise(function(b,E){c.runningProcesses.isOpen||b(),i.then(function(){return b()}),n=c.syncQueriesProcessor.start(f).subscribe({next:function(A){var w=A.namespace,T=A.modelDefinition,I=A.items,x=A.done,C=A.startedAt,_=A.isFullSync;return N(c,void 0,void 0,function(){var P,D,R,q,L,z,pe=this;return O(this,function(U){switch(U.label){case 0:return P=this.userModelClasses[T.name],l.has(P)||(l.set(P,{new:0,updated:0,deleted:0}),y=qo(),v=v===void 0?C:Math.max(v,C)),[4,this.storage.runExclusive(function(H){return N(pe,void 0,void 0,function(){var Y,$,Z,ae,oe,se,ue,W,me,ce,Q,ge,Te,ve,Le;return O(this,function(V){switch(V.label){case 0:return[4,this.outbox.getModelIds(H)];case 1:Y=V.sent(),$=[],Z=I.filter(function(re){var Ee=it(T,re);return Y.has(Ee)?($.push(re),!1):!0}),ae=[],V.label=2;case 2:V.trys.push([2,7,8,9]),oe=j($),se=oe.next(),V.label=3;case 3:return se.done?[3,6]:(ue=se.value,[4,this.modelMerger.merge(H,ue,T)]);case 4:W=V.sent(),W!==void 0&&ae.push([ue,W]),V.label=5;case 5:return se=oe.next(),[3,3];case 6:return[3,9];case 7:return me=V.sent(),ve={error:me},[3,9];case 8:try{se&&!se.done&&(Le=oe.return)&&Le.call(oe)}finally{if(ve)throw ve.error}return[7];case 9:return Q=(ce=ae.push).apply,ge=[ae],[4,this.modelMerger.mergePage(H,P,Z,T)];case 10:return Q.apply(ce,ge.concat([ie.apply(void 0,[V.sent()])])),Te=l.get(P),ae.forEach(function(re){var Ee=M(re,2),le=Ee[1];switch(le){case X.INSERT:Te.new++;break;case X.UPDATE:Te.updated++;break;case X.DELETE:Te.deleted++;break;default:throw new Error("Invalid opType "+le)}}),[2]}})})})];case 1:return U.sent(),x?(D=T.name,[4,this.getModelMetadata(w,D)]):[3,4];case 2:return R=U.sent(),q=R.lastFullSync,L=R.fullSyncInterval,p=L,d=d===void 0?q:Math.max(d,_?C:q),R=this.modelClasses.ModelMetadata.copyOf(R,function(H){H.lastSync=C,H.lastFullSync=_?C:R.lastFullSync}),[4,this.storage.save(R,void 0,mr)];case 3:U.sent(),z=l.get(P),this.modelSyncedStatus.set(P,!0),r.next({type:be.SYNC_ENGINE_MODEL_SYNCED,data:{model:P,isFullSync:_,isDeltaSync:!_,counts:z}}),h.delete(T),h.size===0&&(g=qo()-y,b(),r.next({type:be.SYNC_ENGINE_SYNC_QUERIES_READY}),n.unsubscribe()),U.label=4;case 4:return[2]}})})},error:function(A){r.error(A)}}),r.next({type:be.SYNC_ENGINE_SYNC_QUERIES_STARTED,data:{models:Array.from(h).map(function(A){var w=A.name;return w})}})})];case 2:return S.sent(),d?m=d+p-(v+g):m=p-g,Ht.debug("Next fullSync in "+m/1e3+" seconds. ("+new Date(Date.now()+m)+")"),[4,s.runningProcesses.add(function(b){return N(c,void 0,void 0,function(){var E,A,w=this;return O(this,function(T){return A=new Promise(function(I){E=I,setTimeout(E,m)}),b.then(function(){a=!0,w.syncQueriesObservableStartSleeping(),E()}),this.unsleepSyncQueriesObservable=E,this.syncQueriesObservableStartSleeping(),[2,A]})})},"syncQueriesObservable sleep")];case 3:return S.sent(),s.unsleepSyncQueriesObservable=null,s.waitForSleepState=new Promise(function(b){c.syncQueriesObservableStartSleeping=b}),[2]}})},s=this,u.label=1;case 1:return!r.closed&&!a?[5,o()]:[3,3];case 2:return u.sent(),[3,1];case 3:return[2]}})})},"syncQueriesObservable main")}):xe.of()},t.prototype.disconnectionHandler=function(){var e=this;return function(r){(Oe.CONNECTION_CLOSED===r||Oe.TIMEOUT_DISCONNECT===r)&&e.datastoreConnectivity.socketDisconnected()}},t.prototype.unsubscribeConnectivity=function(){this.datastoreConnectivity.unsubscribe()},t.prototype.stop=function(){return N(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return Ht.debug("stopping sync engine"),this.unsubscribeConnectivity(),this.stopDisruptionListener&&this.stopDisruptionListener(),[4,this.mutationsProcessor.stop()];case 1:return e.sent(),[4,this.subscriptionsProcessor.stop()];case 2:return e.sent(),[4,this.datastoreConnectivity.stop()];case 3:return e.sent(),[4,this.syncQueriesProcessor.stop()];case 4:return e.sent(),[4,this.runningProcesses.close()];case 5:return e.sent(),[4,this.runningProcesses.open()];case 6:return e.sent(),Ht.debug("sync engine stopped and ready to restart"),[2]}})})},t.prototype.setupModels=function(e){return N(this,void 0,void 0,function(){var r,n,i,a,o,s,c,u,l,f,h,d,p,y=this;return O(this,function(g){switch(g.label){case 0:r=e.fullSyncInterval,n=this.modelClasses.ModelMetadata,i=[],Object.values(this.schema.namespaces).forEach(function(v){Object.values(v.models).filter(function(m){var S=m.syncable;return S}).forEach(function(m){if(i.push([v.name,m]),v.name===hr){var S=y.userModelClasses[m.name];y.modelSyncedStatus.set(S,!1)}})}),o=i.map(function(v){var m=M(v,2),S=m[0],b=m[1];return N(y,void 0,void 0,function(){var E,A,w,T,I,x,C,_,P;return O(this,function(D){switch(D.label){case 0:return[4,this.getModelMetadata(S,b.name)];case 1:return E=D.sent(),A=ne.getPredicates(this.syncPredicates.get(b),!1),w=A?JSON.stringify(A):null,E!==void 0?[3,3]:[4,this.storage.save(this.modelInstanceCreator(n,{model:b.name,namespace:S,lastSync:null,fullSyncInterval:r,lastFullSync:null,lastSyncPredicate:w}),void 0,mr)];case 2:return x=M.apply(void 0,[D.sent(),1]),C=M(x[0],1),a=C[0],[3,5];case 3:return T=E.lastSyncPredicate?E.lastSyncPredicate:null,I=T!==w,[4,this.storage.save(n.copyOf(E,function(R){R.fullSyncInterval=r,I&&(R.lastSync=null,R.lastFullSync=null,R.lastSyncPredicate=w)}))];case 4:_=M.apply(void 0,[D.sent(),1]),P=M(_[0],1),a=P[0],D.label=5;case 5:return[2,a]}})})}),s={},g.label=1;case 1:return g.trys.push([1,6,7,8]),[4,Promise.all(o)];case 2:c=j.apply(void 0,[g.sent()]),u=c.next(),g.label=3;case 3:if(u.done)return[3,5];l=u.value,f=l.model,s[f]=l,g.label=4;case 4:return u=c.next(),[3,3];case 5:return[3,8];case 6:return h=g.sent(),d={error:h},[3,8];case 7:try{u&&!u.done&&(p=c.return)&&p.call(c)}finally{if(d)throw d.error}return[7];case 8:return[2,s]}})})},t.prototype.getModelsMetadata=function(){return N(this,void 0,void 0,function(){var e,r;return O(this,function(n){switch(n.label){case 0:return e=this.modelClasses.ModelMetadata,[4,this.storage.query(e)];case 1:return r=n.sent(),[2,r]}})})},t.prototype.getModelMetadata=function(e,r){return N(this,void 0,void 0,function(){var n,i,a,o;return O(this,function(s){switch(s.label){case 0:return n=this.modelClasses.ModelMetadata,i=ne.createFromAST(this.schema.namespaces[ar].models[n.name],{and:[{namespace:{eq:e}},{model:{eq:r}}]}),[4,this.storage.query(n,i,{page:0,limit:1})];case 1:return a=M.apply(void 0,[s.sent(),1]),o=a[0],[2,o]}})})},t.prototype.getModelDefinition=function(e){var r=this.namespaceResolver(e),n=this.schema.namespaces[r].models[e.name];return n},t.getNamespace=function(){var e={name:ar,relationships:{},enums:{OperationType:{name:"OperationType",values:["CREATE","UPDATE","DELETE"]}},nonModels:{},models:{MutationEvent:{name:"MutationEvent",pluralName:"MutationEvents",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},data:{name:"data",type:"String",isRequired:!0,isArray:!1},modelId:{name:"modelId",type:"String",isRequired:!0,isArray:!1},operation:{name:"operation",type:{enum:"Operationtype"},isArray:!1,isRequired:!0},condition:{name:"condition",type:"String",isArray:!1,isRequired:!0}}},ModelMetadata:{name:"ModelMetadata",pluralName:"ModelsMetadata",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},namespace:{name:"namespace",type:"String",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},lastSync:{name:"lastSync",type:"Int",isRequired:!1,isArray:!1},lastFullSync:{name:"lastFullSync",type:"Int",isRequired:!1,isArray:!1},fullSyncInterval:{name:"fullSyncInterval",type:"Int",isRequired:!0,isArray:!1},lastSyncPredicate:{name:"lastSyncPredicate",type:"String",isRequired:!1,isArray:!1}}}}};return e},t.prototype.startDisruptionListener=function(){var e=this;return bt.listen("api",function(r){if(r.source==="PubSub"&&r.payload.event===eu){var n=r.payload.data.connectionState;switch(n){case ye.ConnectionDisrupted:e.connectionDisrupted=!0;break;case ye.Connected:e.connectionDisrupted&&e.scheduleSync(),e.connectionDisrupted=!1;break}}})},t.prototype.scheduleSync=function(){var e=this;return this.waitForSleepState.then(function(){e.unsleepSyncQueriesObservable()})},t}(),qh=ie(su),ta=new Map,Hr=function(t,e){var r=e||new Sd;return ta.set(r,t),r},tt=function(t){if(!ta.has(t))throw new Error("Invalid predicate. Terminate your predicate with a valid condition (e.g., `p => p.field.eq('value')`) or pass `Predicates.ALL`.");return ta.get(t)},ra={and:"or",or:"and",not:"and",eq:"ne",ne:"eq",gt:"le",ge:"lt",lt:"ge",le:"gt",contains:"notContains",notContains:"contains"},hn=function(){function t(e,r,n){this.field=e,this.operator=r,this.operands=n,this.validate()}return t.prototype.copy=function(e){return[new t(this.field,this.operator,ie(this.operands)),void 0]},t.prototype.toAST=function(){var e,r;return e={},e[this.field]=(r={},r[this.operator]=this.operator==="between"?[this.operands[0],this.operands[1]]:this.operands[0],r),e},t.prototype.negated=function(e){return this.operator==="between"?new Zt(e,void 0,void 0,"or",[new t(this.field,"lt",[this.operands[0]]),new t(this.field,"gt",[this.operands[1]])]):this.operator==="beginsWith"?new Zt(e,void 0,void 0,"not",[new t(this.field,"beginsWith",[this.operands[0]])]):new t(this.field,ra[this.operator],this.operands)},t.prototype.fetch=function(e){return N(this,void 0,void 0,function(){return O(this,function(r){return[2,Promise.reject("No implementation needed [yet].")]})})},t.prototype.matches=function(e){return N(this,void 0,void 0,function(){var r,n,i,a,o=this;return O(this,function(s){if(r=e[this.field],n={eq:function(){return r===o.operands[0]},ne:function(){return r!==o.operands[0]},gt:function(){return r>o.operands[0]},ge:function(){return r>=o.operands[0]},lt:function(){return r<o.operands[0]},le:function(){return r<=o.operands[0]},contains:function(){return(r==null?void 0:r.indexOf(o.operands[0]))>-1},notContains:function(){return r?r.indexOf(o.operands[0])===-1:!0},beginsWith:function(){return r==null?void 0:r.startsWith(o.operands[0])},between:function(){return r>=o.operands[0]&&r<=o.operands[1]}},i=n[this.operator],i)return a=i(),[2,a];throw new Error("Invalid operator given: "+this.operator)})})},t.prototype.validate=function(){var e=this,r=function(o){var s=o===1?"argument is":"arguments are";return function(){if(e.operands.length!==o)return"Exactly "+o+" "+s+" required."}},n={eq:r(1),ne:r(1),gt:r(1),ge:r(1),lt:r(1),le:r(1),contains:r(1),notContains:r(1),beginsWith:r(1),between:function(){return r(2)()||(e.operands[0]>e.operands[1]?"The first argument must be less than or equal to the second argument.":null)}},i=n[this.operator];if(i){var a=i();if(typeof a=="string")throw new Error("Incorrect usage of `"+this.operator+"()`: "+a)}else throw new Error("Non-existent operator: `"+this.operator+"()`")},t}(),Bh=function(){var t=1;return function(){return"group_"+t++}}(),Zt=function(){function t(e,r,n,i,a,o){o===void 0&&(o=!1),this.model=e,this.field=r,this.relationshipType=n,this.operator=i,this.operands=a,this.isOptimized=o,this.groupId=Bh()}return t.prototype.copy=function(e){var r=new t(this.model,this.field,this.relationshipType,this.operator,[]),n=e===this?r:void 0;return this.operands.forEach(function(i){var a=M(i.copy(e),2),o=a[0],s=a[1];r.operands.push(o),n=n||s}),[r,n]},t.prototype.withFieldConditionsOnly=function(e){var r=this,n=e!==(this.operator==="not");return new t(this.model,void 0,void 0,e?ra[this.operator]:this.operator,this.operands.filter(function(i){return i instanceof hn}).map(function(i){return n?i.negated(r.model):i}))},t.prototype.optimized=function(e){var r=this;e===void 0&&(e=!0);var n=this.operands.map(function(a){return a instanceof t?a.optimized(r.operator==="not"):a});if(!e&&["and","or"].includes(this.operator)&&!this.field&&n.length===1){var i=n[0];if(i instanceof hn){if(i.operator!=="between")return i}else return i}return new t(this.model,this.field,this.relationshipType,this.operator,n,!0)},t.prototype.fetch=function(e,r,n){return r===void 0&&(r=[]),n===void 0&&(n=!1),N(this,void 0,void 0,function(){var i,a,o,s,c,u,l,f,h,d,p,y,g,v,m,S,w,b,E,A,w,T,I,x,C,_,P,D,R,Y,q,L,z,pe,U,H,Y,$,Z,ae,oe,se,ue,W,me,ce,Q,ge,Te,ve,Le,V,re,Ee=this;return O(this,function(le){switch(le.label){case 0:if(!this.isOptimized)return[2,this.optimized().fetch(e)];i=[],a=n?ra[this.operator]:this.operator,o=n!==(this.operator==="not"),s=this.operands.filter(function(ee){return ee instanceof t}),c=this.operands.filter(function(ee){return ee instanceof hn}),le.label=1;case 1:le.trys.push([1,10,11,12]),u=j(s),l=u.next(),le.label=2;case 2:return l.done?[3,9]:(f=l.value,[4,f.fetch(e,ie(r,[this.groupId]),o)]);case 3:if(h=le.sent(),h.length===0)return a==="and"?[2,[]]:(i.push([]),[3,8]);if(!f.field)return[3,7];if(d=jn.from(this.model,f.field),!d)return[3,5];p=[];try{for(y=(ue=void 0,j(h)),g=y.next();!g.done;g=y.next()){for(v=g.value,m=[],S=0;S<d.localJoinFields.length;S++)m.push((me={},me[d.localJoinFields[S]]={eq:v[d.remoteJoinFields[S]]},me));p.push({and:m})}}catch(ee){ue={error:ee}}finally{try{g&&!g.done&&(W=y.return)&&W.call(y)}finally{if(ue)throw ue.error}}return w=ne.createFromAST(this.model.schema,{or:p}),E=(b=i).push,[4,e.query(this.model.builder,w)];case 4:return E.apply(b,[le.sent()]),[3,6];case 5:throw new Error("Missing field metadata.");case 6:return[3,8];case 7:i.push(h),le.label=8;case 8:return l=u.next(),[3,2];case 9:return[3,12];case 10:return A=le.sent(),oe={error:A},[3,12];case 11:try{l&&!l.done&&(se=u.return)&&se.call(u)}finally{if(oe)throw oe.error}return[7];case 12:return c.length>0?(w=this.withFieldConditionsOnly(o).toStoragePredicate(),I=(T=i).push,[4,e.query(this.model.builder,w)]):[3,14];case 13:return I.apply(T,[le.sent()]),[3,16];case 14:return c.length===0&&i.length===0?(C=(x=i).push,[4,e.query(this.model.builder)]):[3,16];case 15:C.apply(x,[le.sent()]),le.label=16;case 16:if(_=function(ee){return JSON.stringify(Ee.model.pkField.map(function(je){return ee[je]}))},a==="and"){if(i.length===0)return[2,[]];try{for(D=j(i),R=D.next();!R.done;R=D.next())if(Y=R.value,P===void 0)P=new Map(Y.map(function(ee){return[_(ee),ee]}));else{q=new Map(Y.map(function(ee){return[_(ee),ee]}));try{for(L=(ge=void 0,j(P.keys())),z=L.next();!z.done;z=L.next())pe=z.value,q.has(pe)||P.delete(pe)}catch(ee){ge={error:ee}}finally{try{z&&!z.done&&(Te=L.return)&&Te.call(L)}finally{if(ge)throw ge.error}}}}catch(ee){ce={error:ee}}finally{try{R&&!R.done&&(Q=D.return)&&Q.call(D)}finally{if(ce)throw ce.error}}}else if(a==="or"||a==="not"){P=new Map;try{for(U=j(i),H=U.next();!H.done;H=U.next()){Y=H.value;try{for($=(V=void 0,j(Y)),Z=$.next();!Z.done;Z=$.next())ae=Z.value,P.set(_(ae),ae)}catch(ee){V={error:ee}}finally{try{Z&&!Z.done&&(re=$.return)&&re.call($)}finally{if(V)throw V.error}}}}catch(ee){ve={error:ee}}finally{try{H&&!H.done&&(Le=U.return)&&Le.call(U)}finally{if(ve)throw ve.error}}}return[2,Array.from((P==null?void 0:P.values())||[])]}})})},t.prototype.matches=function(e,r){r===void 0&&(r=!1);var n,i;return N(this,void 0,void 0,function(){var a,o,s,c,u,l;return O(this,function(f){switch(f.label){case 0:return this.field&&!r?[4,e[this.field]]:[3,2];case 1:return o=f.sent(),[3,3];case 2:o=e,f.label=3;case 3:if(a=o,!a)return[2,!1];if(!(this.relationshipType==="HAS_MANY"&&typeof a[Symbol.asyncIterator]=="function"))return[3,17];f.label=4;case 4:f.trys.push([4,10,11,16]),s=nt(a),f.label=5;case 5:return[4,s.next()];case 6:return c=f.sent(),!c.done?(u=c.value,[4,this.matches(u,!0)]):[3,9];case 7:if(f.sent())return[2,!0];f.label=8;case 8:return[3,5];case 9:return[3,16];case 10:return l=f.sent(),n={error:l},[3,16];case 11:return f.trys.push([11,,14,15]),c&&!c.done&&(i=s.return)?[4,i.call(s)]:[3,13];case 12:f.sent(),f.label=13;case 13:return[3,15];case 14:if(n)throw n.error;return[7];case 15:return[7];case 16:return[2,!1];case 17:return this.operator!=="or"?[3,18]:[2,td(this.operands,function(h){return h.matches(a)})];case 18:return this.operator!=="and"?[3,19]:[2,rd(this.operands,function(h){return h.matches(a)})];case 19:if(this.operator!=="not")return[3,21];if(this.operands.length!==1)throw new Error("Invalid arguments! `not()` accepts exactly one predicate expression.");return[4,this.operands[0].matches(a)];case 20:return[2,!f.sent()];case 21:throw new Error("Invalid group operator!")}})})},t.prototype.toAST=function(){var e;if(this.field)throw new Error("Nested type conditions are not supported!");return e={},e[this.operator]=this.operands.map(function(r){return r.toAST()}),e},t.prototype.toStoragePredicate=function(){return ne.createFromAST(this.model.schema,this.toAST())},t.prototype.toJSON=function(){return K(K({},this),{model:this.model.schema.name})},t}();function xt(t,e,r,n,i){e===void 0&&(e=!0);var a=new Zt(t,r,void 0,"and",[]),o=n&&i?n:a,s=n&&i?i:a,c={};Hr(o,c);var u=function(){var h=M(o.copy(s),2),d=h[0],p=h[1],y=xt(t,e,void 0,d,p);return{query:d,newTail:p,newLink:y}};["and","or"].forEach(function(h){c[h]=function(d){var p=u(),y=p.query,g=p.newTail,v=d(xt(t,e));if(!Array.isArray(v))throw new Error("Invalid predicate. `"+h+"` groups must return an array of child conditions.");return g==null||g.operands.push(new Zt(t,r,void 0,h,v.map(function(m){return tt(m)}))),Hr(y)}}),c.not=function(h){var d=u(),p=d.query,y=d.newTail;return y==null||y.operands.push(new Zt(t,r,void 0,"not",[tt(h(xt(t,e)))])),Hr(p)};var l=function(h){Object.defineProperty(c,h,{enumerable:!0,get:function(){var d=t.schema.allFields[h];if(d.association)if(e)if(d.association.connectionType==="BELONGS_TO"||d.association.connectionType==="HAS_ONE"||d.association.connectionType==="HAS_MANY"){var p=d.type.modelConstructor;if(!p)throw new Error("Related model metadata is missing. This is a bug! Please report it.");var y=M(o.copy(s),2),g=y[0],v=y[1],m=new Zt(p,h,d.association.connectionType,"and",[]);v.operands.push(m);var S=xt(p,e,void 0,g,m);return S}else throw new Error("Related model definition doesn't have a typedef. This is a bug! Please report it.");else throw new Error("Predication on releated models is not supported in this context.");else return qh.reduce(function(b,E){var A;return K(K({},b),(A={},A[E]=function(){for(var w=[],T=0;T<arguments.length;T++)w[T]=arguments[T];var I=u(),x=I.query,C=I.newTail,_=w.map(function(P){return P===void 0?null:P});return C==null||C.operands.push(new hn(h,E,_)),Hr(x)},A))},{})}})};for(var f in t.schema.allFields)l(f);return c}function Jr(t){return xt(t,!1)}jf(!0);kf();var G=new he("DataStore"),Uh=fu(Date.now()),Kh=Pr().isNode,ns="schemaVersion",Ae,qn=new WeakMap,$t=new WeakMap,Re=function(t){var e=qn.get(t),r=e?Ae.namespaces[e].models[t.name]:void 0;return r},rt=function(t){return Rt(t)&&qn.has(t)},$r=function(t){var e=qn.get(t);if(!e)throw new Error("Namespace Resolver for '"+t.name+"' not found! This is probably a bug in '@amplify-js/datastore'.");return e},Oi=function(t){if(!t)throw new Error("Missing modelConstructor");var e=Re(t);if(!e)throw new Error("Missing modelSchema");var r=Se(e);if(!r)throw new Error("Could not determine PK");return xt({builder:t,schema:e,pkField:r})},Ra,er,Ma,Cu,Jt=new WeakMap,Ze;(function(t){t.Detached="Detached",t.DataStore="DataStore",t.API="API"})(Ze||(Ze={}));var na=new WeakMap;function Pt(t,e){return Array.isArray(t)?t.map(function(r){return Pt(r,e)}):t&&na.set(t,e),t}var is=function(t){return na.has(t)?na.get(t):Ze.Detached},zh=function(t){var e;if(Ae!==void 0)return console.warn("The schema has already been initialized"),er;G.log("validating schema",{schema:t}),Wh(t.codegenVersion);var r=K({name:hr},t);G.log("DataStore","Init models"),er=Yr(r),G.log("DataStore","Models initialized");var n=$h(),i=ea.getNamespace(),a=_u.getNamespace();return Ma=Yr(n),Cu=Yr(i),Ra=Yr(a),Ae={namespaces:(e={},e[n.name]=n,e[r.name]=r,e[i.name]=i,e[a.name]=a,e),version:t.version,codegenVersion:t.codegenVersion},Object.keys(Ae.namespaces).forEach(function(o){var s,c,u=M(vu(Ae.namespaces[o]),2),l=u[0],f=u[1];Ae.namespaces[o].relationships=l,Ae.namespaces[o].keys=f;var h=new Map;Object.values(Ae.namespaces[o].models).forEach(function(S){var b,E,A,w,T=[];Object.values(S.fields).filter(function(L){return L.association&&L.association.connectionType==="BELONGS_TO"&&L.type.model!==S.name}).forEach(function(L){return T.push(L.type.model)}),h.set(S.name,T),Object.values(S.fields).forEach(function(L){var z=er[L.type.model];Rt(z)&&Object.defineProperty(L.type,"modelConstructor",{get:function(){var pe=Re(z);if(!pe)throw new Error("Could not find model definition for "+z.name);return{builder:z,schema:pe,pkField:Se(pe)}}})});var I=Ae.namespaces[o].relationships[S.name].indexes,x=new Set;try{for(var C=j(I),_=C.next();!_.done;_=C.next()){var P=_.value;try{for(var D=(A=void 0,j(P[1])),R=D.next();!R.done;R=D.next()){var q=R.value;x.add(q)}}catch(L){A={error:L}}finally{try{R&&!R.done&&(w=D.return)&&w.call(D)}finally{if(A)throw A.error}}}}catch(L){b={error:L}}finally{try{_&&!_.done&&(E=C.return)&&E.call(C)}finally{if(b)throw b.error}}S.allFields=K(K({},Object.fromEntries(ie(x.values()).map(function(L){return[L,{name:L,type:"ID",isArray:!1}]}))),S.fields)});for(var d=new Map,p=1e3;p>0&&h.size!==0;){if(p--,p===0)throw new Error("Models are not topologically sortable. Please verify your schema.");try{for(var y=(s=void 0,j(Array.from(h.keys()))),g=y.next();!g.done;g=y.next()){var v=g.value,m=h.get(v);m!=null&&m.every(function(S){return d.has(S)})&&d.set(v,m)}}catch(S){s={error:S}}finally{try{g&&!g.done&&(c=y.return)&&c.call(y)}finally{if(s)throw s.error}}Array.from(d.keys()).forEach(function(S){return h.delete(S)})}Ae.namespaces[o].modelTopologicalOrdering=d}),er},as=function(){if(Ae===void 0){var t="Schema is not initialized. DataStore will not function as expected. This could happen if you have multiple versions of DataStore installed. Please see https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js/#check-for-duplicate-versions";throw G.error(t),new Error(t)}},Wh=function(t){var e=3,r=2,n=!1;try{var i=t.split("."),a=M(i,4),o=a[0],s=a[1],c=a[2],u=a[3];n=Number(o)===e&&Number(s)>=r}catch(f){console.log("Error parsing codegen version: "+t+`
`+f)}if(!n){var l="Models were generated with an unsupported version of codegen. Codegen artifacts are from "+(t||"an unknown version")+", whereas ^"+e+"."+r+".0 is required. Update to the latest CLI and run 'amplify codegen models'.";throw G.error(l),new Error(l)}},Yr=function(t){var e={};return Object.entries(t.models).forEach(function(r){var n=M(r,2),i=n[0],a=n[1],o=Vh(a);e[i]=o,qn.set(o,t.name)}),Object.entries(t.nonModels||{}).forEach(function(r){var n=M(r,2),i=n[0],a=n[1],o=Hh(a);e[i]=o}),e},xu=new WeakSet;function or(t,e){return xu.add(e),new t(e)}var On=function(t){return function(e,r){var n=t.fields[e];if(n!==void 0){var i=n.type,a=n.isRequired,o=n.isArrayNullable,s=n.name,c=n.isArray,u=Hi(t)?md(t):{},l=!!u[s];if((!c&&a||c&&!o)&&!l&&r==null)throw new Error("Field "+s+" is required");if(Hi(t)&&!pu(t)){var f=Se(t);if(f.includes(e)&&r==="")throw G.error(wr.idEmptyString,{k:e,value:r}),new Error(wr.idEmptyString)}if(gu(i)){var h=Bt.getJSType(i),d=Bt.getValidationFunction(i);if(i==="AWSJSON"){if(typeof r===h)return;if(typeof r=="string")try{JSON.parse(r);return}catch{throw new Error("Field "+s+" is an invalid JSON object. "+r)}}if(c){var p=h;if(a||(p=h+" | null | undefined"),!Array.isArray(r)&&!o)throw new Error("Field "+s+" should be of type ["+p+"], "+typeof r+" received. "+r);if(!Ve(r)&&r.some(function(S){return Ve(S)?a:typeof S!==h})){var y=r.map(function(S){return S===null?"null":typeof S}).join(",");throw new Error("All elements in the "+s+" array should be of type "+p+", ["+y+"] received. "+r)}if(d&&!Ve(r)){var g=r.map(function(S){return Ve(S)?!!(Ve(S)&&!a):d(S)});if(!g.every(function(S){return S}))throw new Error("All elements in the "+s+" array should be of type "+i+", validation failed for one or more elements. "+r)}}else{if(!a&&r===void 0)return;if(typeof r!==h&&r!==null)throw new Error("Field "+s+" should be of type "+h+", "+typeof r+" received. "+r);if(!Ve(r)&&d&&!d(r))throw new Error("Field "+s+" should be of type "+i+", validation failed. "+r)}}else if(wn(i)&&!Ve(r)){var v=Ae.namespaces.user.nonModels[i.nonModel],m=On(v);if(c){var p=i.nonModel;if(a||(p=i.nonModel+" | null | undefined"),!Array.isArray(r))throw new Error("Field "+s+" should be of type ["+p+"], "+typeof r+" received. "+r);r.forEach(function(b){if(Ve(b)&&a||typeof b!="object"&&typeof b<"u")throw new Error("All elements in the "+s+" array should be of type "+i.nonModel+", ["+typeof b+"] received. "+b);Ve(b)||Object.keys(v.fields).forEach(function(E){m(E,b[E])})})}else{if(typeof r!="object")throw new Error("Field "+s+" should be of type "+i.nonModel+", "+typeof r+" recieved. "+r);Object.keys(v.fields).forEach(function(S){m(S,r[S])})}}}}},Pu=function(t,e,r){var n=t.fields[e]||{},i=n.isArray,a=n.type;if(typeof r=="string"&&(i||a==="AWSJSON"||wn(a)||bu(a)))try{return JSON.parse(r)}catch{}return typeof r=="number"&&a==="Boolean"?!!r:r},ia=new WeakMap,ku=function(t,e,r){var n=On(e);Object.entries(t).forEach(function(i){var a=M(i,2),o=a[0],s=a[1],c=Pu(e,o,s);n(o,c),r[o]=c})},os=function(t,e){var r,n;try{for(var i=j(Object.keys(t.fields)),a=i.next();!a.done;a=i.next()){var o=a.value;e[o]===void 0&&(e[o]=null)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},Vh=function(t){var e,r,n=function(){function u(l){var f=[],h=Er(this,function(p){ku(l,t,p);var y=xu.has(l),g=y?l:{},v=g.id;if(pu(t)){var m=v!=null,S=m?v:t.syncable?Tr.v4():Uh();p.id=S}else yd(t)&&(p.id=p.id||Tr.v4());y||Gh(p,t);var b=g._version,E=g._lastChangedAt,A=g._deleted;t.syncable&&(p._version=b,p._lastChangedAt=E,p._deleted=A)},function(p){return f=p}),d=Er(h,function(p){return os(t,p)});return ia.set(d,f),d}return u.copyOf=function(l,f){var h=Object.getPrototypeOf(l||{}).constructor;if(!rt(h)){var d="The source object is not a valid model";throw G.error(d,{source:l}),new Error(d)}var p=[],y=Er(l,function(E){f(E);var A=Se(t);A.forEach(function(T){E[T]!==l[T]&&G.warn("copyOf() does not update PK fields. The '"+T+"' update is being ignored.",{source:l}),E[T]=l[T]});var w=On(t);Object.entries(E).forEach(function(T){var I=M(T,2),x=I[0],C=I[1],_=Pu(t,x,C);w(x,_)}),os(t,E)},function(E){return p=E}),g=$t.has(l);if(p.length||g)if(g){var v=M($t.get(l),2),m=v[0],S=v[1],b=hd(S,m,p);$t.set(y,[b,S]),us(b,t)}else $t.set(y,[p,l]),us(p,t);else $t.set(y,[[],l]);return Pt(y,Ze.DataStore)},u.fromJSON=function(l){var f=this;if(Array.isArray(l))return l.map(function(p){return f.fromJSON(p)});var h=or(n,l),d=On(t);return Object.entries(h).forEach(function(p){var y=M(p,2),g=y[0],v=y[1];d(g,v)}),Pt(h,Ze.DataStore)},u}();n[Dt]=!0,Object.defineProperty(n,"name",{value:t.name});var i=jn.allFrom({builder:n,schema:t,pkField:Se(t)}),a=function(u){var l=u.field;Object.defineProperty(n.prototype,t.fields[l].name,{set:function(f){if(typeof f=="object"||typeof f>"u"){if(f&&f.hasOwnProperty("_version")){var h=Object.getPrototypeOf(f||{}).constructor;if(!rt(h)){var d="Value passed to "+t.name+"."+l+" is not a valid instance of a model";throw G.error(d,{model:f}),new Error(d)}if(h.name.toLowerCase()!==u.remoteModelConstructor.name.toLowerCase()){var d="Value passed to "+t.name+"."+l+" is not an instance of "+u.remoteModelConstructor.name;throw G.error(d,{model:f}),new Error(d)}}if(u.isComplete){for(var p=0;p<u.localJoinFields.length;p++)this[u.localJoinFields[p]]=f==null?void 0:f[u.remoteJoinFields[p]];var y=Jt.has(this)?Jt.get(this):Jt.set(this,{}).get(this);y[l]=f||void 0}}},get:function(){var f=this,h=Jt.has(this)?Jt.get(this):Jt.set(this,{}).get(this);if(!h.hasOwnProperty(l))if(is(this)===Ze.DataStore){var d=Du.query(u.remoteModelConstructor,function(p){return p.and(function(y){return u.remoteJoinFields.map(function(g,v){return y[g].eq(f[u.localJoinFields[v]])})})});u.type==="HAS_MANY"?h[l]=new ss(d):h[l]=d.then(function(p){if(p.length>1){var y=new Error(`
									Data integrity error.
									Too many records found for a HAS_ONE/BELONGS_TO field '`+t.name+"."+l+`'
								`);throw console.error(y),y}else return p[0]})}else{if(is(this)===Ze.API)throw new Error("Lazy loading from API is not yet supported!");return u.type==="HAS_MANY"?new ss([]):Promise.resolve(void 0)}return h[l]}})};try{for(var o=j(i),s=o.next();!s.done;s=o.next()){var c=s.value;a(c)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n};(function(t){oa(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Promise);var ss=function(){function t(e){this.values=e}return t.prototype[Symbol.asyncIterator]=function(){var e=this,r,n=0;return{next:function(){return N(e,void 0,void 0,function(){var i;return O(this,function(a){switch(a.label){case 0:return r?[3,2]:[4,this.values];case 1:r=a.sent(),a.label=2;case 2:return n<r.length?(i={value:r[n],done:!1},n++,[2,i]):[2,{value:null,done:!0}]}})})}}},t.prototype.toArray=function(e){var r=(e===void 0?{}:e).max,n=r===void 0?Number.MAX_SAFE_INTEGER:r,i,a;return N(this,void 0,void 0,function(){var o,s,c,u,l,f;return O(this,function(h){switch(h.label){case 0:o=[],s=0,h.label=1;case 1:h.trys.push([1,6,7,12]),c=nt(this),h.label=2;case 2:return[4,c.next()];case 3:if(u=h.sent(),!!u.done)return[3,5];if(l=u.value,s<n)o.push(l),s++;else return[3,5];h.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return f=h.sent(),i={error:f},[3,12];case 7:return h.trys.push([7,,10,11]),u&&!u.done&&(a=c.return)?[4,a.call(c)]:[3,9];case 8:h.sent(),h.label=9;case 9:return[3,11];case 10:if(i)throw i.error;return[7];case 11:return[7];case 12:return[2,o]}})})},t}(),Gh=function(t,e){var r=Object.keys(t),n=e.fields;r.forEach(function(i){if(n[i]&&n[i].isReadOnly)throw new Error(i+" is read-only.")})},us=function(t,e){var r=t.map(function(i){return[i.path[0],i.value]}),n=e.fields;r.forEach(function(i){var a=M(i,2),o=a[0],s=a[1];if(!(!s||!n[o])&&n[o].isReadOnly)throw new Error(o+" is read-only.")})},Hh=function(t){var e=function(){function r(n){var i=Er(this,function(a){ku(n,t,a)});return i}return r}();return e[Dt]=!0,Object.defineProperty(e,"name",{value:t.name}),Yf(e),e};function cs(t){return typeof t=="string"}function ls(t){var e=t.localModel,r=t.modelConstructor,n=t.remoteModel,i=n._version;return or(r,K(K({},e),{_version:i}))}function fs(t){G.warn(t)}function ds(t,e){var r;switch(t){case wa:r=Ma[e];break;case hr:r=er[e];break;case ar:r=Ra[e];break;case lu:r=Cu[e];break;default:throw new Error("Invalid namespace: "+t)}if(rt(r))return r;var n="Model name is not valid for namespace. modelName: "+e+", namespace: "+t;throw G.error(n),new Error(n)}function Jh(t,e){return N(this,void 0,void 0,function(){var r,n,i=this;return O(this,function(a){switch(a.label){case 0:return r=Ma.Setting,n=Ae.namespaces[wa].models.Setting,[4,t.runExclusive(function(o){return N(i,void 0,void 0,function(){var s,c,u;return O(this,function(l){switch(l.label){case 0:return[4,o.query(r,ne.createFromAST(n,{and:{key:{eq:ns}}}),{page:0,limit:1})];case 1:return s=M.apply(void 0,[l.sent(),1]),c=s[0],c!==void 0&&c.value!==void 0?(u=JSON.parse(c.value),u===e?[3,3]:[4,o.clear(!1)]):[3,4];case 2:l.sent(),l.label=3;case 3:return[3,6];case 4:return[4,o.save(or(r,{key:ns,value:JSON.stringify(e)}))];case 5:l.sent(),l.label=6;case 6:return[2]}})})})];case 1:return a.sent(),[2]}})})}var Ot;function $h(){var t={name:wa,relationships:{},enums:{},nonModels:{},models:{Setting:{name:"Setting",pluralName:"Settings",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},key:{name:"key",type:"String",isRequired:!0,isArray:!1},value:{name:"value",type:"String",isRequired:!0,isArray:!1}}}}};return t}var ct;(function(t){t.NotRunning="Not Running",t.Starting="Starting",t.Running="Running",t.Stopping="Stopping",t.Clearing="Clearing"})(ct||(ct={}));var Yh=function(){function t(){var e=this;this.Auth=St,this.API=Dr,this.Cache=Ft,this.amplifyConfig={},this.syncPredicates=new WeakMap,this.amplifyContext={Auth:this.Auth,API:this.API,Cache:this.Cache},this.runningProcesses=new Mt,this.state=ct.NotRunning,this.start=function(){return N(e,void 0,void 0,function(){var r=this;return O(this,function(n){return[2,this.runningProcesses.add(function(){return N(r,void 0,void 0,function(){var i,a,o,s=this;return O(this,function(c){switch(c.label){case 0:return this.state=ct.Starting,this.initialized!==void 0?[3,1]:(G.debug("Starting DataStore"),this.initialized=new Promise(function(u,l){s.initResolve=u,s.initReject=l}),[3,3]);case 1:return[4,this.initialized];case 2:return c.sent(),[2];case 3:return this.storage=new ea(Ae,$r,ds,or,this.storageAdapter,this.sessionId),[4,this.storage.init()];case 4:return c.sent(),as(),[4,Jh(this.storage,Ae.version)];case 5:return c.sent(),i=this.amplifyConfig.aws_appsync_graphqlEndpoint,i?(G.debug("GraphQL endpoint available",i),a=this,[4,this.processSyncExpressions()]):[3,7];case 6:return a.syncPredicates=c.sent(),this.sync=new _u(Ae,$r,Ra,er,this.storage,or,this.conflictHandler,this.errorHandler,this.syncPredicates,this.amplifyConfig,this.authModeStrategy,this.amplifyContext,this.connectivityMonitor),o=this.fullSyncInterval*1e3*60,Ot=this.sync.start({fullSyncInterval:o}).subscribe({next:function(u){var l=u.type,f=u.data,h=Kh?be.SYNC_ENGINE_SYNC_QUERIES_READY:be.SYNC_ENGINE_STORAGE_SUBSCRIBED;l===h&&s.initResolve(),bt.dispatch("datastore",{event:l,data:f})},error:function(u){G.warn("Sync error",u),s.initReject()}}),[3,8];case 7:G.warn("Data won't be synchronized. No GraphQL endpoint configured. Did you forget `Amplify.configure(awsconfig)`?",{config:this.amplifyConfig}),this.initResolve(),c.label=8;case 8:return[4,this.initialized];case 9:return c.sent(),this.state=ct.Running,[2]}})})},"datastore start").catch(this.handleAddProcError("DataStore.start()"))]})})},this.query=function(r,n,i){return N(e,void 0,void 0,function(){var a=this;return O(this,function(o){return[2,this.runningProcesses.add(function(){return N(a,void 0,void 0,function(){var s,f,c,u,l,f,d,d,h,d,p,y,g;return O(this,function(v){switch(v.label){case 0:return[4,this.start()];case 1:if(v.sent(),!this.storage)throw new Error("No storage to query");if(!rt(r))throw f="Constructor is not for a valid model",G.error(f,{modelConstructor:r}),new Error(f);if(typeof n=="string"&&i!==void 0&&G.warn("Pagination is ignored when querying by id"),c=Re(r),!c)throw new Error("Invalid model definition provided!");if(u=this.processPagination(c,i),l=Se(c),!cs(n))return[3,3];if(l.length>1)throw f=wr.queryByPkWithCompositeKeyPresent,G.error(f,{keyFields:l}),new Error(f);return d=ne.createFromFlatEqualities(c,(y={},y[l[0]]=n,y)),[4,this.storage.query(r,d,u)];case 2:return s=v.sent(),[3,9];case 3:return Vr(n,c)?(d=ne.createForPk(c,n),[4,this.storage.query(r,d,u)]):[3,5];case 4:return s=v.sent(),[3,9];case 5:return!n||mi(n)?[4,(g=this.storage)===null||g===void 0?void 0:g.query(r,void 0,u)]:[3,7];case 6:return s=v.sent(),[3,9];case 7:return h=xt({builder:r,schema:c,pkField:Se(c)}),d=tt(n(h)),[4,d.fetch(this.storage)];case 8:s=v.sent(),s=Ta(s,u),v.label=9;case 9:return p=cs(n)||Vr(n,c),[2,Pt(p?s[0]:s,Ze.DataStore)]}})})},"datastore query").catch(this.handleAddProcError("DataStore.query()"))]})})},this.save=function(r,n){return N(e,void 0,void 0,function(){var i=this;return O(this,function(a){return[2,this.runningProcesses.add(function(){return N(i,void 0,void 0,function(){var o,s,c,u,l,f,h,d,p,y,g=this;return O(this,function(v){switch(v.label){case 0:return[4,this.start()];case 1:if(v.sent(),!this.storage)throw new Error("No storage to save to");if(o=$t.get(r),s=ia.has(r)?[ia.get(r),{}]:void 0,c=o||s,u=r?r.constructor:void 0,!rt(u))throw l="Object is not an instance of a valid model",G.error(l,{model:r}),new Error(l);if(f=Re(u),!f)throw new Error("Model Definition could not be found for model");return h={builder:u,schema:f,pkField:Se(f)},[4,this.storage.runExclusive(function(m){return N(g,void 0,void 0,function(){var S,b,E,A,w,T,I,x,C,_;return O(this,function(P){switch(P.label){case 0:S=jn.allFrom(h).filter(function(D){return D.type==="BELONGS_TO"}),P.label=1;case 1:P.trys.push([1,6,7,8]),b=j(S),E=b.next(),P.label=2;case 2:return E.done?[3,5]:(A=E.value,w=A.createRemoteQueryObject(r),w===null?[3,4]:[4,m.query(A.remoteModelConstructor,ne.createFromFlatEqualities(A.remoteDefinition,w))]);case 3:if(T=P.sent(),T.length===0)throw new Error(["Data integrity error. You tried to save a "+f.name+" ("+JSON.stringify(r)+")",'but the instance assigned to the "'+A.field+'" property',"does not exist in the local database. If you're trying to create the related",'"'+((_=A.remoteDefinition)===null||_===void 0?void 0:_.name)+'", you must save it independently first.'].join(" "));P.label=4;case 4:return E=b.next(),[3,2];case 5:return[3,8];case 6:return I=P.sent(),x={error:I},[3,8];case 7:try{E&&!E.done&&(C=b.return)&&C.call(b)}finally{if(x)throw x.error}return[7];case 8:return[2]}})})})];case 2:return v.sent(),d=n?tt(n(Jr(h))).toStoragePredicate():void 0,[4,this.storage.runExclusive(function(m){return N(g,void 0,void 0,function(){return O(this,function(S){switch(S.label){case 0:return[4,m.save(r,d,void 0,c)];case 1:return S.sent(),[2,m.query(u,ne.createForPk(f,r))]}})})})];case 3:return p=M.apply(void 0,[v.sent(),1]),y=p[0],[2,Pt(y,Ze.DataStore)]}})})},"datastore save").catch(this.handleAddProcError("DataStore.save()"))]})})},this.setConflictHandler=function(r){var n=r.DataStore,i=function(){return e.conflictHandler===ls};return n&&n.conflictHandler?n.conflictHandler:i()&&r.conflictHandler?r.conflictHandler:e.conflictHandler||ls},this.setErrorHandler=function(r){var n=r.DataStore,i=function(){return e.errorHandler===fs};return n&&n.errorHandler?n.errorHandler:i()&&r.errorHandler?r.errorHandler:e.errorHandler||fs},this.delete=function(r,n){return N(e,void 0,void 0,function(){var i=this;return O(this,function(a){return[2,this.runningProcesses.add(function(){return N(i,void 0,void 0,function(){var o,d,l,d,f,s,d,d,c,g,u,l,d,f,h,d,p,y,g,v;return O(this,function(m){switch(m.label){case 0:return[4,this.start()];case 1:if(m.sent(),!this.storage)throw new Error("No storage to delete from");if(!r)throw d="Model or Model Constructor required",G.error(d,{modelOrConstructor:r}),new Error(d);if(!rt(r))return[3,3];if(l=r,!n)throw d="Id to delete or criteria required. Do you want to delete all? Pass Predicates.ALL",G.error(d,{identifierOrCriteria:n}),new Error(d);if(f=Re(l),!f)throw new Error("Could not find model definition for modelConstructor.");if(typeof n=="string"){if(s=Se(f),s.length>1)throw d=wr.deleteByPkWithCompositeKeyPresent,G.error(d,{keyFields:s}),new Error(d);o=ne.createFromFlatEqualities(f,(v={},v[s[0]]=n,v))}else if(Vr(n,f)?o=ne.createForPk(f,n):o=tt(n(Jr({builder:l,schema:f,pkField:Se(f)}))).toStoragePredicate(),!o||!ne.isValidPredicate(o))throw d="Criteria required. Do you want to delete all? Pass Predicates.ALL",G.error(d,{condition:o}),new Error(d);return[4,this.storage.delete(l,o)];case 2:return c=M.apply(void 0,[m.sent(),1]),g=c[0],[2,Pt(g,Ze.DataStore)];case 3:if(u=r,l=Object.getPrototypeOf(u||{}).constructor,!rt(l))throw d="Object is not an instance of a valid model",G.error(d,{model:u}),new Error(d);if(f=Re(l),!f)throw new Error("Could not find model definition for modelConstructor.");if(h=ne.createForPk(f,u),n){if(typeof n!="function")throw d="Invalid criteria",G.error(d,{identifierOrCriteria:n}),new Error(d);o=tt(n(Jr({builder:l,schema:f,pkField:Se(f)}))).toStoragePredicate()}else o=h;return[4,this.storage.delete(u,o)];case 4:return p=M.apply(void 0,[m.sent(),1]),y=M(p[0],1),g=y[0],[2,Pt(g,Ze.DataStore)]}})})},"datastore delete").catch(this.handleAddProcError("DataStore.delete()"))]})})},this.observe=function(r,n){var i,a=r&&rt(r)?r:void 0;if(r&&a===void 0){var o=r,s=o&&Object.getPrototypeOf(o).constructor;if(rt(s))return n&&G.warn("idOrCriteria is ignored when using a model instance",{model:o,identifierOrCriteria:n}),e.observe(s,o.id);var c="The model is not an instance of a PersistentModelConstructor";throw G.error(c,{model:o}),new Error(c)}if(n&&a&&Vr(n,Re(a))){var c=wr.observeWithObjectLiteral;throw G.error(c,{objectLiteral:n}),new Error(c)}if(n!==void 0&&a===void 0){var c="Cannot provide criteria without a modelConstructor";throw G.error(c,n),new Error(c)}if(a&&!rt(a)){var c="Constructor is not for a valid model";throw G.error(c,{modelConstructor:a}),new Error(c)}if(a&&typeof n=="string"){var u=function(l){return l.id.eq(n)};i=tt(u(Oi(a)))}else a&&typeof n=="function"&&(i=tt(n(Oi(a))));return new xe(function(l){var f;return e.runningProcesses.add(function(){return N(e,void 0,void 0,function(){var h=this;return O(this,function(d){switch(d.label){case 0:return[4,this.start()];case 1:return d.sent(),f=this.storage.observe(a).filter(function(p){var y=p.model;return $r(y)===hr}).subscribe({next:function(p){return h.runningProcesses.isOpen&&h.runningProcesses.add(function(){return N(h,void 0,void 0,function(){var y,g,v,m,S,b;return O(this,function(E){switch(E.label){case 0:return y=p,p.opType==="DELETE"?[3,2]:(g=Re(p.model),v=Se(g),m=vd(p.element,v),[4,this.query(p.model,m)]);case 1:S=E.sent(),y=K(K({},y),{element:S}),E.label=2;case 2:return b=!i,b?[3,4]:[4,i.matches(y.element)];case 3:b=E.sent(),E.label=4;case 4:return b&&l.next(y),[2]}})})},"datastore observe message handler")},error:function(p){return l.error(p)},complete:function(){return l.complete()}}),[2]}})})},"datastore observe observable initialization").catch(e.handleAddProcError("DataStore.observe()")).catch(function(h){l.error(h)}),e.runningProcesses.addCleaner(function(){return N(e,void 0,void 0,function(){return O(this,function(h){return f&&f.unsubscribe(),[2]})})},"DataStore.observe() cleanup")})},this.observeQuery=function(r,n,i){return new xe(function(a){var o=new Map,s=new Map,c=[],u,l,f=function(){var b=g();v(b)},h=new dd({callback:f,errorHandler:a.error,maxInterval:2e3}),d=(i||{}).sort,p=d?{sort:d}:void 0,y=Re(r);if(!y)throw new Error("Could not find model definition.");r&&typeof n=="function"?l=tt(n(Oi(r))):mi(n)&&(l=void 0),e.runningProcesses.add(function(){return N(e,void 0,void 0,function(){var b,E=this;return O(this,function(A){switch(A.label){case 0:return A.trys.push([0,2,,3]),[4,this.query(r,n,p)];case 1:return A.sent().forEach(function(w){var T=Re(r),I=it(T,w);o.set(I,w)}),u=this.observe(r).subscribe(function(w){var T=w.element,I=w.model,x=w.opType;return E.runningProcesses.isOpen&&E.runningProcesses.add(function(){return N(E,void 0,void 0,function(){var C,_,P,D,R,q,L;return O(this,function(z){switch(z.label){case 0:return C=Re(I),_=it(C,T),P=l,P?[4,l.matches(T)]:[3,2];case 1:P=!z.sent(),z.label=2;case 2:if(P)if(x==="UPDATE"&&(o.has(_)||s.has(_)))c.push(_);else return[2];return x==="DELETE"?c.push(_):s.set(_,T),D=(L=(q=this.sync)===null||q===void 0?void 0:q.getModelSyncedStatus(I))!==null&&L!==void 0?L:!1,R=s.size-c.length>=this.syncPageSize,(R||D)&&h.resolve(),h.start(),[2]}})})},"handle observeQuery observed event")}),f(),[3,3];case 2:return b=A.sent(),a.error(b),[3,3];case 3:return[2]}})})},"datastore observequery startup").catch(e.handleAddProcError("DataStore.observeQuery()")).catch(function(b){a.error(b)});var g=function(){var b,E,A=(E=(b=e.sync)===null||b===void 0?void 0:b.getModelSyncedStatus(r))!==null&&E!==void 0?E:!1,w=ie(Array.from(o.values()),Array.from(s.values()));o.clear(),w.forEach(function(I){var x=Re(r),C=it(x,I);o.set(C,I)}),c.forEach(function(I){return o.delete(I)});var T=Array.from(o.values());return i!=null&&i.sort&&m(T),{items:T,isSynced:A}},v=function(b){a.next(b),s.clear(),c=[]},m=function(b){var E=Re(r),A=e.processPagination(E,i),w=Vi.getPredicates(A.sort);if(w.length){var T=du(w);b.sort(T)}},S=function(b){var E=b.payload,A,w=E.event,T=E.data;w===be.SYNC_ENGINE_MODEL_SYNCED&&((A=T==null?void 0:T.model)===null||A===void 0?void 0:A.name)===r.name&&(f(),bt.remove("datastore",S))};return bt.listen("datastore",S),e.runningProcesses.addCleaner(function(){return N(e,void 0,void 0,function(){return O(this,function(b){return u&&u.unsubscribe(),[2]})})},"datastore observequery cleaner")})},this.configure=function(r){r===void 0&&(r={}),e.amplifyContext.Auth=e.Auth,e.amplifyContext.API=e.API,e.amplifyContext.Cache=e.Cache;var n=r.DataStore,i=r.authModeStrategyType;r.conflictHandler,r.errorHandler;var a=r.maxRecordsToSync,o=r.syncPageSize,s=r.fullSyncInterval,c=r.syncExpressions,u=r.authProviders,l=r.storageAdapter,f=_t(r,["DataStore","authModeStrategyType","conflictHandler","errorHandler","maxRecordsToSync","syncPageSize","fullSyncInterval","syncExpressions","authProviders","storageAdapter"]);e.amplifyConfig=K(K({},f),e.amplifyConfig),e.conflictHandler=e.setConflictHandler(r),e.errorHandler=e.setErrorHandler(r);var h=n&&n.authModeStrategyType||i||Ar.DEFAULT;switch(h){case Ar.MULTI_AUTH:e.authModeStrategy=Ad(e.amplifyContext);break;case Ar.DEFAULT:e.authModeStrategy=Fo;break;default:e.authModeStrategy=Fo;break}e.amplifyConfig.authProviders=n&&n.authProviders||u,e.syncExpressions=n&&n.syncExpressions||c||e.syncExpressions,e.maxRecordsToSync=n&&n.maxRecordsToSync||a||e.maxRecordsToSync||1e4,e.amplifyConfig.maxRecordsToSync=e.maxRecordsToSync,e.syncPageSize=n&&n.syncPageSize||o||e.syncPageSize||1e3,e.amplifyConfig.syncPageSize=e.syncPageSize,e.fullSyncInterval=n&&n.fullSyncInterval||s||e.fullSyncInterval||24*60,e.storageAdapter=n&&n.storageAdapter||l||e.storageAdapter||void 0,e.sessionId=e.retrieveSessionId()}}return t.prototype.getModuleName=function(){return"DataStore"},t.prototype.handleAddProcError=function(e){var r=this,n=function(i){throw i.message.startsWith("BackgroundManagerNotOpenError")?new Error(["DataStoreStateError: Tried to execute `"+e+'` while DataStore was "'+r.state+'".','This can only be done while DataStore is "Started" or "Stopped". To remedy:',"Ensure all calls to `stop()` and `clear()` have completed first.","If this is not possible, retry the operation until it succeeds."].join(`
`)):i};return n},t.prototype.clear=function(){return N(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return as(),this.state=ct.Clearing,[4,this.runningProcesses.close()];case 1:return e.sent(),this.storage!==void 0?[3,3]:(this.storage=new ea(Ae,$r,ds,or,this.storageAdapter,this.sessionId),[4,this.storage.init()]);case 2:e.sent(),e.label=3;case 3:return Ot&&!Ot.closed&&Ot.unsubscribe(),this.sync?[4,this.sync.stop()]:[3,5];case 4:e.sent(),e.label=5;case 5:return[4,this.storage.clear()];case 6:return e.sent(),this.initialized=void 0,this.storage=void 0,this.sync=void 0,this.syncPredicates=new WeakMap,[4,this.runningProcesses.open()];case 7:return e.sent(),this.state=ct.NotRunning,[2]}})})},t.prototype.stop=function(){return N(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return this.state=ct.Stopping,[4,this.runningProcesses.close()];case 1:return e.sent(),Ot&&!Ot.closed&&Ot.unsubscribe(),this.sync?[4,this.sync.stop()]:[3,3];case 2:e.sent(),e.label=3;case 3:return this.initialized=void 0,this.sync=void 0,[4,this.runningProcesses.open()];case 4:return e.sent(),this.state=ct.NotRunning,[2]}})})},t.prototype.processPagination=function(e,r){var n,i=r||{},a=i.limit,o=i.page,s=i.sort;if(!(a===void 0&&o===void 0&&s===void 0)){if(o!==void 0&&a===void 0)throw new Error("Limit is required when requesting a page");if(o!==void 0){if(typeof o!="number")throw new Error("Page should be a number");if(o<0)throw new Error("Page can't be negative")}if(a!==void 0){if(typeof a!="number")throw new Error("Limit should be a number");if(a<0)throw new Error("Limit can't be negative")}return s&&(n=Vi.createFromExisting(e,s)),{limit:a,page:o,sort:n}}},t.prototype.processSyncExpressions=function(){return N(this,void 0,void 0,function(){var e,r=this;return O(this,function(n){switch(n.label){case 0:return!this.syncExpressions||!this.syncExpressions.length?[2,new WeakMap]:[4,Promise.all(this.syncExpressions.map(function(i){return N(r,void 0,void 0,function(){var a,o,s,c,u,l;return O(this,function(f){switch(f.label){case 0:return[4,i];case 1:return a=f.sent(),o=a.modelConstructor,s=a.conditionProducer,c=Re(o),[4,this.unwrapPromise(s)];case 2:return u=f.sent(),mi(u)?[2,[c,null]]:(l=tt(u(Jr({builder:o,schema:c,pkField:Se(c)}))).toStoragePredicate(),[2,[c,l]])}})})}))];case 1:return e=n.sent(),[2,this.weakMapFromEntries(e)]}})})},t.prototype.unwrapPromise=function(e){return N(this,void 0,void 0,function(){var r,n;return O(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e()];case 1:return r=i.sent(),[2,r||e];case 2:if(n=i.sent(),n instanceof TypeError)return[2,e];throw n;case 3:return[2]}})})},t.prototype.weakMapFromEntries=function(e){return e.reduce(function(r,n){var i=M(n,2),a=i[0],o=i[1];if(r.has(a)){var s=a.name;return G.warn(`You can only utilize one Sync Expression per model.
          Subsequent sync expressions for the `+s+" model will be ignored."),r}return o&&r.set(a,o),r},new WeakMap)},t.prototype.retrieveSessionId=function(){try{var e=sessionStorage.getItem("datastoreSessionId");if(e){var r=this.amplifyConfig.aws_appsync_graphqlEndpoint,n=r.split("/")[2],i=M(n.split("."),1),a=i[0];return e+"-"+a}}catch{}},t}(),Du=new Yh;Ut.register(Du);const Qh={models:{Warehouse:{name:"Warehouse",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},organizationID:{name:"organizationID",isArray:!1,type:"ID",isRequired:!0,attributes:[]},Organization:{name:"Organization",isArray:!1,type:{model:"Organization"},isRequired:!1,attributes:[],association:{connectionType:"BELONGS_TO",targetNames:["organizationID"]}},name:{name:"name",isArray:!1,type:"String",isRequired:!1,attributes:[]},location:{name:"location",isArray:!1,type:"String",isRequired:!1,attributes:[]},Products:{name:"Products",isArray:!0,type:{model:"Product"},isRequired:!1,attributes:[],isArrayNullable:!0,association:{connectionType:"HAS_MANY",associatedWith:["Warehouse"]}},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0}},syncable:!0,pluralName:"Warehouses",attributes:[{type:"model",properties:{}},{type:"key",properties:{name:"byOrganization",fields:["organizationID"]}},{type:"auth",properties:{rules:[{allow:"public",operations:["create","update","delete","read"]}]}}]},Organization:{name:"Organization",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},Warehouses:{name:"Warehouses",isArray:!0,type:{model:"Warehouse"},isRequired:!1,attributes:[],isArrayNullable:!0,association:{connectionType:"HAS_MANY",associatedWith:["Organization"]}},name:{name:"name",isArray:!1,type:"String",isRequired:!1,attributes:[]},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0}},syncable:!0,pluralName:"Organizations",attributes:[{type:"model",properties:{}},{type:"auth",properties:{rules:[{allow:"public",operations:["create","update","delete","read"]}]}}]},KitPart:{name:"KitPart",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},quantity:{name:"quantity",isArray:!1,type:"Int",isRequired:!1,attributes:[]},kitID:{name:"kitID",isArray:!1,type:"ID",isRequired:!0,attributes:[]},Kit:{name:"Kit",isArray:!1,type:{model:"Product"},isRequired:!1,attributes:[],association:{connectionType:"BELONGS_TO",targetNames:["kitID"]}},part:{name:"part",isArray:!1,type:{model:"Product"},isRequired:!1,attributes:[],association:{connectionType:"BELONGS_TO",targetNames:["partID"]}},partID:{name:"partID",isArray:!1,type:"ID",isRequired:!1,attributes:[]},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0}},syncable:!0,pluralName:"KitParts",attributes:[{type:"model",properties:{}},{type:"key",properties:{name:"byProduct",fields:["kitID"]}},{type:"auth",properties:{rules:[{allow:"public",operations:["create","update","delete","read"]}]}}]},Item:{name:"Item",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},productID:{name:"productID",isArray:!1,type:"ID",isRequired:!1,attributes:[]},isTagged:{name:"isTagged",isArray:!1,type:"Boolean",isRequired:!1,attributes:[]},isActive:{name:"isActive",isArray:!1,type:"Boolean",isRequired:!1,attributes:[]},isEmployee:{name:"isEmployee",isArray:!1,type:"Boolean",isRequired:!1,attributes:[]},isEquipment:{name:"isEquipment",isArray:!1,type:"Boolean",isRequired:!1,attributes:[]},location:{name:"location",isArray:!1,type:"String",isRequired:!1,attributes:[]},product:{name:"product",isArray:!1,type:{model:"Product"},isRequired:!1,attributes:[],association:{connectionType:"BELONGS_TO",targetNames:["productID"]}},EPC_id:{name:"EPC_id",isArray:!1,type:"String",isRequired:!1,attributes:[]},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0}},syncable:!0,pluralName:"Items",attributes:[{type:"model",properties:{}},{type:"key",properties:{name:"byProduct",fields:["productID"]}},{type:"auth",properties:{rules:[{allow:"public",operations:["create","update","delete","read"]}]}}]},Product:{name:"Product",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},name:{name:"name",isArray:!1,type:"String",isRequired:!0,attributes:[]},isKit:{name:"isKit",isArray:!1,type:"Boolean",isRequired:!0,attributes:[]},items:{name:"items",isArray:!0,type:{model:"Item"},isRequired:!1,attributes:[],isArrayNullable:!0,association:{connectionType:"HAS_MANY",associatedWith:["product"]}},kitParts:{name:"kitParts",isArray:!0,type:{model:"KitPart"},isRequired:!1,attributes:[],isArrayNullable:!0,association:{connectionType:"HAS_MANY",associatedWith:["Kit"]}},description:{name:"description",isArray:!1,type:"String",isRequired:!1,attributes:[]},product_id:{name:"product_id",isArray:!1,type:"String",isRequired:!1,attributes:[]},trackThreshold:{name:"trackThreshold",isArray:!1,type:"Boolean",isRequired:!0,attributes:[]},threshold:{name:"threshold",isArray:!1,type:"Int",isRequired:!1,attributes:[]},Warehouse:{name:"Warehouse",isArray:!1,type:{model:"Warehouse"},isRequired:!1,attributes:[],association:{connectionType:"BELONGS_TO",targetNames:["warehouseID"]}},extraDetails:{name:"extraDetails",isArray:!0,type:{nonModel:"ExtraDetail"},isRequired:!1,attributes:[],isArrayNullable:!0},warehouseID:{name:"warehouseID",isArray:!1,type:"ID",isRequired:!0,attributes:[]},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0}},syncable:!0,pluralName:"Products",attributes:[{type:"model",properties:{}},{type:"key",properties:{name:"byWarehouse",fields:["warehouseID"]}},{type:"auth",properties:{rules:[{allow:"public",operations:["create","update","delete","read"]}]}}]},Employee:{name:"Employee",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},name:{name:"name",isArray:!1,type:"String",isRequired:!0,attributes:[]},items:{name:"items",isArray:!1,type:{model:"Item"},isRequired:!1,attributes:[],association:{connectionType:"HAS_ONE",associatedWith:["id"],targetNames:["employeeItemsId"]}},title:{name:"title",isArray:!1,type:"String",isRequired:!1,attributes:[]},email:{name:"email",isArray:!1,type:"String",isRequired:!1,attributes:[]},phone:{name:"phone",isArray:!1,type:"String",isRequired:!1,attributes:[]},extraDetails:{name:"extraDetails",isArray:!0,type:{nonModel:"ExtraDetail"},isRequired:!1,attributes:[],isArrayNullable:!0},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},employeeItemsId:{name:"employeeItemsId",isArray:!1,type:"ID",isRequired:!1,attributes:[]}},syncable:!0,pluralName:"Employees",attributes:[{type:"model",properties:{}},{type:"auth",properties:{rules:[{allow:"public",operations:["create","update","delete","read"]}]}}]},Equipment:{name:"Equipment",fields:{id:{name:"id",isArray:!1,type:"ID",isRequired:!0,attributes:[]},name:{name:"name",isArray:!1,type:"String",isRequired:!0,attributes:[]},items:{name:"items",isArray:!1,type:{model:"Item"},isRequired:!1,attributes:[],association:{connectionType:"HAS_ONE",associatedWith:["id"],targetNames:["equipmentItemsId"]}},description:{name:"description",isArray:!1,type:"String",isRequired:!1,attributes:[]},part_id:{name:"part_id",isArray:!1,type:"String",isRequired:!1,attributes:[]},extraDetails:{name:"extraDetails",isArray:!0,type:{nonModel:"ExtraDetail"},isRequired:!1,attributes:[],isArrayNullable:!0},createdAt:{name:"createdAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},updatedAt:{name:"updatedAt",isArray:!1,type:"AWSDateTime",isRequired:!1,attributes:[],isReadOnly:!0},equipmentItemsId:{name:"equipmentItemsId",isArray:!1,type:"ID",isRequired:!1,attributes:[]}},syncable:!0,pluralName:"Equipment",attributes:[{type:"model",properties:{}},{type:"auth",properties:{rules:[{allow:"public",operations:["create","update","delete","read"]}]}}]}},enums:{},nonModels:{ExtraDetail:{name:"ExtraDetail",fields:{name:{name:"name",isArray:!1,type:"String",isRequired:!1,attributes:[]},value:{name:"value",isArray:!1,type:"String",isRequired:!1,attributes:[]}}}},codegenVersion:"3.4.3",version:"a5ed497920eee5e49a894fef9a516ae7"},{Warehouse:tp,Organization:rp,KitPart:np,Item:ip,Product:ap,Employee:op,Equipment:sp,ExtraDetail:up}=zh(Qh);export{op as E,ip as I,np as K,ap as P,tp as W,sp as a,ep as b,Du as i};
