import{b as te,r as ne,q as V,M as se,J as O,t as U,I as oe,o as i,h as d,i as n,j as k,v,x as X,H as N,u as o,c as q,F as M,z as j,y as E,w as le,B as H,d as G,C as ie,f as K,_ as J}from"./entry.bbefaf41.js";import{_ as ae}from"./WarehouseHeaderWidget.vue.adaa5442.js";import{_ as re,a as de}from"./Loader.cf68234a.js";import{_ as ue}from"./TableRow.74e93b63.js";import{_ as ce}from"./TheTable.vue.2670ac42.js";import{_ as me}from"./SearchInput.vue.b95c3b48.js";import{u as pe}from"./debounce.2d63c4c2.js";import{u as _e}from"./inventory.a3e76661.js";import{u as D}from"./asyncData.35e0061c.js";import{u as F,a as W}from"./useLocalStorage.e123f57a.js";import"./warehouse.63771b4a.js";import"./index.aeb2a4e3.js";import"./Auth.625ee0a0.js";const ge=""+globalThis.__publicAssetsURL("images/svg/no-content.svg"),fe=G(()=>J(()=>import("./DefaultModal.189406ac.js"),["./DefaultModal.189406ac.js","./entry.bbefaf41.js","./entry.d612fb7e.css"],import.meta.url).then(y=>y.default||y)),ve=G(()=>J(()=>import("./ConfirmationModal.845951d5.js"),["./ConfirmationModal.845951d5.js","./entry.bbefaf41.js","./entry.d612fb7e.css","./ConfirmationModal.7ec1ebe7.css"],import.meta.url).then(y=>y.default||y)),ye={class:"mt-6 mb-4"},be={class:"justify-between my-5"},he={class:"mb-5 flex list-none flex-col flex-wrap pl-0 md:flex-row",id:"pills-tab",role:"tablist","data-te-nav-ref":""},Le={role:"presentation"},xe={role:"presentation"},ke={role:"presentation"},Ie={class:"flex justify-between my-5"},Ce=["disabled"],Se=["disabled"],we={class:"text-base"},Ve={class:"text-xs text-vvn-gray line-clamp-1"},qe={class:"flex rounded-lg bg-vvn-gray-50 w-max items-center px-2 py-1 text-xs border-2 border-vvn-gray"},Ee={key:0},Fe={key:1},Te=n("td",null,[n("div",{class:"flex rounded-lg w-max items-center px-2 py-1 text-xs border-2 border-red-900 bg-red-800"},[n("div",{class:"rounded-full bg-red-600 h-2 w-2 mr-2"}),X(" Not Printed ")])],-1),ze={key:1,class:"w-full h-[30rem] flex justify-center items-center"},Re=n("div",null,[n("img",{src:ge,alt:""}),n("p",{class:"text-vvn-gray-90 text-center text-lg mt-6"}," Encoding queue empty ")],-1),$e=[Re],Ae=n("h1",{class:"text-3xl font-bold text-white"}," Search Inventory ",-1),Ne=n("small",{class:"text-base text-vvn-gray"},"Albuquerque facility",-1),Me={class:"w-80 mt-5 mb-7"},He={class:"pr-3"},Ke={class:"text-base"},Pe={class:"text-xs text-vvn-gray line-clamp-1"},Qe={class:"flex rounded-lg bg-vvn-gray-50 w-max items-center px-2 py-1 text-xs border-2 border-vvn-gray"},Be={key:0},Oe={key:1},Ue={class:"text-base"},je={class:"flex justify-end"},De=["onClick"],We=n("h5",{class:"text-2xl text-white text-center mt-4"}," Kit created successfully ",-1),Xe={class:"flex justify-center mt-8"},dt=te({__name:"encoding",async setup(y){let T,z;const t=ne({name:"",description:"",totalInventory:0,quantity:0,threshold:0,encodingList:[],counterList:{}}),I=V(!1);var u=V(!0),c=V(!1),m=V(!1);const C=pe("",200),b=V(!1),p=_e(),_=ie();se(()=>{t.encodingList=F(_.encodingInvQueue)||[];for(var s=[],e=0;e<t.encodingList.length;e++)t.encodingList[e].isKit!=null&&s.push(t.encodingList[e]);t.encodingList=s});const P=()=>{u=!0,c=!1,m=!1,t.encodingList=F(_.encodingInvQueue)||[];for(var s=[],e=0;e<t.encodingList.length;e++)t.encodingList[e].isKit!=null&&s.push(t.encodingList[e]);t.encodingList=s},Q=()=>{u=!1,c=!0,m=!1,t.encodingList=F(_.encodingInvQueue)||[];for(var s=[],e=0;e<t.encodingList.length;e++)t.encodingList[e].title!=null&&s.push(t.encodingList[e]);t.encodingList=s},B=()=>{u=!1,c=!1,m=!0,t.encodingList=F(_.encodingInvQueue)||[];for(var s=[],e=0;e<t.encodingList.length;e++)t.encodingList[e].part_id!=null&&s.push(t.encodingList[e]);t.encodingList=s};[T,z]=O(()=>D("",()=>p.getInventoryItems({page:0,size:20}))),await T,z();const A=U(()=>C.value==""?p.inventoryList:p.inventorySearch);[T,z]=O(()=>D("",()=>p.getItems({page:0,size:100}))),await T,z(),U(()=>p.itemsData),oe(C,async s=>{p.searchInventoryItem(s,{page:0,size:20})});const Z=(s,e)=>{s.quantity<=0?K().error("Invalid item quantity"):(t.encodingList.push(s),t.counterList[e]=1,W(_.encodingQueue,t.encodingList),K().success(`${s.name} added to queue`))},Y=()=>{p.encItem([t.encodingList]).then(e=>{console.log("THE EPC!!!"),console.log(e);let h="";const g=Object.keys(e);for(let f=0;f<g.length;f++){const $=e[g[f]][1][0];for(let S=0;S<$.length;S++)h=h+"^XA^FO50,50^A0N,50,50^FD"+g[f]+"^FS^FO50,150^A0N,50,50^FD"+e[g[f]][0]+"^FS^RS8^RFW,H^FD"+$[S]+"^FS^RFR,H,0,12,1^FN1^FS^XZ"}console.log(h);const L=new FormData;L.append("sn","DBN231050752");const R=new Blob([h],{type:"text/plain"});L.append("zpl_file",R,"ZplFile.txt");const x=new XMLHttpRequest;x.open("POST","https://api.zebra.com/v2/devices/printers/send"),x.setRequestHeader("apikey","SW5fV2HzowqkaKdxTKmNhAw0MGYsSSPr"),x.setRequestHeader("tenant","83c99b121eda1c7f6a30e5b65a210b91"),x.send(L)}).catch(e=>{K().error("No more avaiable EPCs to utilize")})},ee=()=>{t.encodingList=F(_.encodingInvQueue)||[];for(var s=[],e=0;e<t.encodingList.length;e++)u==!0&&t.encodingList[e].isKit==null||c==!0&&t.encodingList[e].title==null?s.push(t.encodingList[e]):m==!0&&t.encodingList[e].part_id==null&&(console.log("IN HERE"),s.push(t.encodingList[e]));t.encodingList=s,W(_.encodingEmpQueue,s),u==!0&&P(),c==!0&&Q(),m==!0&&B()};return(s,e)=>{const h=ae,g=re,L=ue,R=ce,x=me,f=de,$=fe,S=ve;return i(),d(M,null,[n("div",{class:"bg-vvn-black-10 rounded-md",onSubmit:e[5]||(e[5]=le((...l)=>s.onSubmit&&s.onSubmit(...l),["prevent"]))},[n("div",ye,[k(h,null,{default:v(()=>[X("Encoding")]),_:1}),n("div",be,[n("ul",he,[n("li",Le,[n("button",{class:N({default:!o(u),green:o(u)}),onClick:e[0]||(e[0]=l=>P())}," Inventory ",2)]),n("li",xe,[n("button",{class:N({default:!o(c),green:o(c)}),onClick:e[1]||(e[1]=l=>Q())}," Employees ",2)]),n("li",ke,[n("button",{class:N({default:!o(m),green:o(m)}),onClick:e[2]||(e[2]=l=>B())}," Equipment ",2)])])]),n("div",Ie,[n("button",{class:"btn btn--primary",onClick:e[3]||(e[3]=l=>I.value=!0)}," Add Items To Queue "),n("div",null,[n("button",{disabled:o(t).encodingList.length==0,class:"btn btn--secondary mr-2 disabled:cursor-not-allowed",type:"button",onClick:ee}," Clear queue ",8,Ce),n("button",{class:"btn btn--primary",type:"submit",disabled:o(t).encodingList.length==0,onClick:e[4]||(e[4]=l=>Y())}," Print and Encode ",8,Se)])])]),o(t).encodingList.length!=0?(i(),q(R,{key:0,rows:["Item Name","Type","Status","",""],"template-columns":{"grid-template-columns":"40% 20% 15% 15% 10%"}},{default:v(()=>[(i(!0),d(M,null,j(o(t).encodingList,(l,a)=>(i(),q(L,{key:a,data:l,class:"mb-3","toggle-details":!1,"template-columns":{"grid-template-columns":"40% 20% 15% 15% 10%"}},{"row-data":v(r=>[n("td",null,[n("p",we,E(r.name),1),n("small",Ve,E(r.description),1)]),n("td",null,[n("div",qe,[n("p",null,[r.isKit?(i(),d("span",Ee,"Kit")):(i(),d("span",Fe,"Inventory"))])])]),Te,n("td",null,[k(g,{modelValue:o(t).encodingList[a].quantity,"onUpdate:modelValue":w=>o(t).encodingList[a].quantity=w,modelModifiers:{number:!0},onChange:w=>o(t).encodingList[a].quantity==0?o(t).encodingList.splice(a,1):null},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:2},1032,["data"]))),128))]),_:1})):(i(),d("div",ze,$e))],32),k($,{modelValue:o(I),"onUpdate:modelValue":e[8]||(e[8]=l=>H(I)?I.value=l:null),onClose:e[9]||(e[9]=l=>I.value=!1)},{default:v(()=>[Ae,Ne,n("div",Me,[k(x,{modelValue:o(C),"onUpdate:modelValue":e[6]||(e[6]=l=>H(C)?C.value=l:null),modelModifiers:{trim:!0,lazy:!0},"show-secondary-icon":!0,onInput:e[7]||(e[7]=l=>A.value=[])},null,8,["modelValue"])]),o(A).length!=0?(i(),q(R,{key:0,rows:["Item Name","Type","Available Stock","",""],"template-columns":{"grid-template-columns":"40% 20% 15% 15% 10%"}},{default:v(()=>[(i(!0),d(M,null,j(o(A),(l,a)=>(i(),q(L,{key:a,data:l,class:"mb-3","toggle-details":!1,"template-columns":{"grid-template-columns":"40% 20% 15% 15% 10%"}},{"row-data":v(r=>[n("td",He,[n("p",Ke,E(r.name),1),n("small",Pe,E(r.description),1)]),n("td",null,[n("div",Qe,[n("p",null,[r.isKit?(i(),d("span",Be,"Kit")):(i(),d("span",Oe,"Inventory"))])])]),n("td",Ue,E(r.quantity),1),n("td",null,[k(g,{modelValue:o(t).counterList[a],"onUpdate:modelValue":w=>o(t).counterList[a]=w,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),n("td",je,[n("button",{class:"btn btn--primary",type:"button",onClick:w=>Z({...r,quantity:o(t).counterList[a]||0},a)}," Add ",8,De)])]),_:2},1032,["data"]))),128))]),_:1})):(i(),q(f,{key:1}))]),_:1},8,["modelValue"]),k(S,{modelValue:o(b),"onUpdate:modelValue":e[11]||(e[11]=l=>H(b)?b.value=l:null),onClose:e[12]||(e[12]=l=>b.value=!1)},{default:v(()=>[We,n("div",Xe,[n("button",{class:"btn btn--primary mr-5",style:{"background-color":"transparent","border-color":"white"},onClick:e[10]||(e[10]=l=>b.value=!o(b))}," Close ")])]),_:1},8,["modelValue"])],64)}}});export{dt as default};
